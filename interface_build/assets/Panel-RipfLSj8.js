import{r as t,M as j,C as _,j as e,I as C,a as h,B as N,l as f,u as y,P as x,_ as g,b,c as k,d as D,L as P}from"./index-Rju8ibmY.js";function M({modalName:s}){const{clearModal:a,setModalContent:o}=t.useContext(j),{client:l}=t.useContext(_),n=t.useRef(null),i=()=>{a(s)},c=async()=>{var u,d,m;const r=(d=(u=n.current)==null?void 0:u.querySelector("input"))==null?void 0:d.value,p=(m=n.current)==null?void 0:m.querySelector("button");if(f(p,!0),!!l){if(r&&(r.length===11||r.length===14||r.length===18)){const v=r.replaceAll(".","").replaceAll("/","").replaceAll("-","");await y(l.id,{cpf_cnpj:v})&&(o({componentName:"modal_success_save_cpf_cnpj",components:e.jsx(x,{componentName:"modal_success_save_cpf_cnpj",message:"Dado salvo com sucesso!"})}),a(s))}else o({componentName:"modal_failed_save_cpf_cnpj",components:e.jsx(x,{componentName:"modal_failed_save_cpf_cnpj",message:"Cpf ou cnpj inválido! Tente novamente",type:"WARNING"})});f(p,!1)}};return e.jsxs("div",{className:"bg-light dark:bg-dark rounded-md p-4 flex flex-col items-center",children:[e.jsx("h2",{className:"font-bold text-2xl text-orange-500",children:"AVISO"}),e.jsx("p",{className:"text-medium text-lg text-orange-700",children:"Você ainda não registrou seu cpf ou cnpj..."}),e.jsxs("p",{className:"text-center opacity-80 text-orange-700/90",children:["Para manter a segurança da sua conta,",e.jsx("br",{})," é necessário que você salve em nosso sistema seu cpf ou cnpj."]}),e.jsxs("div",{className:"w-full mt-8",ref:n,children:[e.jsx(C,{name:"cpf_cnpj",title:"Digite seu cpf ou cnpj",mask:h}),e.jsxs("div",{className:"w-full flex mt-8 justify-evenly items-center",children:[e.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:i,children:"Deixar para depois"}),e.jsx(N,{onClick:c,children:"Salvar"})]})]})]})}function I(s){const a=Number(new Date),o=Number(new Date(s)),n=(a-o)/(1e3*3600);return Math.floor(n)}const O=t.lazy(()=>g(()=>import("./MainPanelClient-widY96vp.js"),__vite__mapDeps([0,1,2,3]))),w=t.lazy(()=>g(()=>import("./NavigatePanelClient-wREPV4Rq.js"),__vite__mapDeps([4,1,2,3])));function E(){const{setClient:s,client:a}=t.useContext(_),{setModalContent:o}=t.useContext(j),l=b();return t.useEffect(()=>{(async()=>{const n=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",!!n);const i=localStorage.getItem("token");if(!i)return;const c=await k(i);c?(!c.client.cpf_cnpj&&I(c.client.created_at)>24&&o({componentName:"modal_save_cpf_cnpj",components:e.jsx(D,{children:e.jsx(M,{modalName:"modal_save_cpf_cnpj"})})}),s(c.client)):l("/login")})()},[]),e.jsx("div",{className:"w-screen min-h-screen flex items-center text-primary-100 dark:text-light bg-light dark:bg-dark",children:a?e.jsxs("div",{className:"w-full h-full flex justify-start md:justify-center items-start",children:[e.jsx(w,{}),e.jsx(O,{})]}):e.jsx(P,{})})}const L=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{L as P,I as c};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MainPanelClient-widY96vp.js","assets/index-Rju8ibmY.js","assets/index-B1uMkO9O.css","assets/messagesEventManager-0_Uro9gn.js","assets/NavigatePanelClient-wREPV4Rq.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
