import{r as g,C as _,L as j,aM as o,j as e,aN as A,u as I,M as S,T as N,aO as U,P as k,a as P,a1 as q,aP as T,c as B,Z as F,aQ as b,aR as V,aS as D,aT as O,aU as Z,aV as G,aW as W,aX as H,aY as K,ay as Q,aZ as X,a_ as Y,k as $,a$ as J}from"./index-ZdNClpbm.js";import{m as y}from"./messagesEventManager-m0n6tnkY.js";function ee(){const{client:a}=g.useContext(_),r=g.useRef(null),[s]=j(),c=s.get(o.URL_NAME)===o.VALUE,f=async n=>{var d,l,i,m;const t=n.target.files;if(t.length&&t[0].size<4e6){const x=new FileReader;x.onload=v=>{var u,h,M,w,C,L,R;if(r.current){const z=r.current.querySelector("img");z&&((u=v.target)!=null&&u.result)&&(z.src=v.target.result.toString())}(h=r.current)==null||h.classList.add("flex"),(M=r.current)==null||M.classList.remove("hidden"),(C=(w=r.current)==null?void 0:w.querySelector("div#loading"))==null||C.classList.add("flex"),(R=(L=r.current)==null?void 0:L.querySelector("div#loading"))==null||R.classList.remove("hidden")},x.readAsDataURL(t[0]);const p=await A(t[0]);p!=null&&p.data&&a&&(await I({client_id:a==null?void 0:a.id,logo:p.data.url}),(l=(d=r.current)==null?void 0:d.querySelector("div#loading"))==null||l.classList.remove("flex"),(m=(i=r.current)==null?void 0:i.querySelector("div#loading"))==null||m.classList.add("hidden"))}};return e.jsx("div",{"data-ismenuresized":c,className:"w-[100px] h-[100px] md:w-[40px] md:h-[40px] md:data-[ismenuresized=false]:w-[80px] md:data-[ismenuresized=false]:h-[80px] rounded-full overflow-hidden cursor-pointer border-4 border-primary-100 dark:border-light",children:e.jsxs("label",{className:"w-full h-full relative cursor-pointer",ref:r,onChange:f,children:[e.jsx("input",{type:"file",className:"hidden",accept:".png, .jpg, .jpeg, .webp"}),e.jsx("img",{src:(a==null?void 0:a.logo)||"https://via.placeholder.com/100",alt:"",className:"w-full h-full object-contain"}),e.jsx("div",{id:"loading",className:"w-full h-full bg-zinc-800/50 absolute top-0 left-0 justify-center items-center hidden",children:e.jsx("div",{className:"w-[40px] h-[40px] border-2 border-t-primary-300 rounded-full animate-spin"})})]})})}function ae(){const{client:a}=g.useContext(_),{setModalContent:r}=g.useContext(S),s=g.useRef(null),c=({currentTarget:n})=>{var i,m;n.dataset.overlay=!1,n.style.display=!1;const t=(i=s.current)==null?void 0:i.querySelector("input"),d=s.current,l=(m=s.current)==null?void 0:m.querySelector("div[data-save]");t&&d&&l&&(d.classList.add("border"),t.classList.remove("disabled"),l.dataset.save=!0)},f=async()=>{var i,m,x;const n=(i=s.current)==null?void 0:i.querySelector("input"),t=s.current,d=(m=s.current)==null?void 0:m.querySelector("div[data-save]"),l=(x=s.current)==null?void 0:x.querySelector("div[data-overlay]");if(a){const p=n==null?void 0:n.value.split(" "),[v,u]=p||[];v&&u?(await I({client_id:a==null?void 0:a.id,fullname:n==null?void 0:n.value}),n&&t&&d&&(t.classList.remove("border"),n.classList.add("disabled"),d.dataset.save=!1,l.dataset.overlay=!0,n.blur())):r({componentName:"modal_error_name",components:e.jsx(k,{message:"Digite seu nome e sobrenome",type:"WARNING",componentName:"modal_error_name"})})}};return e.jsx(N,{tip:"2 cliques para editar seu nome",children:e.jsxs("div",{className:"w-full px-2 flex justify-center gap-2 items-center rounded-lg relative",ref:s,children:[e.jsx("div",{className:"w-full h-full absolute data-[overlay=false]:hidden",onDoubleClick:c,"data-testid":"test-display","data-overlay":!0}),e.jsx("input",{type:"text",className:"text-xl bg-transparent text-primary-100 dark:text-light text-center font-bold cursor-default whitespace-nowrap text-ellipsis overflow-hidden",onKeyDown:n=>n.code==="Enter"&&f(),defaultValue:a==null?void 0:a.fullname}),e.jsx("div",{"data-save":!1,onClick:f,className:"bg-light rounded-full justify-center items-center hidden data-[save=true]:flex",children:e.jsx(U,{className:"fill-green-500 text-2xl cursor-pointer","data-testid":"button-save"})})]})})}const se=({})=>{const{setModalContent:a,clearModal:r}=g.useContext(S),{client:s}=g.useContext(_),c=P(),[f]=j(),n=f.get(o.URL_NAME)===o.VALUE,t=()=>{function l(){localStorage.removeItem("token"),r("modal_confirm_exit_panel"),c("/login")}a({componentName:"modal_confirm_exit_panel",components:e.jsx(B,{children:e.jsx(F,{title:"Tem certeza que deseja sair do painel?",confirmFunction:l,cancelFuntion:()=>r("modal_confirm_exit_panel")})})})},d=()=>{c("/panel?tab=config")};return s&&e.jsx("div",{className:"w-full flex flex-col gap-2 justify-center items-center relative",children:e.jsxs("div",{className:"w-4/5 pb-2 flex flex-col justify-center items-center gap-2 border-b border-primary-100 dark:border-light/30",children:[e.jsxs("div",{className:"w-full flex justify-center gap-2 items-end",children:[e.jsx(N,{tip:"Edite seu perfil",children:e.jsx(q,{"data-ismenuresized":n,className:"text-2xl cursor-pointer hover:animate-spin md:data-[ismenuresized=true]:hidden fill-primary-100 dark:fill-light",onClick:d})}),e.jsx(ee,{}),e.jsx(N,{tip:"Sair do seu painel",children:e.jsx(T,{"data-ismenuresized":n,className:"text-2xl cursor-pointer -scale-x-100 fill-primary-100 dark:fill-light hover:fill-red-500 transition-colors duration-200 md:data-[ismenuresized=true]:hidden",onClick:t})})]}),e.jsxs("div",{"data-ismenuresized":n,className:"w-full flex flex-col md:data-[ismenuresized=true]:hidden",children:[e.jsx(ae,{}),e.jsx("h3",{"data-ismessages":y(s.plan_management).maxMessages,className:"flex gap-1 justify-center items-center text-primary-100 dark:text-light font-bold data-[ismessages='0']:hidden",children:y(s.plan_management).input+" / "+y(s.plan_management).maxMessages}),e.jsxs("h3",{"data-ismessages":y(s.plan_management).maxBonus,className:"flex gap-1 justify-center items-center bg-primary-300 p-1 rounded-lg border border-primary-100 text-primary-100 dark:text-light font-bold data-[ismessages='0']:hidden",children:["Bônus",e.jsx("span",{children:y(s.plan_management).reminingMessagesBonus+" / "+y(s.plan_management).maxBonus})]})]})]})})},E=[{tab:"my_chats",name:"Meus chats",Icon:D},{tab:"metrics",name:"Métricas",Icon:O},{tab:"database",name:"Fonte de dados",Icon:Z},{tab:"records",name:"Registros",Icon:G,topics:[{tab:"conversations",name:"Conversas",Icon:W},{tab:"leads",name:"Leads",Icon:H}]},{tab:"payment",name:"Assinatura",Icon:K}];function te(){const[a,r]=j(),s=g.useRef(null),c=a.get(o.URL_NAME)!==o.VALUE,f=a.get(b.url_name)===b.default_values.open,n=t=>{var v;const d=t.currentTarget,l=d.dataset.tab,i=(v=s.current)==null?void 0:v.querySelectorAll("div[data-container='topic']");if(!l)return;const m=E.find(u=>u.tab===l);m!=null&&m.topics?(x(l),a.get(o.URL_NAME)&&(a.set(Q,l),a.delete(o.URL_NAME),r(a))):(p(l),!(d.dataset.container==="sub_topic")&&x(l));function x(u){i==null||i.forEach(h=>{h.classList.remove("hidden"),h.classList.add("hidden")}),i==null||i.forEach(h=>{h.dataset.tab===u&&h.classList.toggle("hidden")})}function p(u){a.set("tab",u),f&&a.set(b.url_name,b.default_values.close),r(a)}};return e.jsx("ul",{ref:s,className:"w-full",children:E.map((t,d)=>{var l;return e.jsxs("li",{"data-tab":Number(a.get("tab"))==d,className:"w-full flex flex-col justify-center items-end cursor-pointer text-xl",children:[e.jsxs("div",{"data-tab":t.tab,"data-ismenuresize":c,className:"w-full p-2 pl-2 flex gap-2 items-center justify-between md:data-[ismenuresize=false]:justify-center group",onClick:n,children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(t.Icon,{className:"group-hover:fill-primary-100 text-primary-100 dark:text-light text-xl transition-colors duration-100"}),e.jsx("h2",{className:"md:group-data-[ismenuresize=false]:hidden group-hover:text-primary-100",children:t.name})]}),e.jsx(V,{"data-hastopic":!!((l=t==null?void 0:t.topics)!=null&&l.length),className:"md:group-data-[ismenuresize=false]:hidden data-[hastopic=false]:hidden self-center"})]}),e.jsx("div",{"data-container":"topic","data-tab":t.tab,className:"w-[90%] flex-col hidden",children:t.topics&&t.topics.map(i=>e.jsxs("div",{"data-container":"sub_topic","data-tab":i.tab,"data-ismenuresize":c,className:"w-full flex items-center gap-2 group md:data-[ismenuresize=false]:hidden",onClick:n,children:[e.jsx(i.Icon,{className:"group-hover:fill-primary-100 text-primary-100 dark:text-light text-base transition-colors duration-100"}),e.jsx("h2",{className:"text-base group-hover:text-primary-100",children:i.name})]},i.tab))})]},t.name)})})}const ne=()=>{const[a,r]=j(),s=a.get(o.URL_NAME)===o.VALUE,c=()=>{a.get(o.URL_NAME)?a.delete(o.URL_NAME):a.set(o.URL_NAME,o.VALUE),r(a)};return e.jsx("div",{"data-ismenuresize":s,className:"hidden md:flex w-full data-[ismenuresize=false]:justify-end justify-center",children:s?e.jsx(X,{className:"text-4xl fill-primary-100 dark:fill-zinc-100 cursor-pointer","data-control-arrow":"right",onClick:c}):e.jsx(Y,{className:"text-4xl fill-primary-100 dark:fill-zinc-100 cursor-pointer","data-control-arrow":"left",onClick:c})})};function le(){const[a]=j(),r=a.get(o.URL_NAME)===o.VALUE,s=a.get(b.url_name)===b.default_values.open;return e.jsx("div",{"data-isresizemenu":r,"data-isopenmobilemenu":s,className:"w-full md:w-[250px] fixed z-[999] md:relative md:data-[isresizemenu=true]:w-[70px] bg-primary-100 rounded-b-md md:rounded-none",children:e.jsxs("div",{"data-isopenmobilemenu":s,className:"flex flex-col min-h-screen py-4 md:py-0 data-[isopenmobilemenu='false']:hidden md:data-[isopenmobilemenu='false']:flex bg-gradient-to-b from-primary-100 via-light to-light dark:to-primary-300 dark:via-primary-300",children:[e.jsx($,{urlParamName:b.url_name,className:"md:hidden"}),e.jsx(J,{}),e.jsxs("nav",{className:"w-full h-full py-0 my-4 relative",children:[e.jsx(se,{}),e.jsx(te,{})]}),e.jsx(ne,{})]})})}export{le as default};
