import{r as n,M as j,C as _,j as e,I as C,a as h,B as N,l as f,u as y,P as x,_ as g,b,c as k,d as D,L as P}from"./index-FWBCWSa1.js";function M({modalName:a}){const{clearModal:o,setModalContent:c}=n.useContext(j),{client:l}=n.useContext(_),s=n.useRef(null),p=()=>{o(a)},i=async()=>{var u,d,m;const t=(d=(u=s.current)==null?void 0:u.querySelector("input"))==null?void 0:d.value,r=(m=s.current)==null?void 0:m.querySelector("button");if(f(r,!0),!!l){if(t&&(t.length===11||t.length===14||t.length===18)){const v=t.replaceAll(".","").replaceAll("/","").replaceAll("-","");await y(l.id,{cpf_cnpj:v})&&(c({componentName:"modal_success_save_cpf_cnpj",components:e.jsx(x,{componentName:"modal_success_save_cpf_cnpj",message:"Dado salvo com sucesso!"})}),o(a))}else c({componentName:"modal_failed_save_cpf_cnpj",components:e.jsx(x,{componentName:"modal_failed_save_cpf_cnpj",message:"Cpf ou cnpj inválido! Tente novamente",type:"WARNING"})});f(r,!1)}};return e.jsxs("div",{className:"bg-light dark:bg-dark rounded-md p-4 flex flex-col items-center",children:[e.jsx("h2",{className:"font-bold text-2xl text-orange-500",children:"AVISO"}),e.jsx("p",{className:"text-medium text-lg text-orange-700",children:"Você ainda não registrou seu cpf ou cnpj..."}),e.jsxs("p",{className:"text-center opacity-80 text-orange-700/90",children:["Para manter a segurança da sua conta,",e.jsx("br",{})," é necessário que você salve em nosso sistema seu cpf ou cnpj."]}),e.jsxs("div",{className:"w-full mt-8",ref:s,children:[e.jsx(C,{name:"cpf_cnpj",title:"Digite seu cpf ou cnpj",mask:h}),e.jsxs("div",{className:"w-full flex mt-8 justify-evenly items-center",children:[e.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:p,children:"Deixar para depois"}),e.jsx(N,{onClick:i,children:"Salvar"})]})]})]})}function I(a){const o=Number(new Date),c=Number(new Date(a)),s=(o-c)/(1e3*3600);return Math.floor(s)}const O=n.lazy(()=>g(()=>import("./MainPanelClient-wID3dRYU.js"),__vite__mapDeps([0,1,2,3]))),w=n.lazy(()=>g(()=>import("./NavigatePanelClient-hZkd7VT-.js"),__vite__mapDeps([4,1,2,3])));function E(){const{setClient:a,client:o}=n.useContext(_),{setModalContent:c}=n.useContext(j),l=n.useRef(null),s=b();return n.useEffect(()=>{(async()=>{var r;const p=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",!!p);const i=localStorage.getItem("token");if(!i)return;const t=await k(i);t?(!((r=t.client)!=null&&r.cpf_cnpj)&&I(t.client.created_at)>24&&c({componentName:"modal_save_cpf_cnpj",components:e.jsx(D,{children:e.jsx(M,{modalName:"modal_save_cpf_cnpj"})})}),a(t.client)):s("/login")})()},[]),e.jsx("div",{ref:l,className:"w-screen min-h-screen flex items-center text-primary-100 dark:text-light bg-light dark:bg-dark",children:o?e.jsxs("div",{className:"w-full h-full flex justify-start md:justify-center items-start",children:[e.jsx(w,{}),e.jsx(O,{})]}):e.jsx(P,{})})}const A=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{A as P,I as c};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MainPanelClient-wID3dRYU.js","assets/index-FWBCWSa1.js","assets/index-geQMxdk1.css","assets/messagesEventManager-mkubjA2u.js","assets/NavigatePanelClient-hZkd7VT-.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
