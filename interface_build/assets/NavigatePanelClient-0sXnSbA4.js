import{r as g,C as L,H as y,aG as o,j as e,aH as I,aF as S,M as z,T as N,aI as R,l as T,u as F,Z as D,aJ as k,P,W as q,aK as b,aL as V,aM as B,aN as O,aO as H,aP as G,aQ as W,aR as Z,aS as K,aT as J,aU as Q,aV as X,h as Y,aW as $}from"./index-kg8JQu1W.js";import{m as j}from"./messagesEventManager-nPTWdocl.js";function ee(){const{client:a}=g.useContext(L),r=g.useRef(null),[s]=y(),c=s.get(o.URL_NAME)===o.DEFAULT_VALUES.DEFAULT,f=async n=>{var d,l,i,m;const t=n.target.files;if(t.length&&t[0].size<4e6){const x=new FileReader;x.onload=v=>{var u,h,_,E,A,U,M;if(r.current){const C=r.current.querySelector("img");C&&((u=v.target)!=null&&u.result)&&(C.src=v.target.result.toString())}(h=r.current)==null||h.classList.add("flex"),(_=r.current)==null||_.classList.remove("hidden"),(A=(E=r.current)==null?void 0:E.querySelector("div#loading"))==null||A.classList.add("flex"),(M=(U=r.current)==null?void 0:U.querySelector("div#loading"))==null||M.classList.remove("hidden")},x.readAsDataURL(t[0]);const p=await I(t[0]);p!=null&&p.data&&a&&(await S({client_id:a==null?void 0:a.id,logo:p.data.url}),(l=(d=r.current)==null?void 0:d.querySelector("div#loading"))==null||l.classList.remove("flex"),(m=(i=r.current)==null?void 0:i.querySelector("div#loading"))==null||m.classList.add("hidden"))}};return e.jsx("div",{"data-ismenuresized":c,className:"w-[100px] h-[100px] md:w-[40px] md:h-[40px] md:data-[ismenuresized=true]:w-[80px] md:data-[ismenuresized=true]:h-[80px] rounded-full overflow-hidden cursor-pointer border-4 border-primary-100 dark:border-light",children:e.jsxs("label",{className:"w-full h-full relative cursor-pointer",ref:r,onChange:f,children:[e.jsx("input",{type:"file",className:"hidden",accept:".png, .jpg, .jpeg, .webp"}),e.jsx("img",{src:(a==null?void 0:a.logo)||"https://via.placeholder.com/100",alt:"",className:"w-full h-full object-contain"}),e.jsx("div",{id:"loading",className:"w-full h-full bg-zinc-800/50 absolute top-0 left-0 justify-center items-center hidden",children:e.jsx("div",{className:"w-[40px] h-[40px] border-2 border-t-primary-300 rounded-full animate-spin"})})]})})}function ae(){const{client:a}=g.useContext(L),{setModalContent:r}=g.useContext(z),s=g.useRef(null),c=({currentTarget:n})=>{var i,m;n.dataset.overlay=!1,n.style.display=!1;const t=(i=s.current)==null?void 0:i.querySelector("input"),d=s.current,l=(m=s.current)==null?void 0:m.querySelector("div[data-save]");t&&d&&l&&(d.classList.add("border"),t.classList.remove("disabled"),l.dataset.save=!0)},f=async()=>{var i,m,x;const n=(i=s.current)==null?void 0:i.querySelector("input"),t=s.current,d=(m=s.current)==null?void 0:m.querySelector("div[data-save]"),l=(x=s.current)==null?void 0:x.querySelector("div[data-overlay]");if(a){const p=n==null?void 0:n.value.split(" "),[v,u]=p||[];v&&u?(await S({client_id:a==null?void 0:a.id,fullname:n==null?void 0:n.value}),n&&t&&d&&(t.classList.remove("border"),n.classList.add("disabled"),d.dataset.save=!1,l.dataset.overlay=!0,n.blur())):r({componentName:"modal_error_name",components:e.jsx(T,{message:"Digite seu nome e sobrenome",type:"WARNING",componentName:"modal_error_name"})})}};return e.jsx(N,{tip:"2 cliques para editar seu nome",children:e.jsxs("div",{className:"w-full px-2 flex justify-center gap-2 items-center rounded-lg relative",ref:s,children:[e.jsx("div",{className:"w-full h-full absolute data-[overlay=false]:hidden",onDoubleClick:c,"data-testid":"test-display","data-overlay":!0}),e.jsx("input",{type:"text",className:"text-xl bg-transparent text-primary-100 dark:text-light text-center font-bold cursor-default whitespace-nowrap text-ellipsis overflow-hidden",onKeyDown:n=>n.code==="Enter"&&f(),defaultValue:a==null?void 0:a.fullname}),e.jsx("div",{"data-save":!1,onClick:f,className:"bg-light rounded-full justify-center items-center hidden data-[save=true]:flex",children:e.jsx(R,{className:"fill-green-500 text-2xl cursor-pointer","data-testid":"button-save"})})]})})}const se=({})=>{const{setModalContent:a,clearModal:r}=g.useContext(z),{client:s}=g.useContext(L),c=F(),[f]=y(),n=f.get(o.URL_NAME)===o.DEFAULT_VALUES.DEFAULT,t=()=>{function l(){localStorage.removeItem("token"),r("modal_confirm_exit_panel"),c("/login")}a({componentName:"modal_confirm_exit_panel",components:e.jsx(P,{children:e.jsx(q,{title:"Tem certeza que deseja sair do painel?",confirmFunction:l,cancelFuntion:()=>r("modal_confirm_exit_panel")})})})},d=()=>{c("/panel?tab=6")};return s&&e.jsx("div",{className:"w-full flex flex-col gap-2 justify-center items-center relative",children:e.jsxs("div",{className:"w-4/5 pb-2 flex flex-col justify-center items-center gap-2 border-b border-primary-100 dark:border-light/30",children:[e.jsxs("div",{className:"w-full flex justify-center gap-2 items-end",children:[e.jsx(N,{tip:"Edite seu perfil",children:e.jsx(D,{"data-ismenuresized":n,className:"text-2xl cursor-pointer hover:animate-spin md:data-[ismenuresized=false]:hidden fill-primary-100 dark:fill-light",onClick:d})}),e.jsx(ee,{}),e.jsx(N,{tip:"Sair do seu painel",children:e.jsx(k,{"data-ismenuresized":n,className:"text-2xl cursor-pointer -scale-x-100 fill-primary-100 dark:fill-light hover:fill-red-500 transition-colors duration-200 md:data-[ismenuresized=false]:hidden",onClick:t})})]}),e.jsxs("div",{"data-ismenuresized":n,className:"w-full flex flex-col md:data-[ismenuresized=false]:hidden",children:[e.jsx(ae,{}),e.jsx("h3",{"data-ismessages":j(s.plan_management).maxMessages,className:"flex gap-1 justify-center items-center text-primary-100 dark:text-light font-bold data-[ismessages='0']:hidden",children:j(s.plan_management).totalMessages+" / "+j(s.plan_management).maxMessages}),e.jsxs("h3",{"data-ismessages":j(s.plan_management).maxBonus,className:"flex gap-1 justify-center items-center bg-primary-300 p-1 rounded-lg border border-primary-100 text-primary-100 dark:text-light font-bold data-[ismessages='0']:hidden",children:["Bônus",e.jsx("span",{children:j(s.plan_management).reminingMessagesBonus+" / "+j(s.plan_management).maxBonus})]})]})]})})},w=[{tab:"my_chats",name:"Meus chats",Icon:B},{tab:"metrics",name:"Métricas",Icon:O},{tab:"database",name:"Fonte de dados",Icon:H},{tab:"records",name:"Registros",Icon:G,topics:[{tab:"conversations",name:"Conversas",Icon:W},{tab:"leads",name:"Leads",Icon:Z}]},{tab:"payment",name:"Assinatura",Icon:K},{tab:"help_center",name:"Central de ajuda",Icon:J}];function te(){const[a,r]=y(),s=g.useRef(null),c=a.get(o.URL_NAME)===o.DEFAULT_VALUES.DEFAULT,f=a.get(b.url_name)===b.default_values.open,n=t=>{var v;const d=t.currentTarget,l=d.dataset.tab,i=(v=s.current)==null?void 0:v.querySelectorAll("div[data-container='topic']");if(!l)return;const m=w.find(u=>u.tab===l);m!=null&&m.topics?x(l):(p(l),!(d.dataset.container==="sub_topic")&&x(l));function x(u){i==null||i.forEach(h=>{h.classList.remove("hidden"),h.classList.add("hidden")}),i==null||i.forEach(h=>{h.dataset.tab===u&&h.classList.toggle("hidden")})}function p(u){a.set("tab",u),f&&a.set(b.url_name,b.default_values.close),r(a)}};return e.jsx("ul",{ref:s,className:"w-full",children:w.map((t,d)=>{var l;return e.jsxs("li",{"data-tab":Number(a.get("tab"))==d,"data-ismenuresize":c,className:"w-full flex flex-col justify-center items-end cursor-pointer text-xl",children:[e.jsxs("div",{"data-tab":t.tab,"data-ismenuresize":c,className:"w-full p-2 pl-2 flex gap-2 items-center justify-between md:data-[ismenuresize=false]:justify-center group",onClick:n,children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(t.Icon,{className:"group-hover:fill-primary-100 text-primary-100 dark:text-light text-xl transition-colors duration-100"}),e.jsx("h2",{className:"md:group-data-[ismenuresize=false]:hidden group-hover:text-primary-100",children:t.name})]}),e.jsx(V,{"data-hastopic":!!((l=t==null?void 0:t.topics)!=null&&l.length),className:"md:group-data-[ismenuresize=false]:hidden data-[hastopic=false]:hidden self-center"})]}),e.jsx("div",{"data-container":"topic","data-tab":t.tab,className:"w-[90%] flex-col hidden",children:t.topics&&t.topics.map(i=>e.jsxs("div",{"data-container":"sub_topic","data-tab":i.tab,"data-ismenuresize":c,className:"w-full flex items-center gap-2 group md:data-[ismenuresize=false]:hidden",onClick:n,children:[e.jsx(i.Icon,{className:"group-hover:fill-primary-100 text-primary-100 dark:text-light text-base transition-colors duration-100"}),e.jsx("h2",{className:"text-base group-hover:text-primary-100",children:i.name})]},i.tab))})]},t.name)})})}const ne=()=>{const[a,r]=y(),s=a.get(o.URL_NAME)===o.DEFAULT_VALUES.DEFAULT,c=()=>{const f=a.get(o.URL_NAME);s||(a.append(o.URL_NAME,o.DEFAULT_VALUES.DEFAULT),r(a)),f===o.DEFAULT_VALUES.DEFAULT?a.set(o.URL_NAME,o.DEFAULT_VALUES.RESIZED):a.set(o.URL_NAME,o.DEFAULT_VALUES.DEFAULT),r(a)};return e.jsx("div",{"data-ismenuresize":s,className:"hidden md:flex w-full data-[ismenuresize=true]:justify-end justify-center",children:s?e.jsx(Q,{className:"text-4xl fill-primary-100 dark:fill-zinc-100 cursor-pointer","data-control-arrow":"left",onClick:c}):e.jsx(X,{className:"text-4xl fill-primary-100 dark:fill-zinc-100 cursor-pointer","data-control-arrow":"right",onClick:c})})};function le(){const[a]=y(),r=a.get(o.URL_NAME)===o.DEFAULT_VALUES.DEFAULT,s=a.get(b.url_name)===b.default_values.open;return e.jsx("div",{"data-isresizemenu":r,"data-isopenmobilemenu":s,className:"w-full md:w-[250px] fixed z-[999] md:relative md:data-[isresizemenu=false]:w-[70px] bg-primary-100 rounded-b-md md:rounded-none",children:e.jsxs("div",{"data-isopenmobilemenu":s,className:"flex flex-col min-h-screen py-4 md:py-0 data-[isopenmobilemenu='false']:hidden md:data-[isopenmobilemenu='false']:flex bg-gradient-to-b from-primary-100 via-light to-light dark:to-primary-300 dark:via-primary-300",children:[e.jsx(Y,{urlParamName:b.url_name,className:"md:hidden"}),e.jsx($,{}),e.jsxs("nav",{className:"w-full h-full py-0 my-4 relative",children:[e.jsx(se,{}),e.jsx(te,{})]}),e.jsx(ne,{})]})})}export{le as default};
