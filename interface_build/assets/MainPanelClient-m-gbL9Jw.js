import{j as t,B as I,b as H,A as G,r as N,C as M,M as T,F as ut,c as mt,d as ft,P as L,T as R,e as pt,f as ht,u as ue,g as xt,h as C,i as ze,t as gt,k as _t,l as $e,m as Nt,n as Pe,o as yt,p as jt,q as wt,s as bt,v as me,w as Ct,x as vt,y as Et,z as Y,D as St,R as g,E as At,G as J,H as Be,J as fe,K as Tt,L as It,N as Mt,O as kt,Q as Dt,S as Rt,U as Pt,V as Bt,W as Lt,X as Ft,Y as Ot,Z as Ut,$ as zt,a0 as qe,a1 as $t,a2 as qt,a3 as Ve,a4 as Vt,a5 as Ht,a6 as Gt,a7 as Jt,a8 as Kt,a9 as Qt,aa as Yt,ab as Wt,ac as Xt,ad as Zt,ae as ea,af as ta,ag as aa,ah as sa,ai as na,aj as oa,ak as ra,al as ia,am as la,an as ca,ao as da,ap as ve,aq as He,ar as ua,as as te,at as ma,au as fa,av as pa,aw as ha}from"./index-LGvbyJ8s.js";import{C as xa,m as ga}from"./messagesEventManager-B9LFt-uM.js";const _a=[{short:"Jan",complete:"Janeiro"},{short:"Fev",complete:"Fevereiro"},{short:"Mar",complete:"Março"},{short:"Abr",complete:"Abril"},{short:"Mai",complete:"Maio"},{short:"Jun",complete:"Junho"},{short:"Jul",complete:"Julho"},{short:"Ago",complete:"Agosto"},{short:"Set",complete:"Setembro"},{short:"Out",complete:"Outubro"},{short:"Nov",complete:"Novembro"},{short:"Dez",complete:"Dezembro"}];function K(e){const a=new Date(e);a.toLocaleTimeString("pt-BR",{hour12:!1});const s=a.getTimezoneOffset(),n=a.getMonth(),r=a.getUTCHours()-s/60,o=a.toLocaleDateString(),i=`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`,c=`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`,l=`${a.getDay()} de ${_a[n].short} - ${c}`;return{currentHour:r,fullDate:o,fullHour:i,shortHour:c,dateFormat_A:l,fullDateWithHour:`${o} - ${i}`}}function Na({notification:e}){return t.jsxs("div",{className:"flex flex-col justify-center items-center gap-4 min-w-[500px]",children:[t.jsx("h2",{className:"w-full text-2xl text-center font-bold",children:e.notification.title}),t.jsx("p",{dangerouslySetInnerHTML:{__html:e.notification.describe}}),t.jsx("div",{className:"flex p-4",children:!!Object.keys(e.notification.call_to_action).length&&t.jsx(I,{onClick:()=>window.open(e.notification.call_to_action.link),children:e.notification.call_to_action.text})})]})}async function ya(e){return await H.post(`${G}/notification/${e}/read`).catch(s=>console.log(s))}function ja(){const{client:e}=N.useContext(M),{setModalContent:a}=N.useContext(T),[s,n]=N.useState(),[r,o]=N.useState(),i=r==null?void 0:r.filter(l=>!l.read);N.useEffect(()=>{var d;const l=(d=e==null?void 0:e.notification_client)==null?void 0:d.sort((u,p)=>!u.read&&p.read?-1:u.read&&!p.read?1:0);o(l)},[]);const c=async l=>{const d=await ya(l.id);(d==null?void 0:d.status)===200&&(o(u=>{if(u){const p=u.filter(m=>m.id!==l.id),f=u.find(m=>m.id===l.id);if(f)return f.read=!0,p.push(f),p}}),a({componentName:"modal_display_notification",components:t.jsx(L,{children:t.jsx(Na,{notification:l})})}))};return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"bg-primary-100 rounded-full p-1",onClick:()=>n(l=>!l),children:[t.jsx("span",{"data-isnotification":!!(i!=null&&i.length),className:"w-[20px] h-[20px] data-[isnotification=false]:hidden flex justify-center items-center text-xs bg-red-800 border border-primary-300 rounded-full absolute -top-[10px] -right-[10px]",children:i==null?void 0:i.length}),t.jsx(ut,{className:"text-2xl fill-light cursor-pointer"})]}),t.jsxs("div",{"data-display":!!s,className:"data-[display=false]:hidden flex flex-col absolute z-50 rounded-md bg-primary-100 p-4 right-0 translate-x-[122px] my-2 min-w-[400px]",children:[t.jsxs("div",{className:"w-full flex justify-between items-center border-b border-white/30",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Notificações"}),t.jsx(I,{children:"Marcar todas como lida"})]}),t.jsx("div",{className:"w-full flex flex-col",children:r==null?void 0:r.map(l=>t.jsxs("div",{className:"flex gap-4 items-center min-h-[60px] border-b border-white/30 hover:bg-primary-200/50 transition-colors cursor-pointer",onClick:()=>c(l),children:[t.jsx("div",{className:"min-w-1/3",children:l.read?t.jsx(mt,{className:"text-2xl fill-zinc-300"}):t.jsx(ft,{className:"text-2xl fill-orange-400"})}),t.jsxs("div",{"data-isread":!!l.read,className:"flex flex-col data-[isread=true]:opacity-60",children:[t.jsx("h2",{className:"font-medium text-lg",children:l.notification.title}),t.jsxs("div",{className:"flex gap-2 items-end px-2",children:[t.jsx("p",{className:"w-2/3 line-clamp-1 opacity-90",children:l.notification.describe}),t.jsx("span",{className:"text-xs opacity-70",children:K(l.notification.created_at).dateFormat_A})]})]})]},l.id))})]})]})}function wa(){N.useEffect(()=>{const a=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",a)},[]);const e=()=>{const a=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",!a);const s=a?"light":"dark";localStorage.theme=s};return t.jsxs("div",{className:"flex gap-3 px-8",children:[t.jsx(R,{tip:"Notificações",position:"BOTTOM",children:t.jsx(ja,{})}),t.jsx(R,{tip:"Escolha entre thema light ou dark",position:"BOTTOM",children:t.jsxs("div",{className:"bg-primary-100 rounded-full p-1",onClick:e,children:[t.jsx(pt,{className:"text-2xl fill-light cursor-pointer hidden dark:block"}),t.jsx(ht,{className:"text-2xl fill-light cursor-pointer block dark:hidden"})]})})]})}function ba(){return t.jsx("header",{className:"w-full h-[8%] px-0 md:px-20 min-h-[70px] col-span-8 row-span-1 flex justify-end items-center",children:t.jsx(wa,{})})}function Ca({plan_management_id:e}){const{client:a}=N.useContext(M),{setModalContent:s,clearModal:n}=N.useContext(T),r=ue(),o=()=>{if(a!=null&&a.plan_management)if(a!=null&&a.plan_management.prompt.length){const i=Number(a.plan_management.plan.max_projects.default),c=a.plan_management.project.length;a.plan_management.status!=="DISABLED"?i>c?r(`/create-chat/${e}`):s({componentName:"modal_reached_max_plan",components:t.jsx(C,{message:"Você atingiu o número maximo de chats por plano.",componentName:"modal_reached_max_plan"})}):s({componentName:"modal_plan_is_desabled",components:t.jsx(C,{message:"O plano da sua conta está desabilitado.",componentName:"modal_plan_is_desabled",functionAfterComplete:()=>r("/panel?tab=4")})})}else s({componentName:"modal_create_database",components:t.jsx(L,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[t.jsxs("h2",{className:"text-xl text-center",children:["Para criar um novo chat, antes é necessário ",t.jsx("br",{}),"  criar uma fonte de dados."]}),t.jsxs("h2",{className:"text-lg text-center opacity-80",children:["Nossa inteligência artifical vai analisar seus dados e ",t.jsx("br",{})," responder as dúvidas do usuário ",t.jsx("br",{}),"conforme as informações passadas na fonte de dados."]}),t.jsxs(I,{customClass:"my-4",onClick:()=>{r("/panel?tab=2"),n("modal_create_database")},children:[t.jsx(ze,{}),"Criar fonte de dados"]})]})})});else s({componentName:"modal_without_plan",components:t.jsx(C,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan",functionAfterComplete:()=>r("/panel?tab=4")})})};return t.jsx("div",{onClick:o,className:"min-w-[250px] min-h-[250px] md:min-w-[200px] md:min-h-[220px] cursor-pointer flex justify-center items-center",children:t.jsx(R,{tip:"Crie um novo chat",children:t.jsx(xt,{className:"text-4xl text-primary-100"})})})}function Q({children:e,title:a,className:s}){return t.jsxs("div",{className:gt("w-full md:min-h-[70vh] flex flex-col gap-4 justify-start items-start bg-light dark:bg-dark rounded-xl border border-primary-100 dark:border-primary-300 relative ",s),children:[t.jsx("h2",{className:"w-full text-primary-100 dark:text-light text-2xl font-semibold uppercase p-4 px-8",children:a}),e]})}function se({children:e,title:a,text:s,position:n="BOTTOM",hidden:r}){const o=N.useRef(null),{client:i,setClient:c}=N.useContext(M),l=async()=>{if(i){const d=await $e(i.id,!1);c(d)}};return i&&t.jsxs("div",{className:"flex items-center relative group",children:[t.jsx("div",{"data-active":i.tutorial,"data-hidden":r,className:"data-[hidden=true]:hidden data-[active=false]:hidden w-screen h-screen backdrop-blur-sm fixed top-0 left-0 z-50"}),t.jsxs("div",{"data-active":i.tutorial,ref:o,"data-position":n,"data-hidden":r,className:`border border-light/40 bg-primary-100 p-1 rounded-xl absolute z-50 left-1/2 -translate-x-1/2 
                    data-[position=TOP]:-top-full data-[position=TOP]:-translate-y-full data-[position=BOTTOM]:-bottom-full data-[position=BOTTOM]:translate-y-full
                    text-center transition-opacity  data-[hidden=true]:hidden data-[active=false]:hidden`,children:[t.jsxs("div",{className:" bg-primary-100 rounded-md flex flex-col justify-center items-center px-4",children:[t.jsx("h2",{className:"text-center py-2 font-bold text-xl text-light",children:a}),t.jsx("p",{className:"w-[400px] px-4 text-center text-light text-lg",dangerouslySetInnerHTML:{__html:s}}),t.jsx("div",{className:"w-full flex justify-center mt-8 text-light text-base",children:t.jsx("span",{className:"underline opacity-70 cursor-pointer",onClick:l,children:"Pular tutorial"})})]}),t.jsx(_t,{"data-position":n,className:"border-light/40 fill-primary-100 absolute left-1/2 -translate-x-1/2 data-[position='BOTTOM']:top-0 data-[position='BOTTOM']:-translate-y-[78%] data-[position='BOTTOM']:rotate-180"})]}),t.jsx("div",{"data-hidden":r,className:"z-50 data-[hidden=true]:z-0",children:e})]})}var oe={},va=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ge={},P={};let Ie;const Ea=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];P.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17};P.getSymbolTotalCodewords=function(a){return Ea[a]};P.getBCHDigit=function(e){let a=0;for(;e!==0;)a++,e>>>=1;return a};P.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');Ie=a};P.isKanjiModeEnabled=function(){return typeof Ie<"u"};P.toSJIS=function(a){return Ie(a)};var pe={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function a(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,r){if(e.isValid(n))return n;try{return a(n)}catch{return r}}})(pe);function Je(){this.buffer=[],this.length=0}Je.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let s=0;s<a;s++)this.putBit((e>>>a-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var Sa=Je;function re(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}re.prototype.set=function(e,a,s,n){const r=e*this.size+a;this.data[r]=s,n&&(this.reservedBit[r]=!0)};re.prototype.get=function(e,a){return this.data[e*this.size+a]};re.prototype.xor=function(e,a,s){this.data[e*this.size+a]^=s};re.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]};var Aa=re,Ke={};(function(e){const a=P.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const r=Math.floor(n/7)+2,o=a(n),i=o===145?26:Math.ceil((o-13)/(2*r-2))*2,c=[o-7];for(let l=1;l<r-1;l++)c[l]=c[l-1]-i;return c.push(6),c.reverse()},e.getPositions=function(n){const r=[],o=e.getRowColCoords(n),i=o.length;for(let c=0;c<i;c++)for(let l=0;l<i;l++)c===0&&l===0||c===0&&l===i-1||c===i-1&&l===0||r.push([o[c],o[l]]);return r}})(Ke);var Qe={};const Ta=P.getSymbolSize,Le=7;Qe.getPositions=function(a){const s=Ta(a);return[[0,0],[s-Le,0],[0,s-Le]]};var Ye={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};e.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},e.from=function(r){return e.isValid(r)?parseInt(r,10):void 0},e.getPenaltyN1=function(r){const o=r.size;let i=0,c=0,l=0,d=null,u=null;for(let p=0;p<o;p++){c=l=0,d=u=null;for(let f=0;f<o;f++){let m=r.get(p,f);m===d?c++:(c>=5&&(i+=a.N1+(c-5)),d=m,c=1),m=r.get(f,p),m===u?l++:(l>=5&&(i+=a.N1+(l-5)),u=m,l=1)}c>=5&&(i+=a.N1+(c-5)),l>=5&&(i+=a.N1+(l-5))}return i},e.getPenaltyN2=function(r){const o=r.size;let i=0;for(let c=0;c<o-1;c++)for(let l=0;l<o-1;l++){const d=r.get(c,l)+r.get(c,l+1)+r.get(c+1,l)+r.get(c+1,l+1);(d===4||d===0)&&i++}return i*a.N2},e.getPenaltyN3=function(r){const o=r.size;let i=0,c=0,l=0;for(let d=0;d<o;d++){c=l=0;for(let u=0;u<o;u++)c=c<<1&2047|r.get(d,u),u>=10&&(c===1488||c===93)&&i++,l=l<<1&2047|r.get(u,d),u>=10&&(l===1488||l===93)&&i++}return i*a.N3},e.getPenaltyN4=function(r){let o=0;const i=r.data.length;for(let l=0;l<i;l++)o+=r.data[l];return Math.abs(Math.ceil(o*100/i/5)-10)*a.N4};function s(n,r,o){switch(n){case e.Patterns.PATTERN000:return(r+o)%2===0;case e.Patterns.PATTERN001:return r%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(r+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return r*o%2+r*o%3===0;case e.Patterns.PATTERN110:return(r*o%2+r*o%3)%2===0;case e.Patterns.PATTERN111:return(r*o%3+(r+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(r,o){const i=o.size;for(let c=0;c<i;c++)for(let l=0;l<i;l++)o.isReserved(l,c)||o.xor(l,c,s(r,l,c))},e.getBestMask=function(r,o){const i=Object.keys(e.Patterns).length;let c=0,l=1/0;for(let d=0;d<i;d++){o(d),e.applyMask(d,r);const u=e.getPenaltyN1(r)+e.getPenaltyN2(r)+e.getPenaltyN3(r)+e.getPenaltyN4(r);e.applyMask(d,r),u<l&&(l=u,c=d)}return c}})(Ye);var he={};const $=pe,ie=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],le=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];he.getBlocksCount=function(a,s){switch(s){case $.L:return ie[(a-1)*4+0];case $.M:return ie[(a-1)*4+1];case $.Q:return ie[(a-1)*4+2];case $.H:return ie[(a-1)*4+3];default:return}};he.getTotalCodewordsCount=function(a,s){switch(s){case $.L:return le[(a-1)*4+0];case $.M:return le[(a-1)*4+1];case $.Q:return le[(a-1)*4+2];case $.H:return le[(a-1)*4+3];default:return}};var We={},xe={};const ae=new Uint8Array(512),ce=new Uint8Array(256);(function(){let a=1;for(let s=0;s<255;s++)ae[s]=a,ce[a]=s,a<<=1,a&256&&(a^=285);for(let s=255;s<512;s++)ae[s]=ae[s-255]})();xe.log=function(a){if(a<1)throw new Error("log("+a+")");return ce[a]};xe.exp=function(a){return ae[a]};xe.mul=function(a,s){return a===0||s===0?0:ae[ce[a]+ce[s]]};(function(e){const a=xe;e.mul=function(n,r){const o=new Uint8Array(n.length+r.length-1);for(let i=0;i<n.length;i++)for(let c=0;c<r.length;c++)o[i+c]^=a.mul(n[i],r[c]);return o},e.mod=function(n,r){let o=new Uint8Array(n);for(;o.length-r.length>=0;){const i=o[0];for(let l=0;l<r.length;l++)o[l]^=a.mul(r[l],i);let c=0;for(;c<o.length&&o[c]===0;)c++;o=o.slice(c)}return o},e.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let o=0;o<n;o++)r=e.mul(r,new Uint8Array([1,a.exp(o)]));return r}})(We);const Xe=We;function Me(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Me.prototype.initialize=function(a){this.degree=a,this.genPoly=Xe.generateECPolynomial(this.degree)};Me.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(a.length+this.degree);s.set(a);const n=Xe.mod(s,this.genPoly),r=this.degree-n.length;if(r>0){const o=new Uint8Array(this.degree);return o.set(n,r),o}return n};var Ia=Me,Ze={},q={},ke={};ke.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40};var F={};const et="[0-9]+",Ma="[A-Z $%*+\\-./:]+";let ne="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ne=ne.replace(/u/g,"\\u");const ka="(?:(?![A-Z0-9 $%*+\\-./:]|"+ne+`)(?:.|[\r
]))+`;F.KANJI=new RegExp(ne,"g");F.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");F.BYTE=new RegExp(ka,"g");F.NUMERIC=new RegExp(et,"g");F.ALPHANUMERIC=new RegExp(Ma,"g");const Da=new RegExp("^"+ne+"$"),Ra=new RegExp("^"+et+"$"),Pa=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");F.testKanji=function(a){return Da.test(a)};F.testNumeric=function(a){return Ra.test(a)};F.testAlphanumeric=function(a){return Pa.test(a)};(function(e){const a=ke,s=F;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,i){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!a.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?o.ccBits[0]:i<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return s.testNumeric(o)?e.NUMERIC:s.testAlphanumeric(o)?e.ALPHANUMERIC:s.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function n(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+r)}}e.from=function(o,i){if(e.isValid(o))return o;try{return n(o)}catch{return i}}})(q);(function(e){const a=P,s=he,n=pe,r=q,o=ke,i=7973,c=a.getBCHDigit(i);function l(f,m,x){for(let _=1;_<=40;_++)if(m<=e.getCapacity(_,x,f))return _}function d(f,m){return r.getCharCountIndicator(f,m)+4}function u(f,m){let x=0;return f.forEach(function(_){const v=d(_.mode,m);x+=v+_.getBitsLength()}),x}function p(f,m){for(let x=1;x<=40;x++)if(u(f,x)<=e.getCapacity(x,m,r.MIXED))return x}e.from=function(m,x){return o.isValid(m)?parseInt(m,10):x},e.getCapacity=function(m,x,_){if(!o.isValid(m))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=r.BYTE);const v=a.getSymbolTotalCodewords(m),y=s.getTotalCodewordsCount(m,x),b=(v-y)*8;if(_===r.MIXED)return b;const j=b-d(_,m);switch(_){case r.NUMERIC:return Math.floor(j/10*3);case r.ALPHANUMERIC:return Math.floor(j/11*2);case r.KANJI:return Math.floor(j/13);case r.BYTE:default:return Math.floor(j/8)}},e.getBestVersionForData=function(m,x){let _;const v=n.from(x,n.M);if(Array.isArray(m)){if(m.length>1)return p(m,v);if(m.length===0)return 1;_=m[0]}else _=m;return l(_.mode,_.getLength(),v)},e.getEncodedBits=function(m){if(!o.isValid(m)||m<7)throw new Error("Invalid QR Code version");let x=m<<12;for(;a.getBCHDigit(x)-c>=0;)x^=i<<a.getBCHDigit(x)-c;return m<<12|x}})(Ze);var tt={};const Ee=P,at=1335,Ba=21522,Fe=Ee.getBCHDigit(at);tt.getEncodedBits=function(a,s){const n=a.bit<<3|s;let r=n<<10;for(;Ee.getBCHDigit(r)-Fe>=0;)r^=at<<Ee.getBCHDigit(r)-Fe;return(n<<10|r)^Ba};var st={};const La=q;function W(e){this.mode=La.NUMERIC,this.data=e.toString()}W.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)};W.prototype.getLength=function(){return this.data.length};W.prototype.getBitsLength=function(){return W.getBitsLength(this.data.length)};W.prototype.write=function(a){let s,n,r;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),r=parseInt(n,10),a.put(r,10);const o=this.data.length-s;o>0&&(n=this.data.substr(s),r=parseInt(n,10),a.put(r,o*3+1))};var Fa=W;const Oa=q,_e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function X(e){this.mode=Oa.ALPHANUMERIC,this.data=e}X.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)};X.prototype.getLength=function(){return this.data.length};X.prototype.getBitsLength=function(){return X.getBitsLength(this.data.length)};X.prototype.write=function(a){let s;for(s=0;s+2<=this.data.length;s+=2){let n=_e.indexOf(this.data[s])*45;n+=_e.indexOf(this.data[s+1]),a.put(n,11)}this.data.length%2&&a.put(_e.indexOf(this.data[s]),6)};var Ua=X,za=function(a){for(var s=[],n=a.length,r=0;r<n;r++){var o=a.charCodeAt(r);if(o>=55296&&o<=56319&&n>r+1){var i=a.charCodeAt(r+1);i>=56320&&i<=57343&&(o=(o-55296)*1024+i-56320+65536,r+=1)}if(o<128){s.push(o);continue}if(o<2048){s.push(o>>6|192),s.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){s.push(o>>12|224),s.push(o>>6&63|128),s.push(o&63|128);continue}if(o>=65536&&o<=1114111){s.push(o>>18|240),s.push(o>>12&63|128),s.push(o>>6&63|128),s.push(o&63|128);continue}s.push(239,191,189)}return new Uint8Array(s).buffer};const $a=za,qa=q;function Z(e){this.mode=qa.BYTE,typeof e=="string"&&(e=$a(e)),this.data=new Uint8Array(e)}Z.getBitsLength=function(a){return a*8};Z.prototype.getLength=function(){return this.data.length};Z.prototype.getBitsLength=function(){return Z.getBitsLength(this.data.length)};Z.prototype.write=function(e){for(let a=0,s=this.data.length;a<s;a++)e.put(this.data[a],8)};var Va=Z;const Ha=q,Ga=P;function ee(e){this.mode=Ha.KANJI,this.data=e}ee.getBitsLength=function(a){return a*13};ee.prototype.getLength=function(){return this.data.length};ee.prototype.getBitsLength=function(){return ee.getBitsLength(this.data.length)};ee.prototype.write=function(e){let a;for(a=0;a<this.data.length;a++){let s=Ga.toSJIS(this.data[a]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var Ja=ee,nt={exports:{}};(function(e){var a={single_source_shortest_paths:function(s,n,r){var o={},i={};i[n]=0;var c=a.PriorityQueue.make();c.push(n,0);for(var l,d,u,p,f,m,x,_,v;!c.empty();){l=c.pop(),d=l.value,p=l.cost,f=s[d]||{};for(u in f)f.hasOwnProperty(u)&&(m=f[u],x=p+m,_=i[u],v=typeof i[u]>"u",(v||_>x)&&(i[u]=x,c.push(u,x),o[u]=d))}if(typeof r<"u"&&typeof i[r]>"u"){var y=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(y)}return o},extract_shortest_path_from_predecessor_list:function(s,n){for(var r=[],o=n;o;)r.push(o),s[o],o=s[o];return r.reverse(),r},find_path:function(s,n,r){var o=a.single_source_shortest_paths(s,n,r);return a.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(s){var n=a.PriorityQueue,r={},o;s=s||{};for(o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.queue=[],r.sorter=s.sorter||n.default_sorter,r},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var r={value:s,cost:n};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=a})(nt);var Ka=nt.exports;(function(e){const a=q,s=Fa,n=Ua,r=Va,o=Ja,i=F,c=P,l=Ka;function d(y){return unescape(encodeURIComponent(y)).length}function u(y,b,j){const h=[];let w;for(;(w=y.exec(j))!==null;)h.push({data:w[0],index:w.index,mode:b,length:w[0].length});return h}function p(y){const b=u(i.NUMERIC,a.NUMERIC,y),j=u(i.ALPHANUMERIC,a.ALPHANUMERIC,y);let h,w;return c.isKanjiModeEnabled()?(h=u(i.BYTE,a.BYTE,y),w=u(i.KANJI,a.KANJI,y)):(h=u(i.BYTE_KANJI,a.BYTE,y),w=[]),b.concat(j,h,w).sort(function(S,A){return S.index-A.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function f(y,b){switch(b){case a.NUMERIC:return s.getBitsLength(y);case a.ALPHANUMERIC:return n.getBitsLength(y);case a.KANJI:return o.getBitsLength(y);case a.BYTE:return r.getBitsLength(y)}}function m(y){return y.reduce(function(b,j){const h=b.length-1>=0?b[b.length-1]:null;return h&&h.mode===j.mode?(b[b.length-1].data+=j.data,b):(b.push(j),b)},[])}function x(y){const b=[];for(let j=0;j<y.length;j++){const h=y[j];switch(h.mode){case a.NUMERIC:b.push([h,{data:h.data,mode:a.ALPHANUMERIC,length:h.length},{data:h.data,mode:a.BYTE,length:h.length}]);break;case a.ALPHANUMERIC:b.push([h,{data:h.data,mode:a.BYTE,length:h.length}]);break;case a.KANJI:b.push([h,{data:h.data,mode:a.BYTE,length:d(h.data)}]);break;case a.BYTE:b.push([{data:h.data,mode:a.BYTE,length:d(h.data)}])}}return b}function _(y,b){const j={},h={start:{}};let w=["start"];for(let E=0;E<y.length;E++){const S=y[E],A=[];for(let D=0;D<S.length;D++){const k=S[D],U=""+E+D;A.push(U),j[U]={node:k,lastCount:0},h[U]={};for(let V=0;V<w.length;V++){const O=w[V];j[O]&&j[O].node.mode===k.mode?(h[O][U]=f(j[O].lastCount+k.length,k.mode)-f(j[O].lastCount,k.mode),j[O].lastCount+=k.length):(j[O]&&(j[O].lastCount=k.length),h[O][U]=f(k.length,k.mode)+4+a.getCharCountIndicator(k.mode,b))}}w=A}for(let E=0;E<w.length;E++)h[w[E]].end=0;return{map:h,table:j}}function v(y,b){let j;const h=a.getBestModeForData(y);if(j=a.from(b,h),j!==a.BYTE&&j.bit<h.bit)throw new Error('"'+y+'" cannot be encoded with mode '+a.toString(j)+`.
 Suggested mode is: `+a.toString(h));switch(j===a.KANJI&&!c.isKanjiModeEnabled()&&(j=a.BYTE),j){case a.NUMERIC:return new s(y);case a.ALPHANUMERIC:return new n(y);case a.KANJI:return new o(y);case a.BYTE:return new r(y)}}e.fromArray=function(b){return b.reduce(function(j,h){return typeof h=="string"?j.push(v(h,null)):h.data&&j.push(v(h.data,h.mode)),j},[])},e.fromString=function(b,j){const h=p(b,c.isKanjiModeEnabled()),w=x(h),E=_(w,j),S=l.find_path(E.map,"start","end"),A=[];for(let D=1;D<S.length-1;D++)A.push(E.table[S[D]].node);return e.fromArray(m(A))},e.rawSplit=function(b){return e.fromArray(p(b,c.isKanjiModeEnabled()))}})(st);const ge=P,Ne=pe,Qa=Sa,Ya=Aa,Wa=Ke,Xa=Qe,Se=Ye,Ae=he,Za=Ia,de=Ze,es=tt,ts=q,ye=st;function as(e,a){const s=e.size,n=Xa.getPositions(a);for(let r=0;r<n.length;r++){const o=n[r][0],i=n[r][1];for(let c=-1;c<=7;c++)if(!(o+c<=-1||s<=o+c))for(let l=-1;l<=7;l++)i+l<=-1||s<=i+l||(c>=0&&c<=6&&(l===0||l===6)||l>=0&&l<=6&&(c===0||c===6)||c>=2&&c<=4&&l>=2&&l<=4?e.set(o+c,i+l,!0,!0):e.set(o+c,i+l,!1,!0))}}function ss(e){const a=e.size;for(let s=8;s<a-8;s++){const n=s%2===0;e.set(s,6,n,!0),e.set(6,s,n,!0)}}function ns(e,a){const s=Wa.getPositions(a);for(let n=0;n<s.length;n++){const r=s[n][0],o=s[n][1];for(let i=-2;i<=2;i++)for(let c=-2;c<=2;c++)i===-2||i===2||c===-2||c===2||i===0&&c===0?e.set(r+i,o+c,!0,!0):e.set(r+i,o+c,!1,!0)}}function os(e,a){const s=e.size,n=de.getEncodedBits(a);let r,o,i;for(let c=0;c<18;c++)r=Math.floor(c/3),o=c%3+s-8-3,i=(n>>c&1)===1,e.set(r,o,i,!0),e.set(o,r,i,!0)}function je(e,a,s){const n=e.size,r=es.getEncodedBits(a,s);let o,i;for(o=0;o<15;o++)i=(r>>o&1)===1,o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(n-15+o,8,i,!0),o<8?e.set(8,n-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(n-8,8,1,!0)}function rs(e,a){const s=e.size;let n=-1,r=s-1,o=7,i=0;for(let c=s-1;c>0;c-=2)for(c===6&&c--;;){for(let l=0;l<2;l++)if(!e.isReserved(r,c-l)){let d=!1;i<a.length&&(d=(a[i]>>>o&1)===1),e.set(r,c-l,d),o--,o===-1&&(i++,o=7)}if(r+=n,r<0||s<=r){r-=n,n=-n;break}}}function is(e,a,s){const n=new Qa;s.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),ts.getCharCountIndicator(l.mode,e)),l.write(n)});const r=ge.getSymbolTotalCodewords(e),o=Ae.getTotalCodewordsCount(e,a),i=(r-o)*8;for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const c=(i-n.getLengthInBits())/8;for(let l=0;l<c;l++)n.put(l%2?17:236,8);return ls(n,e,a)}function ls(e,a,s){const n=ge.getSymbolTotalCodewords(a),r=Ae.getTotalCodewordsCount(a,s),o=n-r,i=Ae.getBlocksCount(a,s),c=n%i,l=i-c,d=Math.floor(n/i),u=Math.floor(o/i),p=u+1,f=d-u,m=new Za(f);let x=0;const _=new Array(i),v=new Array(i);let y=0;const b=new Uint8Array(e.buffer);for(let S=0;S<i;S++){const A=S<l?u:p;_[S]=b.slice(x,x+A),v[S]=m.encode(_[S]),x+=A,y=Math.max(y,A)}const j=new Uint8Array(n);let h=0,w,E;for(w=0;w<y;w++)for(E=0;E<i;E++)w<_[E].length&&(j[h++]=_[E][w]);for(w=0;w<f;w++)for(E=0;E<i;E++)j[h++]=v[E][w];return j}function cs(e,a,s,n){let r;if(Array.isArray(e))r=ye.fromArray(e);else if(typeof e=="string"){let d=a;if(!d){const u=ye.rawSplit(e);d=de.getBestVersionForData(u,s)}r=ye.fromString(e,d||40)}else throw new Error("Invalid data");const o=de.getBestVersionForData(r,s);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!a)a=o;else if(a<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const i=is(a,s,r),c=ge.getSymbolSize(a),l=new Ya(c);return as(l,a),ss(l),ns(l,a),je(l,s,0),a>=7&&os(l,a),rs(l,i),isNaN(n)&&(n=Se.getBestMask(l,je.bind(null,l,s))),Se.applyMask(n,l),je(l,s,n),{modules:l,version:a,errorCorrectionLevel:s,maskPattern:n,segments:r}}Ge.create=function(a,s){if(typeof a>"u"||a==="")throw new Error("No input text");let n=Ne.M,r,o;return typeof s<"u"&&(n=Ne.from(s.errorCorrectionLevel,Ne.M),r=de.from(s.version),o=Se.from(s.maskPattern),s.toSJISFunc&&ge.setToSJISFunction(s.toSJISFunc)),cs(a,r,n,o)};var ot={},De={};(function(e){function a(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const r=parseInt(n.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:o,scale:o?4:i,margin:r,color:{dark:a(n.color.dark||"#000000ff"),light:a(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,r){return r.width&&r.width>=n+r.margin*2?r.width/(n+r.margin*2):r.scale},e.getImageWidth=function(n,r){const o=e.getScale(n,r);return Math.floor((n+r.margin*2)*o)},e.qrToImageData=function(n,r,o){const i=r.modules.size,c=r.modules.data,l=e.getScale(i,o),d=Math.floor((i+o.margin*2)*l),u=o.margin*l,p=[o.color.light,o.color.dark];for(let f=0;f<d;f++)for(let m=0;m<d;m++){let x=(f*d+m)*4,_=o.color.light;if(f>=u&&m>=u&&f<d-u&&m<d-u){const v=Math.floor((f-u)/l),y=Math.floor((m-u)/l);_=p[c[v*i+y]?1:0]}n[x++]=_.r,n[x++]=_.g,n[x++]=_.b,n[x]=_.a}}})(De);(function(e){const a=De;function s(r,o,i){r.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=i,o.width=i,o.style.height=i+"px",o.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,i,c){let l=c,d=i;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),i||(d=n()),l=a.getOptions(l);const u=a.getImageWidth(o.modules.size,l),p=d.getContext("2d"),f=p.createImageData(u,u);return a.qrToImageData(f.data,o,l),s(p,d,u),p.putImageData(f,0,0),d},e.renderToDataURL=function(o,i,c){let l=c;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),l||(l={});const d=e.render(o,i,l),u=l.type||"image/png",p=l.rendererOpts||{};return d.toDataURL(u,p.quality)}})(ot);var rt={};const ds=De;function Oe(e,a){const s=e.a/255,n=a+'="'+e.hex+'"';return s<1?n+" "+a+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function we(e,a,s){let n=e+a;return typeof s<"u"&&(n+=" "+s),n}function us(e,a,s){let n="",r=0,o=!1,i=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%a),d=Math.floor(c/a);!l&&!o&&(o=!0),e[c]?(i++,c>0&&l>0&&e[c-1]||(n+=o?we("M",l+s,.5+d+s):we("m",r,0),r=0,o=!1),l+1<a&&e[c+1]||(n+=we("h",i),i=0)):r++}return n}rt.render=function(a,s,n){const r=ds.getOptions(s),o=a.modules.size,i=a.modules.data,c=o+r.margin*2,l=r.color.light.a?"<path "+Oe(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+Oe(r.color.dark,"stroke")+' d="'+us(i,o,r.margin)+'"/>',u='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+d+`</svg>
`;return typeof n=="function"&&n(null,f),f};const ms=va,Te=Ge,it=ot,fs=rt;function Re(e,a,s,n,r){const o=[].slice.call(arguments,1),i=o.length,c=typeof o[i-1]=="function";if(!c&&!ms())throw new Error("Callback required as last argument");if(c){if(i<2)throw new Error("Too few arguments provided");i===2?(r=s,s=a,a=n=void 0):i===3&&(a.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=s,s=a,a=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(s=a,a=n=void 0):i===2&&!a.getContext&&(n=s,s=a,a=void 0),new Promise(function(l,d){try{const u=Te.create(s,n);l(e(u,a,n))}catch(u){d(u)}})}try{const l=Te.create(s,n);r(null,e(l,a,n))}catch(l){r(l)}}oe.create=Te.create;oe.toCanvas=Re.bind(null,it.render);oe.toDataURL=Re.bind(null,it.renderToDataURL);oe.toString=Re.bind(null,function(e,a,s){return fs.render(e,s)});function ps({text:e,width:a}){const s=N.useRef(null),n=localStorage.theme==="dark"?"#000":"#7672f2",r=localStorage.theme==="dark"?"#7672f2":"#fff";N.useEffect(()=>{s.current&&oe.toCanvas(s.current,e,{width:a,margin:1,color:{dark:n,light:r}},function(i){i&&console.error(i)})},[e,a]);const o=()=>{if(s.current){const i=s.current.toDataURL("image/png").replace("image/png","image/octet-stream"),c=document.createElement("a");c.download="qrcode.png",c.href=i,c.click()}};return t.jsxs("div",{className:"w-full flex justify-center",children:[t.jsx("div",{className:"w-4/5 flex justify-center",children:t.jsx("canvas",{ref:s})}),t.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:t.jsx(R,{tip:"Baixar imagem",children:t.jsx(Nt,{onClick:o,className:" text-2xl cursor-pointer"})})})]})}function hs({slug:e}){const{setModalContent:a,clearModal:s}=N.useContext(T),n=N.useRef(null),r=N.useRef(null),o=()=>{s(null,{clearAll:!0}),window.open(`https://chat.wipzee.com/${e}`)},i=()=>{try{const d=n.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var l=document.execCommand("copy");l&&a({componentName:"modal_copy_link",components:t.jsx(C,{message:"Link Copiado!",type:"INFORMATION",componentName:"modal_copy_link"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{a({componentName:"modal_failed_copy_link",components:t.jsx(C,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_link"})})}},c=()=>{try{const d=r.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var l=document.execCommand("copy");l&&a({componentName:"modal_copy_widget",components:t.jsx(C,{message:"Widget Copiado!",type:"INFORMATION",componentName:"modal_copy_widget"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{a({componentName:"modal_failed_copy_widget",components:t.jsx(C,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_widget"})})}};return t.jsxs("div",{className:"w-full flex flex-col gap-8",children:[t.jsxs("div",{className:"w-full flex flex-col gap-2",children:[t.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Link do seu chat"}),t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx("input",{ref:n,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`https://chat.wipzee.com/${e}`}),t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx(R,{tip:"Copie seu link",children:t.jsx(Pe,{onClick:i,className:" text-2xl cursor-pointer"})}),t.jsx(se,{title:"Vamos abrir seu chat",text:"Clique no icone acima para abrir seu chat em uma nova guia para testa-lo",children:t.jsx(R,{tip:"Abra seu chat",children:t.jsx(yt,{onClick:o,className:" text-xl cursor-pointer"})})})]})]}),t.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Esse será o link que você enviará aos usuários que irão acessar seu chat."})]}),t.jsxs("div",{className:"w-full flex flex-col gap-2",children:[t.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Código do Widget"}),t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx("input",{ref:r,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`<script src="https://widget.wipzee.com/${e}" defer><\/script>`}),t.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:t.jsx(Pe,{onClick:c,className:" text-2xl cursor-pointer"})})]}),t.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Copie e cole esse código no head do html do seu site."})]}),t.jsxs("div",{className:"w-full flex flex-col gap-2",children:[t.jsx("h2",{className:"w-4/5 text-center uppercase",children:"QR CODE"}),t.jsx(ps,{width:200,text:`https://chat.wipzee.com/${e}`}),t.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Use esse QR CODE para acessar seu site facilmente"})]})]})}const xs=e=>e.errors!=null,gs=(e,a)=>{const s={};for(;e.length;){const n=e[0],{code:r,message:o,path:i}=n,c=i.join(".");if(!s[c])if("unionErrors"in n){const l=n.unionErrors[0].errors[0];s[c]={message:l.message,type:l.code}}else s[c]={message:o,type:r};if("unionErrors"in n&&n.unionErrors.forEach(l=>l.errors.forEach(d=>e.push(d))),a){const l=s[c].types,d=l&&l[n.code];s[c]=bt(c,a,s,r,d?[].concat(d,n.message):n.message)}e.shift()}return s},lt=(e,a,s={})=>async(n,r,o)=>{try{const i=await e[s.mode==="sync"?"parse":"parseAsync"](n,a);return o.shouldUseNativeValidation&&jt({},o),{errors:{},values:s.raw?n:i}}catch(i){if(xs(i))return{values:{},errors:wt(gs(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}};function _s(){const{watch:e}=me(),[a,s]=N.useState();return N.useEffect(()=>{const n=e("step_4.slug");s(n.replaceAll(" ","-"))},[e()]),t.jsxs("div",{className:"w-full flex gap-2 items-center bg-white p-2 my-4 rounded-md",children:[t.jsx(Ct,{className:"fill-zinc-600"}),t.jsx(vt,{className:"fill-zinc-600"}),t.jsx(Et,{className:"fill-zinc-600"}),t.jsxs("div",{className:"w-full bg-zinc-600 rounded-xl p-3 flex gap-2 items-center",children:[t.jsx(Y,{className:"fill-green-600"}),t.jsxs("h2",{className:"opacity-80",children:["https://chat.wipzee.com/",a]})]})]})}function Ns(){const{control:e}=me(),{fields:a,remove:s,append:n}=St({control:e,name:"step_0.social_proof"});return t.jsxs(g.Container,{className:"overflow-auto h-[400px]",children:[t.jsxs(g.Container,{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex flex-col text-center",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Adicione avaliações dos seus clientes:"}),t.jsx("span",{className:"text-sm opacity-70",children:"(Essas avaliações estarão visível na bio do chat)"})]}),t.jsxs(I,{type:"button",onClick:()=>n({}),children:["Adicionar ",t.jsx(ze,{})]})]}),t.jsx(g.Container,{className:"px-4 overflow-auto h-[300px] my-2",children:a.map((r,o)=>t.jsxs(g.Container,{className:"w-full flex flex-col gap-4 my-2 p-2 rounded-lg border border-primary-100 relative",children:[t.jsx(At,{className:"absolute -top-3 -right-3 bg-red-800/50 fill-red-500 cursor-pointer rounded-full p-1 text-2xl",onClick:()=>s(o)}),t.jsxs(g.Container,{className:"w-full flex justify-start items-center gap-4",children:[t.jsx(g.File,{name:`step_0.social_proof.${o}.avatar`,sizeContainer:"50px"}),t.jsx(g.Input,{title:"Nome do cliente",name:`step_0.social_proof.${o}.person_name`}),t.jsx(g.Input,{type:"number",title:"Nota da avaliação",name:`step_0.social_proof.${o}.rating`,min:0,max:5})]}),t.jsx(g.TextArea,{name:`step_0.social_proof.${o}.text`,title:"Oque o cliente achou do produto?"}),t.jsxs(g.Container,{className:"flex gap-4 justify-start",children:[t.jsx(g.File,{name:`step_0.social_proof.${o}.images.0`,sizeContainer:"50px"}),t.jsx(g.File,{name:`step_0.social_proof.${o}.images.1`,sizeContainer:"50px"}),t.jsx(g.File,{name:`step_0.social_proof.${o}.images.2`,sizeContainer:"50px"})]})]},r.id))})]})}function ys({project:e,setProjects:a}){var _,v,y,b,j;const{setModalContent:s,clearModal:n}=N.useContext(T),{setClient:r,client:o}=N.useContext(M),[i,c]=N.useState(),[l,d]=J(),u=Number(l.get(Be))||0,p=fe({resolver:lt(Tt),defaultValues:{step_0:{project_name:e.project_name,chat_input_message:e.chat_input_message,logo:e.logo,bio:e.bio,social_proof:e.social_proof},step_1:{prompt_id:e.prompt.id,call_to_action:e.call_to_action},step_2:{facebook_pixel:e.pixel_facebook},step_3:{chat_appearance:{chat_icon:(_=e.chat_appearance)==null?void 0:_.chat_icon,icon_text:(v=e.chat_appearance)==null?void 0:v.icon_text,primary_color:(y=e.chat_appearance)==null?void 0:y.primary_color,second_color:(b=e.chat_appearance)==null?void 0:b.second_color,background:(j=e.chat_appearance)==null?void 0:j.background}},step_4:{slug:e.slug}}});N.useEffect(()=>{(async()=>{l.set(It,(e.call_to_action.length-1).toString()),d(l);const h=await Mt(e.plan_management_id);(h==null?void 0:h.status)===200&&c(h.data.prompt)})()},[]);const f=async h=>{var E,S;let w={};if(Object.keys(h).forEach(A=>{const D=h[A];Object.keys(D).forEach(k=>{w[k]=h[A][k]})}),w&&e.slug){if((E=h.step_4)!=null&&E.slug&&((S=h.step_4)==null?void 0:S.slug)!==e.slug&&!await Rt(h.step_4.slug)){s({componentName:"modal_error_slug",components:t.jsx(C,{componentName:"modal_error_slug",message:"A slug escolhida não está disponível!",type:"WARNING"})});return}w.chat_appearance.can_update=e.chat_appearance.can_update,w.chat_appearance.id=e.chat_appearance.id;const A=await Pt(w,e.slug);A&&A.status===200&&(a(D=>{const k=D.findIndex(V=>V.id===e.id),U=D.filter(V=>V.id!==e.id);return w.is_online=A.data.is_online,w.plan_management_id=A.data.plan_management_id,w.id=A.data.id,w.prompt=A.data.prompt,w.chat_appearance=A.data.chat_appearance,U.splice(k,0,w),U}),s({componentName:"modal_chat_updated",components:t.jsx(C,{message:"Chat atualizado com sucesso",componentName:"modal_chat_updated",functionAfterComplete:()=>n("modal_edit_project")})}))}};async function m(){const h=async()=>{if(e.id){const w=await Bt(e.id);if(w&&w.status===200){a(S=>S.filter(A=>A.id!==e.id));const E=o==null?void 0:o.plan_management.project.findIndex(S=>S.id===e.id);o&&E&&(o.plan_management.project.splice(E,1),r(o)),s({componentName:"modal_delete_success",components:t.jsx(C,{message:"Chat excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>n(null,{clearAll:!0})})})}}};s({componentName:"modal_confirm_delete_chat",components:t.jsx(L,{children:t.jsx(xa,{title:"Tem certeza que deseja deletar esse chat?",subTitle:"Uma vez removido, não pode ser revertido.",confirmFunction:h,cancelFuntion:()=>n("modal_confirm_delete_chat")})})})}const x=h=>{l.set(Be,h.toString()),d(l),p.unregister("step_3.chat_appearance.chat_icon"),p.register("step_3.chat_appearance.chat_icon",{value:h})};return!!(i!=null&&i.length)&&t.jsx("div",{className:"w-[90vw] h-[80vh] min-h-[450px] min-w-[700px] flex overflow-hidden",children:t.jsxs(g.EditForm,{form:p,onDelete:m,onSubmit:f,activeSimulator:!0,children:[t.jsxs(g.EditStep,{index:0,titleStep:"Informações do chat",children:[t.jsxs(g.Container,{className:"flex justify-start items-center gap-6",children:[t.jsx(g.File,{name:"step_0.logo",sizeContainer:"80px"}),t.jsx(g.Input,{name:"step_0.project_name",title:"Escreva o nome do seu chat"})]}),t.jsx(g.TextArea,{name:"step_0.bio",title:"Escreva uma descrição para seu chat"}),t.jsx(Ns,{})]}),t.jsxs(g.EditStep,{index:1,titleStep:"Configurações do chat",children:[t.jsx(g.Select,{name:"step_1.prompt_id",options:i.map(h=>Object({value:h.id,text:h.prompt_name})),title:"Selecione sua fonte de dados"}),t.jsx(g.TextArea,{name:"step_1.chat_input_message.0",title:"Digite a primeira mensagem do seu chat"}),t.jsx(kt,{prompts:i})]}),t.jsx(g.EditStep,{index:2,titleStep:"Aparência do chat",children:t.jsxs(g.Container,{className:"flex flex-col gap-8",children:[t.jsxs("div",{className:"flex flex-col justify-center gap-4",children:[t.jsx("h2",{className:"text-center text-xl",children:"Escolha um icone para seu chat"}),t.jsx("div",{className:"flex justify-center gap-8 text-5xl",children:Dt.map(({Icon:h,id:w},E)=>t.jsx(h,{"data-iscurrent":u-1===E,className:"hover:bg-primary-100 data-[iscurrent=true]:bg-primary-100 cursor-pointer rounded-full p-2",onClick:()=>x(w)},w))})]}),t.jsx(g.Input,{name:"step_3.chat_appearance.icon_text",title:"Digite o texto que será exibido ao lado do icon"}),t.jsxs(g.Container,{className:"flex",children:[t.jsx(g.Color,{name:"step_3.chat_appearance.primary_color",title:"Escolha a cor primária do seu chat"}),t.jsx(g.Color,{name:"step_3.chat_appearance.second_color",title:"Escolha a cor secundária do seu chat"})]}),t.jsx(g.Color,{name:"step_3.chat_appearance.background",title:"Escolha a cor do background do seu chat"})]})}),t.jsx(g.EditStep,{index:3,titleStep:"Configuração avançadas",children:t.jsxs(g.Container,{className:"flex flex-col",children:[t.jsx(g.Input,{name:"step_4.slug",title:"Altere a slug do seu chat"}),t.jsx(_s,{}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium uppercase",children:"Lembre-se"}),t.jsx("span",{className:"opacity-70",children:"Ao trocar a slug do seu chat, todos seus clientes que possuirem a URL antiga, podem perder acesso ao seu site utilizando a antiga URL."})]})]})})]})})}function js({project:e,setNewProject:a,prompts:s}){const{client:n,setClient:r}=N.useContext(M),{setModalContent:o}=N.useContext(T),i=ue(),[c,l]=J(),d=async()=>{if(c.get("tour")==="2"&&(c.set("tour","0"),l(c),n)){const m=await $e(n.id,!1);r(m)}o({componentName:"modal_edit_project",components:t.jsx(L,{children:t.jsx(ys,{setProjects:a,project:e,prompts:s})})})},u=async(m,x)=>{if(!x)return o({componentName:"modal_failed_updated_status_chat",components:t.jsx(C,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat",type:"WARNING"})}),!1;const _=await Ut(m,x);return(_==null?void 0:_.status)===200?(a(v=>(v.find(y=>y.id===_.data.id).is_online=_.data.is_online,v)),!0):(o({componentName:"modal_failed_updated_status_chat_02",components:t.jsx(C,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat_02",type:"WARNING"})}),!1)},p=()=>{if(c.set("tour","2"),l(c),!e.slug){o({componentName:"modal_failed_display_link",components:t.jsx(C,{message:"Falha ao exibir seus links",type:"ERROR",componentName:"modal_failed_display_link"})});return}o({componentName:"modal_display_share_project",components:t.jsx(L,{children:t.jsx(hs,{slug:e.slug})})})},f=({target:m})=>{m.dataset.metric&&i("/panel?tab=1")};return e&&t.jsxs("div",{className:"w-1/4 min-w-[250px] min-h-[250px] md:min-w-[200px] md:min-h-[220px] bg-primary-100 dark:bg-gray text-light relative flex flex-col items-center gap-2 cursor-pointer rounded-xl",onClick:f,"data-metric":!0,children:[t.jsxs("div",{className:"w-full flex justify-between items-center gap-2 p-2",children:[t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsx(se,{title:"Vamos acessar seu chat",text:"Clique aqui em cima para obter seu link ou para pegar o código do widget",hidden:c.get("tour")==="2"||c.get("tour")==="0",children:t.jsx(R,{tip:"Veja todos os seus links",children:t.jsx(Lt,{className:" text-xl",onClick:p})})}),t.jsx(se,{title:"Vamos personalizar seu chat",text:"Agora que já viu como funciona, vamos conhecer como podemos deixar ele de acordo com a sua marca!",hidden:c.get("tour")!=="2",children:t.jsx(R,{tip:"Edite seu chat",children:t.jsx(Ft,{className:"text-xl",onClick:d})})})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(R,{tip:"Ative ou desative seu chat",children:t.jsx(Ot,{isActive:e.is_online,template:"onOff",cb:m=>u(m,e.slug)})})})]}),t.jsx("div",{className:"w-[150px] h-[110px] rounded-xl overflow-hidden","data-metric":!0,children:t.jsx("img",{src:e.logo||"https://via.placeholder.com/100",alt:"imagem do projeto",className:"w-full h-full object-cover"})}),t.jsx("h2",{className:"text-center py-4 font-bold text-lg","data-metric":!0,children:e.project_name})]},e.slug)}function ws(){const{client:e}=N.useContext(M),{setModalContent:a}=N.useContext(T),[s,n]=N.useState(e!=null&&e.plan_management?e.plan_management.project:[]),r=Array(zt).fill(0),o=()=>[a({componentName:"modal_locked_chat",components:t.jsx(C,{componentName:"modal_locked_chat",message:"Esse slot não está disponível, crie seu chat em um slot disponível ou contrate um plano com mais slot disponível.",type:"WARNING"})})];return e&&t.jsx(Q,{title:"Meus chats",children:t.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 gap-8",children:r.map((i,c)=>{var l,d,u;return(l=e.plan_management)!=null&&l.plan&&c<Number(e.plan_management.plan.max_projects.default)?t.jsx("div",{className:"flex justify-center items-center rounded-xl cursor-pointer border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-light dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20 z-50",children:t.jsx("div",{className:"w-full flex flex-col gap-4",children:t.jsx("div",{className:"w-full flex items-center gap-4",children:(d=s[c])!=null&&d.id?s.map(p=>{var f;return t.jsx(js,{project:p,setNewProject:n,prompts:(f=e.plan_management)==null?void 0:f.prompt},p.id)}):t.jsx(se,{title:"Vamos criar seu primeiro chat",text:'Clique em <span class="text-3xl font-medium mx-1">+</span> para criar seu primeiro chat de forma simples e fácil',position:"BOTTOM",hidden:s.length!==0,children:t.jsx(Ca,{plan_management_id:(u=e==null?void 0:e.plan_management)==null?void 0:u.id})})})})},c):t.jsx("div",{className:"min-w-[250px] min-h-[250px] md:min-w-[200px] md:min-h-[220px] flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",onClick:o,children:t.jsx(Y,{className:"py-3 text-5xl"})},c)})})})}function bs({setColumns:e,columns:a,modalName:s}){const{clearModal:n}=N.useContext(T),[r,o]=N.useState(a),i=l=>{const d=l.currentTarget.dataset.status=="true",u=l.currentTarget.dataset.name;o(()=>[...a.filter((p,f)=>(f>1&&p.columnName===u&&(p.status=!d),p))])},c=()=>{localStorage.setItem("metricColumnActive",JSON.stringify(a)),e(a),n(s)};return t.jsxs("div",{className:"w-1/2 max-w-[400px] bg-zinc-800 text-light",children:[t.jsx("h2",{className:"w-full text-center text-xl p-4",children:"Organize suas columns"}),t.jsx("div",{className:"w-full flex gap-2 flex-col",children:r.map((l,d)=>t.jsxs("div",{className:"w-full flex justify-between px-4",children:[t.jsx("p",{children:l.columnName}),t.jsx("div",{className:"w-[30px] h-[20px] bg-zinc-100 flex overflow-hidden rounded-full cursor-pointer",style:{justifyContent:`${l.status?"end":"start"}`},onClick:i,"data-status":l.status,"data-name":l.columnName,children:t.jsx("div",{className:"w-2/3 h-full rounded-xl flex justify-center items-center",style:{background:`${l.status?"green":"red"}`},children:d<2&&t.jsx(Y,{className:"w-[8px]"})})})]},l.columnName))}),t.jsx("div",{className:"w-full flex mt-12 justify-center",children:t.jsx(I,{onClick:c,children:"Salvar"})})]})}function ct({typeFilter:e}){const[a,s]=J(),n=({target:r})=>{const o=K(new Date).currentHour,i=r,{value:c}=r.options[i.selectedIndex];var l=0;switch(c){case"today":l=o;break;case"yesterday":l=o+24;break;case"last_7_days":l=o+6*24;break;case"last_14_days":l=o+13*24;break;case"last_month":l=o+29*24;break;case"last_3_month":l=o+89*24;break;case"last_6_month":l=o+179*24;break;case"last_year":l=o+364*24;break;default:l=0;break}const d=new URLSearchParams(a);d.set(e,l.toString()),s(d)};return t.jsx(qe,{handleSelectDatabase:n,Icon:$t,title:"Todas as datas",options:[{id:"today",name:"Hoje"},{id:"yesterday",name:"Ontem"},{id:"last_7_days",name:"Ultimos 7 dias"},{id:"last_14_days",name:"Ultimos 14 dias"},{id:"last_month",name:"Ultimo mês"},{id:"last_3_month",name:"Ultimos 3 meses"},{id:"last_6_month",name:"Ultimos 6 meses"},{id:"last_year",name:"Ultimo ano"}]})}function z(e){const a=Number(new Date),s=Number(new Date(e)),r=(a-s)/(1e3*3600);return Math.floor(r)}function B(e,a=0){function s(){return e.metric.chat_event.reduce((f,m)=>{const x=m.open_chat.filter(_=>{const v=z(_.created_at);return a>0?v<=a:!0});return f+x.length},0)}function n(){return(e.metric.chat_event.filter(m=>{const x=z(m.created_at);return a>0?x<=a:!0})||[]).filter((m,x,_)=>x===_.findIndex(v=>v.guest_id===m.guest_id)).length}function r(){return e.plan_message_manager.filter(f=>{const m=z(f.created_at);return a>0?m<=a:!0},0).reduce((f,m)=>f+m.input,0)}function o(){return e.plan_message_manager.filter(f=>{const m=z(f.created_at);return a>0?m<=a:!0},0).reduce((f,m)=>f+m.output,0)}function i(){const p=r()+o(),f=n()>0?p/n():0;return f%1===0?f:Number(f.toFixed(1))}function c(){const p=e.metric.chat_event.reduce((v,y)=>{const b=y.chat_time.filter(j=>{const h=z(j.created_at);return a>0?h<=a:!0});return v+b.reduce((j,h)=>{if(!h.closed_at&&!h.created_at)return 0;const w=Number(new Date(h.closed_at))-Number(new Date(h.created_at));return j+w},0)},0),f=Math.floor(p/1e3),m=Math.floor(f/60);return`${Math.floor(m/60).toString().padStart(2,"0")}:${(m%60).toString().padStart(2,"0")}:${(f%60).toString().padStart(2,"0")}`}function l(){const p=e.metric.chat_event.reduce((y,b)=>{const j=b.chat_time.filter(h=>{const w=z(h.created_at);return a>0?w<=a:!0});return y+j.reduce((h,w)=>{if(!w.closed_at&&!w.created_at)return 0;const E=Number(new Date(w.closed_at))-Number(new Date(w.created_at));return h+E},0)},0),f=p>0?p/n():0,m=Math.floor(f/1e3),x=Math.floor(m/60),_=Math.floor(x/60),v=`${_.toString().padStart(2,"0")}:${(x%60).toString().padStart(2,"0")}:${(m%60).toString().padStart(2,"0")}`;return _!==1/0?v:"00:00:00"}function d(){return e.metric.button_event.filter(f=>{const m=z(f);return a>0?m<=a:!0},0).reduce((f,m)=>f+m.clicked_button.length,0)}function u(){return K(e.created_at).dateFormat_A}return{IS_ONLINE:e.is_online||!1,NAME:e.project_name,CAT:s(),CAU:n(),MESSAGE_INPUT:r(),MESSAGE_OUTPUT:o(),MESSAGES_TOTAL:r()+o(),MEDIA_MESSAGES_CHAT:i(),USAGE_TIME:c(),MEDIA_USAGE_TIME:l(),CREATED_AT:u(),LINK_CLICKS:d(),LEADS_COLLECTED:0,SERVICE_NOTE:0,RESOLUTION_RATE:0,TOKEN_INPUT:"0",TOKEN_OUTPUT:"0",TOKEN_TOTAL:"0",USED_REAL:"0"}}async function Cs(e){return await H.post(`${G}/analyze_metric`,{prompt:e}).catch(s=>console.log(s))}function vs(e){const a=e.split("");let s="";return a.forEach(n=>{n.includes(`
`)&&s.length||n.includes(":")?s+=n+"<br />":s+=n}),s}async function Es(e,a){const s=await H.post(`${G}/metric_analysis/create`,{plan_management_id:e,result:a});if(s.data.error)throw new Error("Unable to create the Metric Analysis.");return s}async function Ss({feedback:e,metrics_analysis_rating:a,metric_analysis_id:s}){const n=await H.post(`${G}/metric_analysis/create_feedback`,{feedback:e,metrics_analysis_rating:a,metric_analysis_id:s});if(n.data.error)throw new Error("Unable to create the Feedback Metric Analysis.");return n}async function As(e){const a=await H.get(`${G}/metric_analysis/${e}`);if(a.status===400)throw new Error("Unable to create the Feedback Metric Analysis.");return a}function Ts({index:e,spanReview:a,metric_analysis_id:s}){const n=N.useRef(null),{setModalContent:r,clearModal:o}=N.useContext(T),i=async()=>{var l;const c=(l=n.current)==null?void 0:l.value;c&&s?(await Ss({feedback:c,metrics_analysis_rating:e,metric_analysis_id:s})).data.response&&r({componentName:"modal_send_success",components:t.jsx(C,{componentName:"modal_send_success",message:"Feedback enviado com sucesso. Obrigado!",functionAfterComplete:()=>o(null,{clearLast:!0})})}):r({componentName:"modal_error_send_feedback",components:t.jsx(C,{componentName:"modal_error_send_feedback",message:"Você precisa deixar um feedback antes de enviar sua avaliação ou houve um erro no envio do feedback!",type:"ERROR"})})};return t.jsxs("div",{className:"w-[300px] flex flex-col items-center gap-2",children:[t.jsxs("h2",{className:"text-center font-bold text-lg",children:['Sua avaliação foi "',a,'".']}),t.jsx("p",{className:"text-center opacity-80",children:"Gostaria de deixar um feedback em algo poderia melhorar?"}),t.jsx("textarea",{ref:n}),t.jsx(I,{customClass:"my-4",onClick:i,children:"Enviar"})]})}var Ue=`
 A wipzee é uma empresa que fornece um chatbot com inteligencia artificial, promovendo uma experiência completa ao usuário.
 Desda personalização do chat até o consumo de dados (Métricas), abaixo será informado as minhas métricas, quero que você faça uma analise
 completa e sugira melhorias ou me de feedbacks positivos sobre as métricas.

 exemplo 1: se tiver muitos chats abertos e nenhum clique no link, significa que o cliente não está sendo influenciado a clicar no link. Sugestão: "Mudar o texto do link e deixar mais atrativo ou melhorar sua fonte de dados."
 exemplo 2: se tiver muitos chats abertos e nenhuma ou poucas mensagens, significa que o cliente não está sentindo avontade de conversar com a IA ou não está conseguindo conversar com ela. SOLUÇÃO: Melhorar a primeira mensagem do chat ou ver se existe algum problema tecnico nas trocas de mengens."
`;function Is(){const{clearModal:e,setModalContent:a}=N.useContext(T),{client:s}=N.useContext(M),[n,r]=N.useState(),o=N.useRef(null);N.useEffect(()=>{(async()=>{if(s){const d=(await As(s.plan_management.id)).data.response,u=s.plan_management.plan.max_analyze_metric.default,p=s.plan_management.plan.max_analyze_metric.bonus,f=Number(u+p);d.length?r({status:"APRROVED",analysis:d}):f>0&&d.length<=f?i():a({componentName:"modal_limit_analysis",components:t.jsx(C,{componentName:"modal_limit_analysis",message:"O limite de analises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.",functionAfterComplete:()=>e(null,{clearAll:!0})})})}})()},[]);const i=()=>{if(n&&s&&(n==null?void 0:n.analysis.length)>=Number(s.plan_management.plan.max_analyze_metric.default)){a({componentName:"modal_max_limit_analysis",components:t.jsx(C,{componentName:"modal_max_limit_analysis",message:"O limite de análises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.",type:"WARNING"})});return}if(r(null),!s)throw new Error("Client is missing!");const l=s.plan_management.project,d=K(new Date).currentHour;l&&l.forEach(u=>{Ue+=`
                    NOME DO CHAT: ${u.project_name}
                    
                    MÉTRICAS:

                    Chats abertos total:
                    (Essa métrica pode tanto ser tanto varios usuários abrindo um chat ou como pode ser o mesmo usuário abrindo ele varias vezes)
                    [1000]

                    Chats abertos:
                    (Essa métrica conta quantas vezes o usuário abriu o chat, caso o usuário abra o mesmo chat 2 vezes ou mais, será contabilizado apenas uma vez)
                    [1]

                    Quando o chat foi criado:  
                    (Essa métrica registra quando o chat foi criado)
                    [${B(u,d).CREATED_AT}]

                    chat está ativado ou desativado:  
                    (Informa se o chat está ativado ou não: true = ativado e false = desativado)
                    [${B(u,d).IS_ONLINE}]

                    Leads coletados:  
                    (Informa quantos usuários deixaram um contato salvo no sistema)
                    [${B(u,d).LEADS_COLLECTED}]

                    Cliques no link:  
                    (Informa quantos cliques no link(call to action) foi dado no chat)
                    [100]

                    Média de mensagens:  
                    (Informa qual a média de mensagens por chat)
                    [${B(u,d).MEDIA_MESSAGES_CHAT}]

                    Média de tempo de uso:  
                    (Informa qual a média que o usuário ficou interagindo no chat)
                    [${B(u,d).MEDIA_USAGE_TIME}]

                    Total de Mensagens:  
                    (Informa qual o total de mensagens que esse chat tem)
                    [${B(u,d).MESSAGES_TOTAL}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${B(u,d).MESSAGE_INPUT}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${B(u,d).MESSAGE_OUTPUT}]

                    Saída de Mensagens:  
                    (Informa quantas mensagens nossa inteligencia artificial já mandou para esse chat)
                    [${B(u,d).MESSAGE_OUTPUT}]

                    tempo de uso:  
                    (Informa quanto tempo esse chat já ficou aberto)
                    [${B(u,d).USAGE_TIME}]`}),(async()=>{const u=await Cs(Ue);if((u==null?void 0:u.status)===200&&u.data){const{text:p}=u.data.choices[0],f=await Es(s==null?void 0:s.plan_management.id,p);r({status:"APRROVED",analysis:f.data.response})}else a({componentName:"modal_error_analyze_metric",components:t.jsx(C,{componentName:"modal_error_analyze_metric",message:"Não foi possível analisar suas métricas, por favor tente mais tarde.",type:"ERROR"})})})()},c=l=>{var d,u;if(n!=null&&n.analysis[0].feedback)a({componentName:"modal_error_analysis_metric",components:t.jsx(C,{componentName:"modal_error_analysis_metric",message:"Essa análise já foi avaliada!",type:"WARNING"})});else{const p=l.currentTarget.tabIndex,f=((d=l.currentTarget.querySelector("span"))==null?void 0:d.textContent)||"Regular",m=(u=o.current)==null?void 0:u.querySelectorAll("div > svg");m==null||m.forEach(x=>x.classList.remove("fill-primary-100")),m==null||m.forEach((x,_)=>_+1<=p&&x.classList.add("fill-primary-100")),a({componentName:"modal_show_feedback_analyze",components:t.jsx(L,{children:t.jsx(Ts,{index:p,spanReview:f,metric_analysis_id:n==null?void 0:n.analysis[0].id})})})}};return n?t.jsxs("div",{className:"max-w-[500px] flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Relatório da análise"}),t.jsxs("span",{className:"opacity-70",children:[n.analysis.length,"/",Number(s==null?void 0:s.plan_management.plan.max_analyze_metric.default)," Análises restantes de hoje"]})]}),t.jsx("div",{className:"max-h-[300px] overflow-auto border border-primary-100 p-2",children:t.jsx("p",{dangerouslySetInnerHTML:{__html:vs(n.analysis[0].result)},className:"text-center"})}),t.jsxs("div",{className:"flex flex-col w-full items-center my-4",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Avalie essa análise:"}),t.jsx("div",{className:"flex gap-2",ref:o,children:Array.from({length:5}).map((l,d)=>t.jsxs("div",{tabIndex:d+1,onClick:c,className:"group flex flex-col justify-center items-center",children:[t.jsx(qt,{"data-isselected":d+1<=n.analysis[0].metrics_analysis_rating,className:"cursor-pointer text-3xl hover:fill-primary-100 data-[isselected=true]:fill-primary-100"}),t.jsx("span",{className:"group-hover:opacity-100 opacity-0",children:d===0?"horrível":d===1?"ruim":d===2?"regular":d===3?"boa":"excelente"})]},d))})]}),t.jsxs("div",{className:"flex gap-8 justify-center items-center",children:[t.jsx("span",{onClick:()=>e(null,{clearLast:!0}),className:"underline opacity-80 my-4 cursor-pointer",children:"Fechar análise"}),t.jsx(I,{onClick:i,children:"Nova análise"})]})]}):t.jsx("div",{className:"flex flex-col items-center gap-4","data-loading":!0,children:t.jsx("h2",{children:"Analisando métricas"})})}function Ms({client:e,handleRequestDataProject:a,setColumns:s,columns:n}){const{setModalContent:r}=N.useContext(T),o=async({currentTarget:l})=>{if(e!=null&&e.plan_management){const d=l.querySelector("svg");d.classList.add("rotate-[-360deg]","transition-transform","duration-1000"),a(e==null?void 0:e.id);const u=setTimeout(()=>{d.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(u)},1e3)}},i=()=>{r({componentName:"modal_organization_column",components:t.jsx(bs,{modalName:"modal_organization_column",setColumns:s,columns:n})})},c=()=>{r({componentName:"modal_show_analyze_metric",components:t.jsx(L,{children:t.jsx(Is,{})})})};return t.jsxs("div",{className:"w-[70vw] flex gap-8 justify-end items-center",children:[t.jsx("div",{className:"p-2 bg-light dark:bg-dark border border-primary-100 rounded-md cursor-pointer",onClick:o,children:t.jsx(Ve,{className:"text-xl fill-primary-100 dark:fill-light"})}),t.jsx("div",{className:"h-[40px]",children:t.jsx(ct,{typeFilter:"filter_time_metric"})}),t.jsxs(I,{onClick:i,customClass:"bg-light dark:bg-dark text-primary-100 dark:text-light border border-primary-100 px-4",children:[" ",t.jsx(Vt,{className:"text-xl fill-primary-100 dark:fill-light"})," Organize as colunas"]}),t.jsxs(I,{customClass:"bg-primary-100 border border-primary-100 px-4",onClick:c,children:[" ",t.jsx(Ht,{className:"text-xl"})," Analisar métricas com IA"]})]})}const be=[{key:"IS_ONLINE",columnName:"Status",status:!0,dataType:"boolean"},{key:"NAME",columnName:"Nome do chat",status:!0,dataType:"string"},{key:"CAT",columnName:"Chats abertos (total)",status:!0,dataType:"number"},{key:"CAU",columnName:"Chats abertos (unico)",status:!1,dataType:"number"},{key:"MESSAGE_INPUT",columnName:"Mensagens de entrada",status:!1,dataType:"number"},{key:"MESSAGE_OUTPUT",columnName:"Mensagens de saída",status:!1,dataType:"number"},{key:"MESSAGES_TOTAL",columnName:"Mensagens total",status:!0,dataType:"number"},{key:"MEDIA_MESSAGES_CHAT",columnName:"Mensagens por chat",status:!1,dataType:"number"},{key:"USAGE_TIME",columnName:"Tempo de uso",status:!1,dataType:"string"},{key:"MEDIA_USAGE_TIME",columnName:"Tempo de uso por chat",status:!0,dataType:"string"},{key:"LINK_CLICKS",columnName:"Cliques no link",status:!0,dataType:"number"},{key:"LEADS_COLLECTED",columnName:"Leads coletados",status:!0,dataType:"number"},{key:"SERVICE_NOTE",columnName:"Nota de atendimento",status:!0,dataType:"number"},{key:"RESOLUTION_RATE",columnName:"Taxa de resolução",status:!0,dataType:"number"},{key:"CREATED_AT",columnName:"Criado em",status:!0,dataType:"string"}];function ks({setColumns:e,columns:a}){return N.useEffect(()=>{const s=JSON.parse(localStorage.getItem("metricColumnActive")||"[]");s.length>0?s.length!==be.length?localStorage.setItem("metricColumnActive",JSON.stringify(be)):e(s):localStorage.setItem("metricColumnActive",JSON.stringify(be))},[]),a&&t.jsx("div",{className:"w-1/2 flex",children:a.map(s=>s.status&&t.jsx("span",{className:"flex-none p-3 text-sm font-bold uppercase text-center bg-primary-100 dark:bg-primary-300 text-light dark:text-primary-100 border-r border-r-light dark:border-r-primary-100",children:s.columnName},s.columnName))})}function Ds({columns:e,setColumns:a,planManagement:s}){const[n]=J(),r=n.get("filter_time_metric");return t.jsxs("div",{className:"w-[70vw] h-[40vh] self-center rounded-xl overflow-x-auto",children:[t.jsx(ks,{setColumns:a,columns:e}),t.jsx("div",{className:"flex flex-col",children:s!=null&&s.project?s.project.map(o=>t.jsx("div",{className:"flex-none flex",children:e.map((i,c)=>i.status&&t.jsx("span",{className:"w-48 flex-none text-ellipsis overflow-hidden whitespace-nowrap text-center border border-primary-100/30 p-2",children:c===0?t.jsxs("div",{className:"w-full flex justify-center items-center gap-2",children:[t.jsx("div",{className:`w-[8px] h-[8px] ${o.is_online?"bg-green-700":"bg-red-700"} rounded-full`}),t.jsx("span",{children:o.is_online?"Ativo":"Desativado"})]}):c===1?o.project_name:B(o,r)[i.key]},i.columnName))},o.id)):t.jsx("h2",{className:"text-center p-4",children:'Você ainda não criou nenhum chat, clique em "Meus chats" , depois criar "Novo chat".'})}),t.jsx("div",{className:"flex-none flex ",children:e.map((o,i)=>o.status&&t.jsx("div",{className:"w-48 flex-none p-2 flex justify-center items-center gap-2",children:i===1?t.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:"TOTAL"}):o.dataType==="number"?t.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:s==null?void 0:s.project.reduce((c,l)=>c+Number(B(l,r)[o.key]),0)}):t.jsx("span",{className:"w-full text-primary-100 text-xl text-center",children:"-"})},o.key))})]})}function Rs(){const e=JSON.parse(localStorage.getItem("metricColumnActive")||"[]"),{setModalContent:a}=N.useContext(T),{client:s}=N.useContext(M),[n,r]=N.useState(e),[o,i]=N.useState(s==null?void 0:s.plan_management);N.useEffect(()=>{s!=null&&s.plan_management&&c(s==null?void 0:s.id)},[]);const c=async l=>{const d=await Gt(l);(d==null?void 0:d.status)===200?i(d.data.plan_management):a({componentName:"modal_failed_load_metric",components:t.jsx(C,{message:"Falha ao recarregar as métricas, tente reiniciar a página.",type:"ERROR",componentName:"modal_failed_load_metric"})})};return t.jsx("div",{className:"w-full h-full overflow-y-auto flex flex-col gap-8",children:t.jsxs(Q,{title:"Métricas",className:"flex-col items-center gap-8",children:[t.jsx(Ms,{client:s,columns:n,handleRequestDataProject:c,setColumns:r}),t.jsx(Ds,{columns:n,planManagement:o,setColumns:r})]})})}function Ps({plan_management_id:e}){const{client:a}=N.useContext(M),{setModalContent:s}=N.useContext(T),n=ue(),r=()=>{if(a!=null&&a.plan_management){const o=Number(a.plan_management.plan.max_databases.default),i=a.plan_management.prompt.length;a.plan_management.status!=="DISABLED"?o>i?n(`/create-database/${e}`):s({componentName:"modal_max_database",components:t.jsx(C,{message:"Você atingiu o número maximo de base de dados no seu plano.",componentName:"modal_max_database"})}):s({componentName:"modal_desactive_account",components:t.jsx(C,{message:"O plano da sua conta está desabilitado.",componentName:"modal_desactive_account"})})}else s({componentName:"modal_without_plan",components:t.jsx(C,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan"})})};return t.jsx(Jt,{className:"w-[300px] text-5xl py-3 fill-primary-100",onClick:r})}function Bs({prompt:e,setPrompts:a}){const{setModalContent:s,clearModal:n}=N.useContext(T),{client:r,setClient:o}=N.useContext(M),i=JSON.parse(e.prompt_query||"{}"),c=!!Object.keys(i).length,l=fe({resolver:lt(ea),defaultValues:c?{step_0:{products:i.step_0.products||""},step_1:{payment_methods:i.step_1.payment_methods||"",order_tracking:i.step_1.order_tracking||"",tracking_link:i.step_1.tracking_link||""},step_2:{days_of_warranty:i.step_2.days_of_warranty||0,how_exchanges_work_and_returns:i.step_2.how_exchanges_work_and_returns||"",how_guarantee_work:i.step_2.how_guarantee_work||""},step_3:{address:i.step_3.address||"",company_name:i.step_3.company_name||"",contact_email:i.step_3.contact_email||"",contact_phone_number:i.step_3.contact_phone_number||"",support_hours:i.step_3.support_hours||""},step_4:{client_describe:i.step_4.client_describe||"",ia_name:i.step_4.ia_name||"",restrictions:i.step_4.restrictions}}:void 0}),d=async p=>{const f=JSON.stringify(p),m=ta(p),x={prompt_name:e.prompt_name,prompt:m,prompt_query:f,client_describe:p.step_4.client_describe};if(x){const _=await aa(x,e.id);_&&_.status===200&&(a(v=>[...v.filter(y=>y.id!==_.data.id),_.data]),s({componentName:"modal_updated_database",components:t.jsx(C,{message:"Database atualizado com sucesso",componentName:"modal_updated_database",functionAfterComplete:()=>n(null,{clearAll:!0})})}))}};async function u(){if(e.id){const p=await sa(e.id);if((p==null?void 0:p.status)===200){a(m=>m.filter(x=>x.id!==p.data.id));const f=r==null?void 0:r.plan_management.prompt.findIndex(m=>m.id===e.id);r&&f&&(r.plan_management.prompt.splice(f,1),o(r)),s({componentName:"modal_delete_success",components:t.jsx(C,{message:"Fonte de dados excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>n(null,{clearAll:!0})})})}else(p==null?void 0:p.status)===500?s({componentName:"modal_failed_delete_database",components:t.jsx(C,{message:"Você não pode excluir uma fonte de dados que possui um chat vinculado a ela, tente excluir todos os chats primeiro, antes de excluir essa fonte de dados.",type:"ERROR",componentName:"modal_failed_delete_database"})}):s({componentName:"modal_failed_delete",components:t.jsx(C,{message:"Falha ao tentar excluir essa fonte de dados. Tente reiniciar a página e tentar de novo.",type:"ERROR",componentName:"modal_failed_delete"})})}}return t.jsx("div",{className:"w-[80vw] h-[70vh] flex overflow-auto  ",children:t.jsxs(g.EditForm,{form:l,onDelete:u,onSubmit:d,children:[t.jsx(g.EditStep,{index:0,titleStep:"Informações do produto",icon:t.jsx(Kt,{}),children:t.jsx(Qt,{})}),t.jsxs(g.EditStep,{index:1,titleStep:"Métodos de pagamento",icon:t.jsx(Yt,{}),children:[t.jsx(g.Container,{className:"flex gap-4",title:"Quais são os métodos de pagamentos aceitos?",children:t.jsx(g.Select,{title:"Escolha seus métodos de pagamentos",isMultiple:!0,name:"step_1.payment_methods",options:[{value:"Pix",text:"Pix"},{value:"Boleto",text:"Boleto"},{value:"Cartão de débito",text:"Cartão de débito"},{value:"Cartão de crédito",text:"Cartão de crédito"},{value:"Pagamentos em aplicativo",text:"Pagamentos em aplicativo"}]})}),t.jsx(g.TextArea,{name:"step_1.how_to_buy",title:"como comprar seu produto?"}),t.jsxs(g.Optional,{defaultField:"",name:"step_1.order_tracking",text:"Você está entregando um produto físico?",children:[t.jsx(g.TextArea,{name:"step_1.order_tracking",title:"Como os clientes podem rastrear seu pedido?"}),t.jsx(g.Optional,{defaultField:"",name:"step_1.tracking_link",text:"Você possui link para rastrear pedido?",children:t.jsx(g.Input,{title:"Digite a url do site:",name:"step_1.tracking_link",onChange:({target:p})=>{p.value.toLowerCase().includes("http")||(p.value=`https://${p.value.replace("http","")}`)}})})]})]}),t.jsxs(g.EditStep,{index:2,titleStep:"Politicas e condições",icon:t.jsx(Wt,{}),children:[t.jsx(g.Input,{type:"number",name:"step_2.days_of_warranty",title:"Quantos dias o cliente tem de garantia?"}),t.jsx(g.TextArea,{name:"step_2.how_guarantee_work",title:"Como funciona a garantia?"}),t.jsx(g.Optional,{defaultField:"",name:"step_2.how_exchanges_work_and_returns",text:"Esse produto/serviço possui troca ou devolução?",children:t.jsx(g.TextArea,{name:"step_2.how_exchanges_work_and_returns",title:"Como funciona as trocas e devoluções?"})})]}),t.jsxs(g.EditStep,{index:3,titleStep:"Sobre a empresa",icon:t.jsx(Xt,{}),children:[t.jsx(g.Container,{className:"flex gap-4",children:t.jsx(g.Input,{name:"step_3.company_name",title:"Qual o nome da empresa?"})}),t.jsx(g.Input,{name:"step_3.address",title:"Qual o endereço da sua empresa?"}),t.jsxs(g.Container,{className:"flex gap-4",children:[t.jsx(g.Input,{name:"step_3.contact_email",title:"Digite um e-mail para contato"}),t.jsx(g.Input,{title:"Digite um telefone para contato",name:"step_3.contact_phone_number",onChange:({target:p})=>{const f=p.value.replace(/[^\d]/g,"");if(f.length<11){let m;f.length===11?m=f.replace(/^(\d{2})(\d{1})(\d{4})(\d{4})$/,"($1) $2 $3-$4"):m=f.replace(/^(\d{2})(\d{4})(\d{4})$/,"($1) $2-$3"),p.value=m}else p.value=p.value.substring(0,15)}})]}),t.jsx(g.Input,{name:"step_3.support_hours",title:"Qual seu horário para suporte humano?"})]}),t.jsxs(g.EditStep,{index:4,titleStep:"Personalidade da IA ",icon:t.jsx(Zt,{}),children:[t.jsx(g.Optional,{defaultField:"",name:"step_4.ia_name",text:"Deseja dar um nome a sua inteligência artificial?",children:t.jsx(g.Input,{name:"step_4.ia_name",title:"Qual o nome da sua inteligência artificial?"})}),t.jsx(g.Optional,{defaultField:"",text:"Deseja adicionar restrições de palavras ou frase?",name:"step_4.restrictions",children:t.jsx(g.Input,{name:"step_4.restrictions",title:"Faça uma lista de restrições para que a IA evite utiliza-la em uma conversa"})}),t.jsx(g.TextArea,{title:"Faça uma breve descrição de quem é seu público (cliente)",name:"step_4.client_describe"})]})]})})}function Ls(){var l;const{client:e}=N.useContext(M),{setModalContent:a,clearModal:s}=N.useContext(T),n=Array(na).fill(0),[r,o]=N.useState(((l=e==null?void 0:e.plan_management)==null?void 0:l.prompt)||[]),i=d=>{r!=null&&r.length&&a({componentName:"modal_create_database",components:t.jsx(L,{children:t.jsx(Bs,{prompt:r[d],setPrompts:o})})})},c=d=>{async function u(p){p.preventDefault();const f=p.target.querySelector("input").value,m=r[d].id;if(f){const x=await ia(f,m);(x==null?void 0:x.status)===200&&(o([...r,r[d].prompt_name=f]),a({componentName:"modal_saved",components:t.jsx(C,{message:"Nome da sua base de dados foi atualizado com sucesso!",componentName:"modal_saved",functionAfterComplete:()=>s(null,{clearAll:!0})})}))}}a({componentName:"modal_edit_name",components:t.jsx(L,{children:t.jsxs("div",{className:"flex flex-col justify-center items-center gap-4",children:[t.jsx("h2",{children:"Digite o novo nome da sua fonte de dados:"}),t.jsxs("form",{onSubmit:u,className:"flex flex-col justify-center items-center gap-4",children:[t.jsx("input",{placeholder:"Ex: Minha nova base de dados",name:"database_name",defaultValue:r[d].prompt_name}),t.jsx(I,{type:"button",children:"Salvar"})]})]})})})};return e&&t.jsx(Q,{title:"Fonte de dados",children:t.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 my-12 gap-8",children:n.map((d,u)=>{var p,f,m,x,_;return(p=e.plan_management)!=null&&p.plan&&u<Number(e.plan_management.plan.max_databases.default)?t.jsx("div",{"data-prompt":!!((f=r[u])!=null&&f.prompt_name),className:"flex justify-center items-center rounded-xl cursor-pointer border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-light dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20 z-50",children:(m=r[u])!=null&&m.prompt_name?t.jsxs("div",{className:"w-[300px] flex gap-2 items-center justify-center",children:[t.jsxs("h2",{className:"w-[200px] text-center py-4 flex justify-center items-center gap-2",onClick:()=>i(u),children:[t.jsx(oa,{}),t.jsx("span",{className:"w-full whitespace-nowrap text-ellipsis overflow-x-hidden",children:(x=r[u])==null?void 0:x.prompt_name})]}),t.jsx(ra,{className:"cursor-text ",onClick:()=>c(u)})]}):t.jsx(se,{title:"Vamos criar sua primeira fonte de dados",text:"Clique em <span class='font-medium text-2xl mx-1'>+</span> para criar sua primeira fonte de dados.",position:"BOTTOM",hidden:u!==1,children:t.jsx(R,{tip:"Criar fonte de dados",children:t.jsx(Ps,{plan_management_id:e.plan_management.id})})})},u):t.jsx("div",{"data-prompt":!!((_=r[u])!=null&&_.prompt_name),className:"flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:t.jsx(Y,{className:"w-[300px] py-3 text-5xl"})},u)})})})}function Fs({chats:e,setIndex:a}){const s=n=>{a(n)};return t.jsx("div",{className:"w-[300px] h-full overflow-auto flex flex-col border-r border-light/40",children:e==null?void 0:e.map((n,r)=>!!n.messages.length&&t.jsxs("div",{className:"w-full cursor-pointer hover:bg-primary-200 transition-colors p-4 border border-primary-100/20",onClick:()=>s(r),children:[t.jsx("h2",{className:"whitespace-nowrap text-ellipsis overflow-hidden py-1 text-xl font-bold",children:n.messages.length>1?n.messages[1].message.replace("<br/>",""):`Chat ${r.toString().padStart(2,"0")}`},n.messages.join()),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"italic text-xs",children:[n.messages.length," messagens"]}),t.jsx("span",{className:"italic text-xs",children:K(n.messages[n.messages.length-1].time).dateFormat_A})]})]},n.id))})}function Os({chats:e,index:a}){var o;const{client:s}=N.useContext(M),[n,r]=N.useState();return N.useEffect(()=>{var i,c;if(e.length){const l=(i=s==null?void 0:s.plan_management.project.find(u=>e&&u.id===e[a].project_id))==null?void 0:i.logo,d=(c=s==null?void 0:s.plan_management.project.find(u=>e&&u.id===e[a].project_id))==null?void 0:c.project_name;l&&d&&r({logoChat:l,projectName:d})}},[]),n&&t.jsx("div",{className:"w-full h-full flex flex-col",children:t.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[t.jsxs("div",{className:"w-full h-[60px] flex items-center px-4 bg-primary-100",children:[t.jsx("div",{className:"w-[50px] h-[50px] overflow-hidden rounded-full",children:t.jsx("img",{src:n==null?void 0:n.logoChat,alt:"logo do cliente",className:"w-full h-full object-cover"})}),t.jsx("p",{className:"px-4 text-xl text-light dark:text-primary-100",children:n==null?void 0:n.projectName})]}),t.jsx("div",{className:"w-full h-full p-4 flex flex-col gap-4 overflow-auto",children:(o=e[a])!=null&&o.messages?e[a].messages.map((i,c)=>t.jsx("div",{"data-player":i.player,className:"w-full flex data-[player='1']:justify-end justify-start",children:t.jsxs("div",{"data-player":i.player,className:"bg-primary-100/50 dark:bg-light text-black/80 data-[player='1']:bg-primary-100 dark:data-[player='1']:bg-primary-200 data-[player='1']:text-light p-2 rounded-xl max-w-md",children:[t.jsx("h2",{className:"",dangerouslySetInnerHTML:{__html:i.message}}),t.jsx("span",{className:"w-full flex justify-end text-xs italic",children:K(i.time).shortHour})]})},c)):t.jsx("h2",{className:"w-full h-[200px] flex justify-center items-center",children:"Ainda não existe nenhuma conversa para esse chat"})})]})})}function Us(){var u;const{client:e}=N.useContext(M),[a,s]=J(),[n,r]=N.useState(0),[o,i]=N.useState([]),c=(u=e==null?void 0:e.plan_management)==null?void 0:u.project.map(p=>Object({id:p.project_name.replace(" ","_"),name:p.project_name}));N.useEffect(()=>{const p=a.get("filter_time_chats"),f=a.get("project");if(e&&c!=null&&c.length){let m;f?m=e.plan_management.project.filter(_=>_.project_name.replace(" ","_")===f&&_):m=e.plan_management.project;const x=m.map(_=>_.chat.filter(y=>Number(p)?z(y.created_at)<=Number(p):!0)).flat();i(x)}},[a]);const l=({target:p})=>{const f=p.selectedIndex,m=p.options[f].value,x=new URLSearchParams(a);x.set("project",m),s(x)},d=async({currentTarget:p})=>{if(e!=null&&e.plan_management){const f=p.querySelector("svg");f.classList.add("rotate-[-360deg]","transition-transform","duration-1000");const m=setTimeout(()=>{f.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(m)},1e3)}};return t.jsxs(Q,{title:"Registros",className:"px-8",children:[t.jsxs("div",{className:"w-full flex gap-8 h-[40px]",children:[t.jsx(R,{tip:"Selecione uma data  como filtro",children:t.jsx(ct,{typeFilter:"filter_time_chats"})}),t.jsx(R,{tip:"Selecione um chat",children:t.jsx(qe,{title:"Selecione um chat",options:c||[],Icon:la,handleSelectDatabase:l})}),t.jsx(R,{tip:"Atualize seus chats",children:t.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",onClick:d,children:t.jsx(Ve,{className:"text-xl"})})})]}),t.jsxs("div",{className:"w-full h-3/4 flex bg-light dark:bg-gray my-4 overflow-hidden",children:[t.jsx(Fs,{chats:o,setIndex:r}),!!o.length&&t.jsx(Os,{chats:o,index:n})]})]})}function zs({plan_management:e}){return t.jsxs("div",{className:"w-full flex flex-col items-center",children:[t.jsx("h2",{className:"text-xl p-2",children:"Historico de transações"}),t.jsx("div",{className:"w-full max-w-[1000px] p-4",children:e?t.jsxs("div",{className:"w-full flex flex-col rounded-md",children:[t.jsxs("div",{className:"w-full flex p-4 justify-between bg-primary-100/20 border border-primary-100 rounded-md",children:[t.jsx("span",{className:"text-center",children:"Plano"}),t.jsx("span",{className:"text-center",children:"Transação"}),t.jsx("span",{className:"text-center",children:"Data e hora"}),t.jsx("span",{className:"text-center",children:"Valor do plano"}),t.jsx("span",{className:"text-center",children:"Método de pagamento"}),t.jsx("span",{className:"text-center",children:"Status"})]}),e.trasaction.map((a,s)=>t.jsxs("div",{className:"w-full flex px-4 justify-between border border-zinc-500/20",children:[t.jsx("span",{className:"text-center",children:e.plan.plan_name}),t.jsx("span",{className:"text-center",children:a.transaction_describe==="PAYMENT"?"Pagamento":a.transaction_describe==="REFUND_REQUEST"?"Reembolso solicitado":a.transaction_describe==="SUBSCRIPTION_CANCELLATION"?"Plano cancelado":"Reembolso cancelado"}),t.jsx("span",{className:"text-center",children:K(a.created_at).dateFormat_A}),t.jsxs("span",{className:"text-center",children:["R$",Number(a.amount_paid).toFixed(2).replace(".",",")]}),t.jsx("span",{className:"text-center",children:a.payment_method}),t.jsx("span",{className:"text-center",children:a.status==="APPROVED"?"Aprovado":a.status==="REJECT"?"Recusado":"Pendente"})]},s))]}):t.jsx("h2",{className:"text-zinc-500",children:"Você ainda não efetuou nenhum pagamento"})})]})}function $s({plan_management:e}){return e&&e.status!=="DISABLED"?t.jsx("span",{className:"font-bold text-yellow-600 uppercase",children:e.plan.plan_name}):t.jsx("span",{className:"text-zinc-400/60",children:"Sem plano"})}function dt(e){const r=(new Date(e)-new Date)/(1e3*60*60*24);return Number(r.toFixed(0))}function qs({plan_management:e}){const a=()=>e?dt(e.free_trial):0;return e&&e.status!=="DISABLED"&&t.jsxs("div",{className:"w-full flex flex-col items-center",children:[t.jsxs("span",{children:["Status:",t.jsx("span",{"data-status":e.status,className:"px-1 rounded-md mx-2 bg-red-200 text-red-700 data-[status='ACTIVE']:bg-green-200 data-[status='ACTIVE']:text-green-700",children:e.status==="ACTIVE"?"Ativo":"Desativado"})]}),t.jsxs("span",{children:["Chats: ",e.project.length," / ",Number(e.plan.max_projects.default)]}),t.jsxs("span",{children:["Fonte de dados: ",e.prompt.length," / ",Number(e.plan.max_databases.default)]}),t.jsxs("span",{children:["Análise de métrica diária:  ",Number(e.plan.max_analyze_metric.default)," "]}),t.jsxs("span",{children:["Limite de messages: ",ga(e).totalMessages," / ",Number(e.plan.max_messages.default)," "]}),t.jsxs("span",{"data-free":Number(e.plan.monthly_price)<=0,className:"data-[free=true]:hidden",children:["Reembolso garantido: ",a()>0?a()+" dias restantes":"expirado"]})]})}function Vs({client:e}){const a=ue(),s=()=>{a("/plans")};return(e!=null&&e.refund_requested.length&&e.refund_requested[0].status!=="PENDING",!0)&&t.jsx("div",{className:"w-full flex flex-col my-4 justify-center items-center",children:t.jsx(I,{onClick:s,children:((e==null?void 0:e.plan_management)&&e.plan_management.status)!=="DISABLED"?Number(e==null?void 0:e.plan_management.plan.monthly_price)>0?"Mudar de plano":"Contratar plano":"Adicionar plano"})})}async function Hs(e){return await H.post(`${G}/refund_requested`,e).catch(s=>console.log(s))}async function Gs(e){return await H.post(`${G}/refund_requested/reactive`,{client_id:e}).catch(s=>console.log(s))}function Js({client:e}){const{setModalContent:a}=N.useContext(T),s=()=>e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0?dt(e==null?void 0:e.plan_management.free_trial):0,n=async()=>{if(e){const c=prompt("Digite o motivo do seu cancelamento:"),l=prompt("Digite de 0 a 5, o quanto você gostou do nosso sistema"),d={client_id:e.id,reason:c||"",product_review:Number(l||0)};await Hs(d)?(a({componentName:"modal_request_success",components:t.jsx(C,{message:"Solicitação de reembolso foi enviada com sucesso!",componentName:"modal_request_success"})}),setTimeout(()=>window.location.reload(),1e3)):a({componentName:"modal_error_request",components:t.jsx(C,{message:"Ocorreu um erro ao enviar sua solicitação de reembolso, por favor entre em contato com nosso suporte.",componentName:"modal_error_request"})})}else a({componentName:"modal_error_client",components:t.jsx(C,{message:"Erro ao processar o cliente, por favor recarregue a página.",componentName:"modal_error_client"})})},r=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0)return e!=null&&e.refund_requested.length&&e.plan_management.status==="ACTIVE"&&s()>0?e.refund_requested[0].status!=="PENDING":s()>0&&e.plan_management.status!=="DISABLED"},o=()=>{e?window.open(`https://dash.ticto.com.br/subscription-verification?code=${e==null?void 0:e.ticto_order_code}&email=${e==null?void 0:e.purchase_email}`):a({componentName:"modal_failed_cancel",components:t.jsx(C,{message:"Falha ao preencher os dados de cancelamento, por favor entre em contato com o suporte.",componentName:"modal_failed_cancel"})})},i=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0&&e.plan_management.status==="ACTIVE"&&s()<=0)return!!(e.refund_requested.length&&e.refund_requested[0].status!=="PENDING")};return r()?t.jsx("div",{className:"w-full flex justify-center",children:t.jsx("a",{onClick:n,className:"text-center underline cursor-pointer",children:"Pedir reembolso"})}):i()&&t.jsx("div",{className:"w-full flex justify-center",children:t.jsx("a",{onClick:o,className:"text-center underline cursor-pointer",children:"Gerenciar assinatura"})})}function Ks({client:e}){return t.jsxs("div",{className:"w-1/2 min-w-[300px] max-w-[400px] border border-zinc-600 p-2 rounded-md z-50",children:[t.jsx("h2",{className:"w-full text-center",children:"Plano atual:"}),t.jsx("div",{className:"w-full flex justify-center",children:t.jsx($s,{plan_management:e==null?void 0:e.plan_management})}),t.jsx("div",{className:"w-full flex justify-center my-4",children:t.jsx(qs,{plan_management:e==null?void 0:e.plan_management})}),t.jsx(Vs,{client:e}),t.jsx(Js,{client:e})]})}function Qs({client:e}){const{setModalContent:a}=N.useContext(T),s=async()=>{e&&await Gs(e.id)&&(a({componentName:"modal_reactive_plan",components:t.jsx(C,{message:"Plano reativado com  sucesso!",componentName:"modal_reactive_plan"})}),setTimeout(()=>window.location.reload(),1500))};return!!(e!=null&&e.refund_requested.length)&&e.refund_requested[0].status!=="CANCEL"&&t.jsxs("div",{className:"w-1/2 min-w-[150px] max-w-[400px] border border-zinc-600 p-2 rounded-md",children:[t.jsx("h2",{className:"w-full text-center pb-4 text-xl",children:"Reembolso solicitado:"}),t.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Reembolso solicidado em:",t.jsx("p",{children:e.refund_requested[0].created_at.substring(0,10)})]}),t.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Plano:",t.jsx("p",{children:e.plan_management.plan.plan_name})]}),t.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Status:",e.refund_requested[0].status==="PENDING"?t.jsx("p",{className:"text-red-600",children:"Pendente"}):e.refund_requested[0].status==="APPROVED"?t.jsx("p",{className:"text-green-600",children:"Dinheiro devolvido"}):t.jsx("p",{className:"text-zinc-200",children:"Reembolso cancelado"})]}),t.jsx("div",{className:"w-full flex justify-center mt-6",children:e.refund_requested[0].status==="PENDING"&&t.jsx(I,{onClick:s,children:"Cancelar reembolso"})})]})}function Ys(){const{client:e}=N.useContext(M);return t.jsxs(Q,{title:"Assinatura",className:"flex-col",children:[t.jsxs("div",{className:"w-full flex justify-center",children:[t.jsx(Ks,{client:e}),t.jsx(Qs,{client:e})]}),t.jsx(zs,{plan_management:e==null?void 0:e.plan_management})]})}function Ce({name:e}){const{register:a}=me(),[s,n]=N.useState(!1),r=()=>n(o=>!o);return t.jsxs("div",{className:"w-3/5 px-2 rounded-md flex justify-center items-center gap-2 bg-gray_light",children:[t.jsx("input",{className:"",type:s?"text":"password",...a(e)}),t.jsx(ca,{"data-isopen":!!s,className:"text-2xl data-[isopen=false]:hidden",onClick:r}),t.jsx(da,{"data-isopen":!!s,className:"text-2xl data-[isopen=true]:hidden",onClick:r})]})}function Ws(){const{setValue:e}=me(),a=fe(),{handleSubmit:s}=a,{client:n}=N.useContext(M),{setModalContent:r,clearModal:o}=N.useContext(T),i=async c=>{if(!n)throw new Error("Client not founded.");if(c.new_password.length<8||c.current_password.length<8){const u=!c.new_password.length||!c.current_password.length?"Preencha todos os dados":"Informe uma senha com mais de 8 caracteres";r({componentName:"modal_error_fill_data",components:t.jsx(C,{message:u,componentName:"modal_error_fill_data",type:"WARNING"})});return}if(c.new_password!==c.confirm_password){r({componentName:"modal_error_new_password",components:t.jsx(C,{message:"Sua confirmação de senha não é idêntica a sua nova senha!",componentName:"modal_error_new_password",type:"ERROR"})});return}c.client_id=n.id;const l=await ua(c);l||r({componentName:"modal_error_password",components:t.jsx(C,{message:"A sua atual senha está incorreta!",componentName:"modal_error_password",type:"ERROR"})}),(l==null?void 0:l.status)===200&&(e("password",c.new_password),r({componentName:"modal_change_password_success",components:t.jsx(C,{message:"Senha atualizada com sucesso!",componentName:"modal_change_password_success",functionAfterComplete:()=>o(null,{clearLast:!0})})}))};return t.jsx(ve,{...a,children:t.jsxs("form",{className:"flex min-w-[200px] flex-col gap-8",onSubmit:s(i),children:[t.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[t.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Sua senha atual:"}),t.jsx(Ce,{name:"current_password"})]}),t.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[t.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Nova senha:"}),t.jsx(Ce,{name:"new_password"})]}),t.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[t.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Confirme sua senha:"}),t.jsx(Ce,{name:"confirm_password"})]}),t.jsxs(I,{customClass:"flex items-center gap-2",children:[t.jsx(He,{})," Salvar"]})]})})}const Xs=te.object({fullname:te.string().min(1,"Digite seu nome completo!").refine(e=>{const a=e.split(" ");return!!(a.length>=2&&a[1])},"Vocẽ precisa informar seu nome completo"),user:te.string().min(1,"Digite um nome de usuário!").max(25,"Nome de usuário muito longe, informe um menor."),email:te.string().email(),password:te.string().min(8,"Sua senha precisa ter no minimo 8 caracteres!")});function Zs(){const{setModalContent:e}=N.useContext(T),{client:a,setClient:s}=N.useContext(M),n=fe({resolver:ma(Xs),defaultValues:{fullname:a==null?void 0:a.fullname,user:a==null?void 0:a.user,email:a==null?void 0:a.email,password:"senha-qualquer"}}),{handleSubmit:r,formState:{errors:o}}=n;N.useEffect(()=>{const u=i(o);u&&e({componentName:"modal_error_message",components:t.jsx(C,{message:u,type:"WARNING",componentName:"modal_error_message"})})},[o]);const i=u=>{if(typeof u=="object"&&fa!==null)for(let p in u){if(p==="message")return u[p];{const f=i(u[p]);if(f!==void 0)return f}}},c=async u=>{if((a==null?void 0:a.user)===u.user||await pa(u.user)){u.client_id=a==null?void 0:a.id;const p=await ha(u);(p==null?void 0:p.status)===200&&(s(p.data),e({componentName:"modal_user_success",components:t.jsx(C,{componentName:"modal_user_success",message:"Perfil atualizado com sucesso"})}))}else e({componentName:"modal_error_user",components:t.jsx(C,{componentName:"modal_error_user",message:"Usuário informado não está disponível!",type:"WARNING"})})},l=()=>{e({componentName:"modal_show_password",components:t.jsx(L,{children:t.jsx(ve,{...n,children:t.jsx(Ws,{})})})})},d=()=>{e({componentName:"modal_show_email",components:t.jsx(C,{componentName:"modal_show_email",message:"Ainda não é possível atualizar o e-mail, para mais informações entre em contato com o suporte.",type:"WARNING"})})};return t.jsx(Q,{title:"Configurações",children:t.jsx(ve,{...n,children:t.jsxs("form",{onSubmit:r(c),className:"w-2/3 mx-auto p-4 px-8 flex flex-col gap-6",children:[t.jsxs(g.Container,{className:"flex items-center gap-4",children:[t.jsx(g.Input,{name:"fullname",title:"Nome completo"}),t.jsx(g.Input,{name:"user",title:"Usuário"})]}),t.jsxs(g.Container,{className:"flex gap-4 justify-center items-center",children:[t.jsx(g.Container,{children:t.jsx(g.Input,{type:"email",name:"email",title:"Informe seu e-mail",disabled:!0})}),t.jsxs(I,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:d,children:["Alterar e-mail",t.jsx(Y,{})]})]}),t.jsxs(g.Container,{className:"flex gap-4 justify-center items-center",children:[t.jsx(g.Container,{children:t.jsx(g.Input,{type:"password",name:"password",title:"Sua senha",disabled:!0})}),t.jsxs(I,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:l,children:["Alterar senha",t.jsx(Y,{})]})]}),t.jsxs(I,{customClass:"flex gap-2 mt-8",children:["Salvar ",t.jsx(He,{})]})]})})})}function en(){const[e,a]=J();return N.useEffect(()=>{window.open("https://wa.me/5535991368790"),e.set("tab","0"),a(e),window.location.reload()},[]),t.jsx(Q,{title:"Central de ajuda",children:t.jsx("h1",{className:"w-full text-center",children:"Vamos redicionar você para o whatsapp"})})}function tn(){const[e]=J(),a=Number(e.get("tab"))||0;return t.jsx("div",{className:"w-full px-2 md:px-8",children:a===0?t.jsx(ws,{}):a===1?t.jsx(Rs,{}):a===2?t.jsx(Ls,{}):a===3?t.jsx(Us,{}):a===4?t.jsx(Ys,{}):a===5?t.jsx(en,{}):t.jsx(Zs,{})})}function nn(){return t.jsxs("div",{className:"w-full md:w-[90%] flex-grow flex flex-col items-center bg-gradient-to-br from-primary-100 from-[10%] to-light to-[20%] dark:to-dark",children:[t.jsx(ba,{}),t.jsx(tn,{})]})}export{nn as default};
