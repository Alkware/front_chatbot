import{r as reactExports,M as ModalContext,j as jsxRuntimeExports,d as MdClose,B as Button,e as axios,A as API_URL,C as ClientContext,F as FaBell,f as MdLogout,g as MdNotifications,h as MdNotificationImportant,c as PopUp,P as PopOver,T as TipContainer,i as FaSun,k as FaMoon,m as MenuHambuguer,n as IoCaretDownOutline,o as updateTutorialClient,a as useNavigate,p as IoAddOutline,q as MdAdd,t as twMerge,s as FaDownload,v as FaCopy,w as FaArrowUpRightFromSquare,x as i,y as n,z as appendErrors,D as useFormContext,E as FaArrowLeft,G as FaArrowRight,H as FaCircleNotch,J as FaLock,K as useFieldArray,R as Root,L as MdDelete,N as useSearchParams,O as ICON_NAME_URL,Q as useForm,S as chatSchema,U as CTA_NAME_URL,V as getPlanManagementById,W as CallToActionFormChat,X as CHAT_ICONS_MODELS,Y as checkSlugIsAvailable,Z as updateProject,$ as Confirm,a0 as deleteProject,a1 as FaLink,a2 as FaGear,a3 as ToggleComponent,a4 as FaChartColumn,a5 as updateIsOnlineProject,a6 as MAX_CONTAINER_TO_CREATE_CHAT,a7 as Select,a8 as MdStar,a9 as FaArrowRotateLeft,aa as FaBorderAll,ab as BsStars,ac as getClientById,ad as FaPlus,ae as FaCircleInfo,af as AddProduct,ag as FaInfo,ah as StepPaymentMethodAndConditions,ai as FaBook,aj as FaSuitcase,ak as OpeningHours,al as FaFaceGrinBeam,am as databaseSchema,an as transformSchemaInText,ao as updateDatabase,ap as saveImage,aq as daleteDatabase,ar as MAX_CONTAINER_TO_CREATE_DATABASE,as as FaDatabase,at as MdEdit,au as updateDatabaseName,av as MdLeaderboard,aw as FILTER_BY_PROJECT_NAME_URL,ax as TAB_NAME_URL,ay as FaArrowCircleLeft,az as FaArrowCircleRight,aA as TextArea,aB as FormProvider,aC as InputPassword,aD as FaSave,aE as changePasswordClient,aF as z,aG as t,aH as objectType,aI as checkUserIsAvailable,u as updateClient}from"./index-gPkt6Xlp.js";import{c as convertDateInHour}from"./Panel-q74M3L2Y.js";import{m as messagesEventManager}from"./messagesEventManager-m0n6tnkY.js";const months=[{short:"Jan",complete:"Janeiro"},{short:"Fev",complete:"Fevereiro"},{short:"Mar",complete:"Março"},{short:"Abr",complete:"Abril"},{short:"Mai",complete:"Maio"},{short:"Jun",complete:"Junho"},{short:"Jul",complete:"Julho"},{short:"Ago",complete:"Agosto"},{short:"Set",complete:"Setembro"},{short:"Out",complete:"Outubro"},{short:"Nov",complete:"Novembro"},{short:"Dez",complete:"Dezembro"}];function formatDate(e=new Date){const s=new Date(e);s.toLocaleTimeString("pt-BR",{hour12:!1});const a=s.getTimezoneOffset(),o=s.getMonth(),l=s.getUTCHours()-a/60,r=s.toLocaleDateString(),c=`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}`,m=`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`,u=`${s.getDay()} de ${months[o].short} - ${m}`;return{currentHour:l,fullDate:r,fullHour:c,shortHour:m,dateFormat_A:u,fullDateWithHour:`${r} - ${c}`}}function DisplayNotification({notification,setDisplayNotification}){const{clearModal}=reactExports.useContext(ModalContext),handleClickAction=()=>{eval(notification.notification.code),setDisplayNotification(!1)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-start md:justify-center items-center h-screen md:h-auto md:min-w-[500px] md:max-w-[80vw] gap-4 relative p-4",children:[jsxRuntimeExports.jsx(MdClose,{className:"absolute top-2 right-2 text-2xl bg-primary-100/60 rounded-full cursor-pointer",onClick:()=>clearModal(null,{clearLast:!0})}),jsxRuntimeExports.jsx("h2",{className:"w-full text-2xl text-center font-bold py-6",children:notification.notification.title}),jsxRuntimeExports.jsx("p",{dangerouslySetInnerHTML:{__html:notification.notification.describe}}),jsxRuntimeExports.jsx("div",{className:"flex p-4",children:!!notification.notification.code&&jsxRuntimeExports.jsx(Button,{onClick:handleClickAction,children:notification.notification.cta_text})})]})}async function updateReadNotification(e){return await axios.post(`${API_URL}/notification/${e}/read`).catch(a=>console.warn(a))}async function updateReadAllNotifications(e){return await axios.post(`${API_URL}/notification/${e}/all_read`).catch(a=>console.warn(a))}function Notification(){const{client:e}=reactExports.useContext(ClientContext),{setModalContent:s}=reactExports.useContext(ModalContext),[a,o]=reactExports.useState(),[l,r]=reactExports.useState(),c=l==null?void 0:l.filter(d=>!d.read);reactExports.useEffect(()=>{var x;const d=(x=e==null?void 0:e.notification_client)==null?void 0:x.sort((h,f)=>!h.read&&f.read?-1:h.read&&!f.read?1:0);r(d)},[]);const m=async d=>{const x=await updateReadNotification(d.id);(x==null?void 0:x.status)===200&&(r(h=>{if(h){const f=h.filter(g=>g.id!==d.id),p=h.find(g=>g.id===d.id);if(p)return p.read=!0,f.push(p),f}}),s({componentName:"modal_display_notification",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(DisplayNotification,{notification:d,setDisplayNotification:o})})}))},u=async()=>{if(!e)return;await updateReadAllNotifications(e.id)?r(x=>{if(x)return x.map(h=>(h.read=!0,h))}):s({componentName:"modal_failed_marked_read_notification",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_failed_marked_read_notification",type:"WARNING",message:"Não foi possível marcar todas as notificações como lida, por favor tente mais tarde!"})})};return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:()=>o(d=>!d),children:[jsxRuntimeExports.jsx("span",{"data-isnotification":!!(c!=null&&c.length),className:"w-[20px] h-[20px] data-[isnotification=false]:hidden flex justify-center items-center text-xs bg-red-800 border border-primary-300 rounded-full absolute -top-[10px] -right-[10px]",children:c==null?void 0:c.length}),jsxRuntimeExports.jsx(FaBell,{className:"text-2xl fill-light cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{"data-display":!!a,className:"w-full h-screen md:h-auto md:min-w-[400px] data-[display=false]:hidden flex flex-col fixed md:absolute z-50 md:rounded-md bg-primary-100 p-4 top-0 md:top-auto right-0 md:translate-x-[122px] md:my-2",children:[jsxRuntimeExports.jsx(MdLogout,{className:" text-4xl absolute top-2 right-3  md:hidden",onClick:()=>o(d=>!d)}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center border-b border-white/30 my-8 md:my-0",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-light",children:"Notificações"}),jsxRuntimeExports.jsx(Button,{onClick:u,children:"Marcar todas como lida"})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col  md:max-h-[300px] overflow-auto",children:l!=null&&l.length?l==null?void 0:l.map(d=>jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center min-h-[60px] border-b border-white/30 hover:bg-primary-200/50 transition-colors cursor-pointer",onClick:()=>m(d),children:[jsxRuntimeExports.jsx("div",{className:"min-w-1/3",children:d.read?jsxRuntimeExports.jsx(MdNotifications,{className:"text-2xl fill-zinc-300"}):jsxRuntimeExports.jsx(MdNotificationImportant,{className:"text-2xl fill-orange-400"})}),jsxRuntimeExports.jsxs("div",{"data-isread":!!d.read,className:"flex flex-col data-[isread=true]:opacity-60 text-light",children:[jsxRuntimeExports.jsx("h2",{className:"font-medium text-lg",children:d.notification.title}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-end px-2",children:[jsxRuntimeExports.jsx("p",{className:"w-2/3 line-clamp-1 opacity-90",dangerouslySetInnerHTML:{__html:d.notification.describe}}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-70",children:formatDate(d.notification.created_at).dateFormat_A})]})]})]},d.id)):jsxRuntimeExports.jsx("h2",{className:"w-full text-center py-4",children:"Você ainda não recebeu nenhuma notificação!"})})]})]})}function MenuIconsHeaderPanel(){reactExports.useEffect(()=>{const s=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",s)},[]);const e=()=>{const s=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",!s);const a=s?"light":"dark";localStorage.theme=a};return jsxRuntimeExports.jsxs("div",{className:"flex gap-3 px-8",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Notificações",positionY:"BOTTOM",positionX:"LEFT",children:jsxRuntimeExports.jsx(Notification,{})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Escolha entre thema light ou dark",positionY:"BOTTOM",positionX:"LEFT",children:jsxRuntimeExports.jsxs("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:e,children:[jsxRuntimeExports.jsx(FaSun,{className:"text-2xl fill-light cursor-pointer hidden dark:block"}),jsxRuntimeExports.jsx(FaMoon,{className:"text-2xl fill-light cursor-pointer block dark:hidden"})]})})]})}function PanelHeader(){return jsxRuntimeExports.jsxs("header",{className:"w-full h-[8%] px-0 md:px-20 min-h-[70px] col-span-8 row-span-1 flex justify-between md:justify-end items-center md:bg-transparent",children:[jsxRuntimeExports.jsx(MenuHambuguer,{urlParamName:"menu_mobile",className:"md:hidden"}),jsxRuntimeExports.jsx(MenuIconsHeaderPanel,{})]})}function TutoralContainer({children:e,title:s,text:a,positionY:o="BOTTOM",positionX:l="CENTER",hidden:r}){const c=reactExports.useRef(null),{client:m,setClient:u}=reactExports.useContext(ClientContext),d=async()=>{if(m){const x=await updateTutorialClient(m.id,!1);u(x)}};return m&&jsxRuntimeExports.jsxs("div",{className:"flex items-center relative group",children:[jsxRuntimeExports.jsx("div",{"data-active":m.tutorial,"data-hidden":r,className:"data-[hidden=true]:hidden data-[active=false]:hidden w-screen h-screen backdrop-blur-sm fixed top-0 left-0 z-40"}),jsxRuntimeExports.jsxs("div",{"data-active":m.tutorial,ref:c,"data-positiony":o,"data-positionx":l,"data-hidden":r,className:`max-w-[70vw] border border-light/40 bg-primary-100 p-1 rounded-xl absolute z-40 
                    data-[positiony=TOP]:-top-full data-[positiony=TOP]:-translate-y-3 data-[positiony=BOTTOM]:-bottom-full data-[positiony=BOTTOM]:translate-y-[90%]
                    data-[positionx=RIGHT]:left-4/5 data-[positionx=CENTER]:left-1/2 data-[positionx=CENTER]:-translate-x-1/2 data-[positionx=LEFT]:right-0
                    text-center transition-opacity data-[hidden=true]:hidden data-[active=false]:hidden`,children:[jsxRuntimeExports.jsxs("div",{className:"bg-primary-100 rounded-md flex flex-col justify-center items-center px-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-center py-2 font-bold text-xl text-light",children:s}),jsxRuntimeExports.jsx("p",{className:"w-[70vw] md:w-[400px] px-4 text-center text-light text-lg",dangerouslySetInnerHTML:{__html:a}}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mt-8 text-light text-base",children:jsxRuntimeExports.jsx("span",{className:"underline opacity-70 cursor-pointer",onClick:d,children:"Pular tutorial"})})]}),jsxRuntimeExports.jsx(IoCaretDownOutline,{"data-positiony":o,"data-positionx":l,className:`border-light/40 fill-primary-100 absolute 
                        data-[positiony='BOTTOM']:top-0 data-[positiony='BOTTOM']:-translate-y-[78%] data-[positiony='BOTTOM']:rotate-180
                        data-[positionx='LEFT']:right-2 data-[positionx='CENTER']:left-1/2 data-[positionx=CENTER]:-translate-x-1/2
                        `})]}),jsxRuntimeExports.jsx("div",{"data-hidden":r,className:"z-40 data-[hidden=true]:z-0",children:e})]})}function ButtonCreateChat({plan_management_id:e,projects:s,index:a}){const{client:o}=reactExports.useContext(ClientContext),{setModalContent:l,clearModal:r}=reactExports.useContext(ModalContext),c=useNavigate(),m=()=>{if(o!=null&&o.plan_management)if(o!=null&&o.plan_management.prompt.length){const u=Number(o.plan_management.plan.max_projects.default),d=o.plan_management.project.length;o.plan_management.status!=="DISABLED"?u>d?c(`/create-chat/${e}`):l({componentName:"modal_reached_max_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Você atingiu o número maximo de chats por plano.",componentName:"modal_reached_max_plan"})}):l({componentName:"modal_plan_is_desabled",components:jsxRuntimeExports.jsx(PopOver,{message:"O plano da sua conta está desabilitado.",componentName:"modal_plan_is_desabled",functionAfterComplete:()=>c("/panel?tab=4")})})}else l({componentName:"modal_create_database",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl text-center",children:["Para criar um novo chat, antes é necessário ",jsxRuntimeExports.jsx("br",{}),"  criar uma fonte de dados."]}),jsxRuntimeExports.jsxs("h2",{className:"text-lg text-center opacity-80",children:["Nossa inteligência artifical vai analisar seus dados e ",jsxRuntimeExports.jsx("br",{})," responder as dúvidas do usuário ",jsxRuntimeExports.jsx("br",{}),"conforme as informações passadas na fonte de dados."]}),jsxRuntimeExports.jsxs(Button,{customClass:"my-4",onClick:()=>{c("/panel?tab=database"),r("modal_create_database")},children:[jsxRuntimeExports.jsx(MdAdd,{}),"Criar fonte de dados"]})]})})});else l({componentName:"modal_without_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan",functionAfterComplete:()=>c("/panel?tab=4")})})};return jsxRuntimeExports.jsx("div",{onClick:m,className:"w-4/5 xs:w-1/2 md:w-1/4 min-w-[200px] min-h-[200px] cursor-pointer flex justify-center items-center",children:jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos criar seu primeiro chat",text:'Clique em <span class="text-3xl font-medium mx-1">+</span> para criar seu primeiro chat de forma simples e fácil',positionX:window.innerWidth>=800?"RIGHT":"CENTER",hidden:a!==0||s.length!==0,children:jsxRuntimeExports.jsx(TipContainer,{tip:"Crie um novo chat",children:jsxRuntimeExports.jsx(IoAddOutline,{className:"text-6xl text-light dark:text-primary-100"})})})})}function Container({children:e,title:s,className:a}){return jsxRuntimeExports.jsxs("div",{className:twMerge("w-full md:min-h-[70vh] flex flex-col gap-4 justify-start items-start bg-light dark:bg-dark rounded-xl border border-primary-100 dark:border-primary-300 relative ",a),children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-primary-100 dark:text-light text-2xl font-semibold uppercase p-4 px-8",children:s}),e]})}var browser={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function e(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};utils$1.getSymbolTotalCodewords=function e(s){return CODEWORDS_COUNT[s]};utils$1.getBCHDigit=function(e){let s=0;for(;e!==0;)s++,e>>>=1;return s};utils$1.setToSJISFunction=function e(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=s};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function e(s){return toSJISFunction(s)};var errorCorrectionLevel={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function s(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+a)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,l){if(e.isValid(o))return o;try{return s(o)}catch{return l}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(e){const s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)===1},put:function(e,s){for(let a=0;a<s;a++)this.putBit((e>>>s-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,s,a,o){const l=e*this.size+s;this.data[l]=a,o&&(this.reservedBit[l]=!0)};BitMatrix$1.prototype.get=function(e,s){return this.data[e*this.size+s]};BitMatrix$1.prototype.xor=function(e,s,a){this.data[e*this.size+s]^=a};BitMatrix$1.prototype.isReserved=function(e,s){return this.reservedBit[e*this.size+s]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(e){const s=utils$1.getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const l=Math.floor(o/7)+2,r=s(o),c=r===145?26:Math.ceil((r-13)/(2*l-2))*2,m=[r-7];for(let u=1;u<l-1;u++)m[u]=m[u-1]-c;return m.push(6),m.reverse()},e.getPositions=function(o){const l=[],r=e.getRowColCoords(o),c=r.length;for(let m=0;m<c;m++)for(let u=0;u<c;u++)m===0&&u===0||m===0&&u===c-1||m===c-1&&u===0||l.push([r[m],r[u]]);return l}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function e(s){const a=getSymbolSize(s);return[[0,0],[a-FINDER_PATTERN_SIZE,0],[0,a-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};e.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},e.from=function(l){return e.isValid(l)?parseInt(l,10):void 0},e.getPenaltyN1=function(l){const r=l.size;let c=0,m=0,u=0,d=null,x=null;for(let h=0;h<r;h++){m=u=0,d=x=null;for(let f=0;f<r;f++){let p=l.get(h,f);p===d?m++:(m>=5&&(c+=s.N1+(m-5)),d=p,m=1),p=l.get(f,h),p===x?u++:(u>=5&&(c+=s.N1+(u-5)),x=p,u=1)}m>=5&&(c+=s.N1+(m-5)),u>=5&&(c+=s.N1+(u-5))}return c},e.getPenaltyN2=function(l){const r=l.size;let c=0;for(let m=0;m<r-1;m++)for(let u=0;u<r-1;u++){const d=l.get(m,u)+l.get(m,u+1)+l.get(m+1,u)+l.get(m+1,u+1);(d===4||d===0)&&c++}return c*s.N2},e.getPenaltyN3=function(l){const r=l.size;let c=0,m=0,u=0;for(let d=0;d<r;d++){m=u=0;for(let x=0;x<r;x++)m=m<<1&2047|l.get(d,x),x>=10&&(m===1488||m===93)&&c++,u=u<<1&2047|l.get(x,d),x>=10&&(u===1488||u===93)&&c++}return c*s.N3},e.getPenaltyN4=function(l){let r=0;const c=l.data.length;for(let u=0;u<c;u++)r+=l.data[u];return Math.abs(Math.ceil(r*100/c/5)-10)*s.N4};function a(o,l,r){switch(o){case e.Patterns.PATTERN000:return(l+r)%2===0;case e.Patterns.PATTERN001:return l%2===0;case e.Patterns.PATTERN010:return r%3===0;case e.Patterns.PATTERN011:return(l+r)%3===0;case e.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(r/3))%2===0;case e.Patterns.PATTERN101:return l*r%2+l*r%3===0;case e.Patterns.PATTERN110:return(l*r%2+l*r%3)%2===0;case e.Patterns.PATTERN111:return(l*r%3+(l+r)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(l,r){const c=r.size;for(let m=0;m<c;m++)for(let u=0;u<c;u++)r.isReserved(u,m)||r.xor(u,m,a(l,u,m))},e.getBestMask=function(l,r){const c=Object.keys(e.Patterns).length;let m=0,u=1/0;for(let d=0;d<c;d++){r(d),e.applyMask(d,l);const x=e.getPenaltyN1(l)+e.getPenaltyN2(l)+e.getPenaltyN3(l)+e.getPenaltyN4(l);e.applyMask(d,l),x<u&&(u=x,m=d)}return m}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function e(s,a){switch(a){case ECLevel$1.L:return EC_BLOCKS_TABLE[(s-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(s-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(s-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(s-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function e(s,a){switch(a){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(s-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(s-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(s-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(s-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function e(){let s=1;for(let a=0;a<255;a++)EXP_TABLE[a]=s,LOG_TABLE[s]=a,s<<=1,s&256&&(s^=285);for(let a=255;a<512;a++)EXP_TABLE[a]=EXP_TABLE[a-255]})();galoisField.log=function e(s){if(s<1)throw new Error("log("+s+")");return LOG_TABLE[s]};galoisField.exp=function e(s){return EXP_TABLE[s]};galoisField.mul=function e(s,a){return s===0||a===0?0:EXP_TABLE[LOG_TABLE[s]+LOG_TABLE[a]]};(function(e){const s=galoisField;e.mul=function(o,l){const r=new Uint8Array(o.length+l.length-1);for(let c=0;c<o.length;c++)for(let m=0;m<l.length;m++)r[c+m]^=s.mul(o[c],l[m]);return r},e.mod=function(o,l){let r=new Uint8Array(o);for(;r.length-l.length>=0;){const c=r[0];for(let u=0;u<l.length;u++)r[u]^=s.mul(l[u],c);let m=0;for(;m<r.length&&r[m]===0;)m++;r=r.slice(m)}return r},e.generateECPolynomial=function(o){let l=new Uint8Array([1]);for(let r=0;r<o;r++)l=e.mul(l,new Uint8Array([1,s.exp(r)]));return l}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function e(s){this.degree=s,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function e(s){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(s.length+this.degree);a.set(s);const o=Polynomial.mod(a,this.genPoly),l=this.degree-o.length;if(l>0){const r=new Uint8Array(this.degree);return r.set(o,l),r}return o};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function e(s){return!isNaN(s)&&s>=1&&s<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function e(s){return TEST_KANJI.test(s)};regex.testNumeric=function e(s){return TEST_NUMERIC.test(s)};regex.testAlphanumeric=function e(s){return TEST_ALPHANUMERIC.test(s)};(function(e){const s=versionCheck,a=regex;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(r,c){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!s.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?r.ccBits[0]:c<27?r.ccBits[1]:r.ccBits[2]},e.getBestModeForData=function(r){return a.testNumeric(r)?e.NUMERIC:a.testAlphanumeric(r)?e.ALPHANUMERIC:a.testKanji(r)?e.KANJI:e.BYTE},e.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},e.isValid=function(r){return r&&r.bit&&r.ccBits};function o(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+l)}}e.from=function(r,c){if(e.isValid(r))return r;try{return o(r)}catch{return c}}})(mode);(function(e){const s=utils$1,a=errorCorrectionCode,o=errorCorrectionLevel,l=mode,r=versionCheck,c=7973,m=s.getBCHDigit(c);function u(f,p,g){for(let j=1;j<=40;j++)if(p<=e.getCapacity(j,g,f))return j}function d(f,p){return l.getCharCountIndicator(f,p)+4}function x(f,p){let g=0;return f.forEach(function(j){const C=d(j.mode,p);g+=C+j.getBitsLength()}),g}function h(f,p){for(let g=1;g<=40;g++)if(x(f,g)<=e.getCapacity(g,p,l.MIXED))return g}e.from=function(p,g){return r.isValid(p)?parseInt(p,10):g},e.getCapacity=function(p,g,j){if(!r.isValid(p))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=l.BYTE);const C=s.getSymbolTotalCodewords(p),_=a.getTotalCodewordsCount(p,g),N=(C-_)*8;if(j===l.MIXED)return N;const R=N-d(j,p);switch(j){case l.NUMERIC:return Math.floor(R/10*3);case l.ALPHANUMERIC:return Math.floor(R/11*2);case l.KANJI:return Math.floor(R/13);case l.BYTE:default:return Math.floor(R/8)}},e.getBestVersionForData=function(p,g){let j;const C=o.from(g,o.M);if(Array.isArray(p)){if(p.length>1)return h(p,C);if(p.length===0)return 1;j=p[0]}else j=p;return u(j.mode,j.getLength(),C)},e.getEncodedBits=function(p){if(!r.isValid(p)||p<7)throw new Error("Invalid QR Code version");let g=p<<12;for(;s.getBCHDigit(g)-m>=0;)g^=c<<s.getBCHDigit(g)-m;return p<<12|g}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function e(s,a){const o=s.bit<<3|a;let l=o<<10;for(;Utils$3.getBCHDigit(l)-G15_BCH>=0;)l^=G15<<Utils$3.getBCHDigit(l)-G15_BCH;return(o<<10|l)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function e(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};NumericData.prototype.getLength=function e(){return this.data.length};NumericData.prototype.getBitsLength=function e(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function e(s){let a,o,l;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),l=parseInt(o,10),s.put(l,10);const r=this.data.length-a;r>0&&(o=this.data.substr(a),l=parseInt(o,10),s.put(l,r*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function e(s){return 11*Math.floor(s/2)+6*(s%2)};AlphanumericData.prototype.getLength=function e(){return this.data.length};AlphanumericData.prototype.getBitsLength=function e(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function e(s){let a;for(a=0;a+2<=this.data.length;a+=2){let o=ALPHA_NUM_CHARS.indexOf(this.data[a])*45;o+=ALPHA_NUM_CHARS.indexOf(this.data[a+1]),s.put(o,11)}this.data.length%2&&s.put(ALPHA_NUM_CHARS.indexOf(this.data[a]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function e(s){for(var a=[],o=s.length,l=0;l<o;l++){var r=s.charCodeAt(l);if(r>=55296&&r<=56319&&o>l+1){var c=s.charCodeAt(l+1);c>=56320&&c<=57343&&(r=(r-55296)*1024+c-56320+65536,l+=1)}if(r<128){a.push(r);continue}if(r<2048){a.push(r>>6|192),a.push(r&63|128);continue}if(r<55296||r>=57344&&r<65536){a.push(r>>12|224),a.push(r>>6&63|128),a.push(r&63|128);continue}if(r>=65536&&r<=1114111){a.push(r>>18|240),a.push(r>>12&63|128),a.push(r>>6&63|128),a.push(r&63|128);continue}a.push(239,191,189)}return new Uint8Array(a).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,typeof e=="string"&&(e=encodeUtf8(e)),this.data=new Uint8Array(e)}ByteData.getBitsLength=function e(s){return s*8};ByteData.prototype.getLength=function e(){return this.data.length};ByteData.prototype.getBitsLength=function e(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(e){for(let s=0,a=this.data.length;s<a;s++)e.put(this.data[s],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function e(s){return s*13};KanjiData.prototype.getLength=function e(){return this.data.length};KanjiData.prototype.getBitsLength=function e(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(e){let s;for(s=0;s<this.data.length;s++){let a=Utils$2.toSJIS(this.data[s]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),e.put(a,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(e){var s={single_source_shortest_paths:function(a,o,l){var r={},c={};c[o]=0;var m=s.PriorityQueue.make();m.push(o,0);for(var u,d,x,h,f,p,g,j,C;!m.empty();){u=m.pop(),d=u.value,h=u.cost,f=a[d]||{};for(x in f)f.hasOwnProperty(x)&&(p=f[x],g=h+p,j=c[x],C=typeof c[x]>"u",(C||j>g)&&(c[x]=g,m.push(x,g),r[x]=d))}if(typeof l<"u"&&typeof c[l]>"u"){var _=["Could not find a path from ",o," to ",l,"."].join("");throw new Error(_)}return r},extract_shortest_path_from_predecessor_list:function(a,o){for(var l=[],r=o;r;)l.push(r),a[r],r=a[r];return l.reverse(),l},find_path:function(a,o,l){var r=s.single_source_shortest_paths(a,o,l);return s.extract_shortest_path_from_predecessor_list(r,l)},PriorityQueue:{make:function(a){var o=s.PriorityQueue,l={},r;a=a||{};for(r in o)o.hasOwnProperty(r)&&(l[r]=o[r]);return l.queue=[],l.sorter=a.sorter||o.default_sorter,l},default_sorter:function(a,o){return a.cost-o.cost},push:function(a,o){var l={value:a,cost:o};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=s})(dijkstra);var dijkstraExports=dijkstra.exports;(function(e){const s=mode,a=numericData,o=alphanumericData,l=byteData,r=kanjiData,c=regex,m=utils$1,u=dijkstraExports;function d(_){return unescape(encodeURIComponent(_)).length}function x(_,N,R){const E=[];let y;for(;(y=_.exec(R))!==null;)E.push({data:y[0],index:y.index,mode:N,length:y[0].length});return E}function h(_){const N=x(c.NUMERIC,s.NUMERIC,_),R=x(c.ALPHANUMERIC,s.ALPHANUMERIC,_);let E,y;return m.isKanjiModeEnabled()?(E=x(c.BYTE,s.BYTE,_),y=x(c.KANJI,s.KANJI,_)):(E=x(c.BYTE_KANJI,s.BYTE,_),y=[]),N.concat(R,E,y).sort(function(b,A){return b.index-A.index}).map(function(b){return{data:b.data,mode:b.mode,length:b.length}})}function f(_,N){switch(N){case s.NUMERIC:return a.getBitsLength(_);case s.ALPHANUMERIC:return o.getBitsLength(_);case s.KANJI:return r.getBitsLength(_);case s.BYTE:return l.getBitsLength(_)}}function p(_){return _.reduce(function(N,R){const E=N.length-1>=0?N[N.length-1]:null;return E&&E.mode===R.mode?(N[N.length-1].data+=R.data,N):(N.push(R),N)},[])}function g(_){const N=[];for(let R=0;R<_.length;R++){const E=_[R];switch(E.mode){case s.NUMERIC:N.push([E,{data:E.data,mode:s.ALPHANUMERIC,length:E.length},{data:E.data,mode:s.BYTE,length:E.length}]);break;case s.ALPHANUMERIC:N.push([E,{data:E.data,mode:s.BYTE,length:E.length}]);break;case s.KANJI:N.push([E,{data:E.data,mode:s.BYTE,length:d(E.data)}]);break;case s.BYTE:N.push([{data:E.data,mode:s.BYTE,length:d(E.data)}])}}return N}function j(_,N){const R={},E={start:{}};let y=["start"];for(let w=0;w<_.length;w++){const b=_[w],A=[];for(let v=0;v<b.length;v++){const S=b[v],M=""+w+v;A.push(M),R[M]={node:S,lastCount:0},E[M]={};for(let P=0;P<y.length;P++){const T=y[P];R[T]&&R[T].node.mode===S.mode?(E[T][M]=f(R[T].lastCount+S.length,S.mode)-f(R[T].lastCount,S.mode),R[T].lastCount+=S.length):(R[T]&&(R[T].lastCount=S.length),E[T][M]=f(S.length,S.mode)+4+s.getCharCountIndicator(S.mode,N))}}y=A}for(let w=0;w<y.length;w++)E[y[w]].end=0;return{map:E,table:R}}function C(_,N){let R;const E=s.getBestModeForData(_);if(R=s.from(N,E),R!==s.BYTE&&R.bit<E.bit)throw new Error('"'+_+'" cannot be encoded with mode '+s.toString(R)+`.
 Suggested mode is: `+s.toString(E));switch(R===s.KANJI&&!m.isKanjiModeEnabled()&&(R=s.BYTE),R){case s.NUMERIC:return new a(_);case s.ALPHANUMERIC:return new o(_);case s.KANJI:return new r(_);case s.BYTE:return new l(_)}}e.fromArray=function(N){return N.reduce(function(R,E){return typeof E=="string"?R.push(C(E,null)):E.data&&R.push(C(E.data,E.mode)),R},[])},e.fromString=function(N,R){const E=h(N,m.isKanjiModeEnabled()),y=g(E),w=j(y,R),b=u.find_path(w.map,"start","end"),A=[];for(let v=1;v<b.length-1;v++)A.push(w.table[b[v]].node);return e.fromArray(p(A))},e.rawSplit=function(N){return e.fromArray(h(N,m.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,s){const a=e.size,o=FinderPattern.getPositions(s);for(let l=0;l<o.length;l++){const r=o[l][0],c=o[l][1];for(let m=-1;m<=7;m++)if(!(r+m<=-1||a<=r+m))for(let u=-1;u<=7;u++)c+u<=-1||a<=c+u||(m>=0&&m<=6&&(u===0||u===6)||u>=0&&u<=6&&(m===0||m===6)||m>=2&&m<=4&&u>=2&&u<=4?e.set(r+m,c+u,!0,!0):e.set(r+m,c+u,!1,!0))}}function setupTimingPattern(e){const s=e.size;for(let a=8;a<s-8;a++){const o=a%2===0;e.set(a,6,o,!0),e.set(6,a,o,!0)}}function setupAlignmentPattern(e,s){const a=AlignmentPattern.getPositions(s);for(let o=0;o<a.length;o++){const l=a[o][0],r=a[o][1];for(let c=-2;c<=2;c++)for(let m=-2;m<=2;m++)c===-2||c===2||m===-2||m===2||c===0&&m===0?e.set(l+c,r+m,!0,!0):e.set(l+c,r+m,!1,!0)}}function setupVersionInfo(e,s){const a=e.size,o=Version.getEncodedBits(s);let l,r,c;for(let m=0;m<18;m++)l=Math.floor(m/3),r=m%3+a-8-3,c=(o>>m&1)===1,e.set(l,r,c,!0),e.set(r,l,c,!0)}function setupFormatInfo(e,s,a){const o=e.size,l=FormatInfo.getEncodedBits(s,a);let r,c;for(r=0;r<15;r++)c=(l>>r&1)===1,r<6?e.set(r,8,c,!0):r<8?e.set(r+1,8,c,!0):e.set(o-15+r,8,c,!0),r<8?e.set(8,o-r-1,c,!0):r<9?e.set(8,15-r-1+1,c,!0):e.set(8,15-r-1,c,!0);e.set(o-8,8,1,!0)}function setupData(e,s){const a=e.size;let o=-1,l=a-1,r=7,c=0;for(let m=a-1;m>0;m-=2)for(m===6&&m--;;){for(let u=0;u<2;u++)if(!e.isReserved(l,m-u)){let d=!1;c<s.length&&(d=(s[c]>>>r&1)===1),e.set(l,m-u,d),r--,r===-1&&(c++,r=7)}if(l+=o,l<0||a<=l){l-=o,o=-o;break}}}function createData(e,s,a){const o=new BitBuffer;a.forEach(function(u){o.put(u.mode.bit,4),o.put(u.getLength(),Mode.getCharCountIndicator(u.mode,e)),u.write(o)});const l=Utils$1.getSymbolTotalCodewords(e),r=ECCode.getTotalCodewordsCount(e,s),c=(l-r)*8;for(o.getLengthInBits()+4<=c&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const m=(c-o.getLengthInBits())/8;for(let u=0;u<m;u++)o.put(u%2?17:236,8);return createCodewords(o,e,s)}function createCodewords(e,s,a){const o=Utils$1.getSymbolTotalCodewords(s),l=ECCode.getTotalCodewordsCount(s,a),r=o-l,c=ECCode.getBlocksCount(s,a),m=o%c,u=c-m,d=Math.floor(o/c),x=Math.floor(r/c),h=x+1,f=d-x,p=new ReedSolomonEncoder(f);let g=0;const j=new Array(c),C=new Array(c);let _=0;const N=new Uint8Array(e.buffer);for(let b=0;b<c;b++){const A=b<u?x:h;j[b]=N.slice(g,g+A),C[b]=p.encode(j[b]),g+=A,_=Math.max(_,A)}const R=new Uint8Array(o);let E=0,y,w;for(y=0;y<_;y++)for(w=0;w<c;w++)y<j[w].length&&(R[E++]=j[w][y]);for(y=0;y<f;y++)for(w=0;w<c;w++)R[E++]=C[w][y];return R}function createSymbol(e,s,a,o){let l;if(Array.isArray(e))l=Segments.fromArray(e);else if(typeof e=="string"){let d=s;if(!d){const x=Segments.rawSplit(e);d=Version.getBestVersionForData(x,a)}l=Segments.fromString(e,d||40)}else throw new Error("Invalid data");const r=Version.getBestVersionForData(l,a);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=r;else if(s<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const c=createData(s,a,l),m=Utils$1.getSymbolSize(s),u=new BitMatrix(m);return setupFinderPattern(u,s),setupTimingPattern(u),setupAlignmentPattern(u,s),setupFormatInfo(u,a,0),s>=7&&setupVersionInfo(u,s),setupData(u,c),isNaN(o)&&(o=MaskPattern.getBestMask(u,setupFormatInfo.bind(null,u,a))),MaskPattern.applyMask(o,u),setupFormatInfo(u,a,o),{modules:u,version:s,errorCorrectionLevel:a,maskPattern:o,segments:l}}qrcode.create=function e(s,a){if(typeof s>"u"||s==="")throw new Error("No input text");let o=ECLevel.M,l,r;return typeof a<"u"&&(o=ECLevel.from(a.errorCorrectionLevel,ECLevel.M),l=Version.from(a.version),r=MaskPattern.from(a.maskPattern),a.toSJISFunc&&Utils$1.setToSJISFunction(a.toSJISFunc)),createSymbol(s,l,o,r)};var canvas={},utils={};(function(e){function s(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let o=a.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+a);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(r){return[r,r]}))),o.length===6&&o.push("F","F");const l=parseInt(o.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const l=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,r=o.width&&o.width>=21?o.width:void 0,c=o.scale||4;return{width:r,scale:r?4:c,margin:l,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,l){return l.width&&l.width>=o+l.margin*2?l.width/(o+l.margin*2):l.scale},e.getImageWidth=function(o,l){const r=e.getScale(o,l);return Math.floor((o+l.margin*2)*r)},e.qrToImageData=function(o,l,r){const c=l.modules.size,m=l.modules.data,u=e.getScale(c,r),d=Math.floor((c+r.margin*2)*u),x=r.margin*u,h=[r.color.light,r.color.dark];for(let f=0;f<d;f++)for(let p=0;p<d;p++){let g=(f*d+p)*4,j=r.color.light;if(f>=x&&p>=x&&f<d-x&&p<d-x){const C=Math.floor((f-x)/u),_=Math.floor((p-x)/u);j=h[m[C*c+_]?1:0]}o[g++]=j.r,o[g++]=j.g,o[g++]=j.b,o[g]=j.a}}})(utils);(function(e){const s=utils;function a(l,r,c){l.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=c,r.width=c,r.style.height=c+"px",r.style.width=c+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(r,c,m){let u=m,d=c;typeof u>"u"&&(!c||!c.getContext)&&(u=c,c=void 0),c||(d=o()),u=s.getOptions(u);const x=s.getImageWidth(r.modules.size,u),h=d.getContext("2d"),f=h.createImageData(x,x);return s.qrToImageData(f.data,r,u),a(h,d,x),h.putImageData(f,0,0),d},e.renderToDataURL=function(r,c,m){let u=m;typeof u>"u"&&(!c||!c.getContext)&&(u=c,c=void 0),u||(u={});const d=e.render(r,c,u),x=u.type||"image/png",h=u.rendererOpts||{};return d.toDataURL(x,h.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(e,s){const a=e.a/255,o=s+'="'+e.hex+'"';return a<1?o+" "+s+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function svgCmd(e,s,a){let o=e+s;return typeof a<"u"&&(o+=" "+a),o}function qrToPath(e,s,a){let o="",l=0,r=!1,c=0;for(let m=0;m<e.length;m++){const u=Math.floor(m%s),d=Math.floor(m/s);!u&&!r&&(r=!0),e[m]?(c++,m>0&&u>0&&e[m-1]||(o+=r?svgCmd("M",u+a,.5+d+a):svgCmd("m",l,0),l=0,r=!1),u+1<s&&e[m+1]||(o+=svgCmd("h",c),c=0)):l++}return o}svgTag.render=function e(s,a,o){const l=Utils.getOptions(a),r=s.modules.size,c=s.modules.data,m=r+l.margin*2,u=l.color.light.a?"<path "+getColorAttrib(l.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",d="<path "+getColorAttrib(l.color.dark,"stroke")+' d="'+qrToPath(c,r,l.margin)+'"/>',x='viewBox="0 0 '+m+" "+m+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+x+' shape-rendering="crispEdges">'+u+d+`</svg>
`;return typeof o=="function"&&o(null,f),f};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(e,s,a,o,l){const r=[].slice.call(arguments,1),c=r.length,m=typeof r[c-1]=="function";if(!m&&!canPromise())throw new Error("Callback required as last argument");if(m){if(c<2)throw new Error("Too few arguments provided");c===2?(l=a,a=s,s=o=void 0):c===3&&(s.getContext&&typeof l>"u"?(l=o,o=void 0):(l=o,o=a,a=s,s=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(a=s,s=o=void 0):c===2&&!s.getContext&&(o=a,a=s,s=void 0),new Promise(function(u,d){try{const x=QRCode.create(a,o);u(e(x,s,o))}catch(x){d(x)}})}try{const u=QRCode.create(a,o);l(null,e(u,s,o))}catch(u){l(u)}}browser.create=QRCode.create;browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser.toString=renderCanvas.bind(null,function(e,s,a){return SvgRenderer.render(e,a)});function QrCode({text:e,width:s}){const a=reactExports.useRef(null),o=localStorage.theme==="dark"?"#000":"#7672f2",l=localStorage.theme==="dark"?"#7672f2":"#fff";reactExports.useEffect(()=>{a.current&&browser.toCanvas(a.current,e,{width:s,margin:1,color:{dark:o,light:l}},function(c){c&&console.error(c)})},[e,s]);const r=()=>{if(a.current){const c=a.current.toDataURL("image/png").replace("image/png","image/octet-stream"),m=document.createElement("a");m.download="qrcode.png",m.href=c,m.click()}};return jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-4/5 flex justify-center",children:jsxRuntimeExports.jsx("canvas",{ref:a})}),jsxRuntimeExports.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Baixar imagem",children:jsxRuntimeExports.jsx(FaDownload,{onClick:r,className:" text-2xl cursor-pointer"})})})]})}function ShareProject({slug:e}){const{setModalContent:s,clearModal:a}=reactExports.useContext(ModalContext),o=reactExports.useRef(null),l=reactExports.useRef(null),r=()=>{a(null,{clearAll:!0}),window.open(`https://chat.wipzee.com/${e}`)},c=()=>{try{const d=o.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var u=document.execCommand("copy");u&&s({componentName:"modal_copy_link",components:jsxRuntimeExports.jsx(PopOver,{message:"Link Copiado!",type:"INFORMATION",componentName:"modal_copy_link"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{s({componentName:"modal_failed_copy_link",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_link"})})}},m=()=>{try{const d=l.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var u=document.execCommand("copy");u&&s({componentName:"modal_copy_widget",components:jsxRuntimeExports.jsx(PopOver,{message:"Widget Copiado!",type:"INFORMATION",componentName:"modal_copy_widget"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{s({componentName:"modal_failed_copy_widget",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_widget"})})}};return jsxRuntimeExports.jsxs("div",{className:"w-full h-screen md:h-auto flex flex-col gap-8 relative md:static p-4",children:[jsxRuntimeExports.jsx(MdLogout,{className:"text-4xl rotate-180 md:hidden absolute",onClick:()=>a(null,{clearLast:!0})}),jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col gap-2 mt-12 md:mt-0",children:[jsxRuntimeExports.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Link do seu chat"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between",children:[jsxRuntimeExports.jsx("input",{ref:o,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`https://chat.wipzee.com/${e}`}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Copie seu link",children:jsxRuntimeExports.jsx(FaCopy,{onClick:c,className:" text-2xl cursor-pointer"})}),jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos abrir seu chat",text:"Clique no icone acima para abrir seu chat em uma nova guia para testa-lo",positionX:"LEFT",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Abra seu chat",children:jsxRuntimeExports.jsx(FaArrowUpRightFromSquare,{onClick:r,className:" text-xl cursor-pointer"})})})]})]}),jsxRuntimeExports.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Esse será o link que você enviará aos usuários que irão acessar seu chat."})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Código do Widget"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between",children:[jsxRuntimeExports.jsx("input",{ref:l,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`<script src="https://widget.wipzee.com/${e}" defer><\/script>`}),jsxRuntimeExports.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:jsxRuntimeExports.jsx(FaCopy,{onClick:m,className:" text-2xl cursor-pointer"})})]}),jsxRuntimeExports.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Copie e cole esse código no head do html do seu site."})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"w-4/5 text-center uppercase",children:"QR CODE"}),jsxRuntimeExports.jsx(QrCode,{width:200,text:`https://chat.wipzee.com/${e}`}),jsxRuntimeExports.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Use esse QR CODE para acessar seu site facilmente"})]})]})}const isZodError=e=>e.errors!=null,parseErrorSchema=(e,s)=>{const a={};for(;e.length;){const o=e[0],{code:l,message:r,path:c}=o,m=c.join(".");if(!a[m])if("unionErrors"in o){const u=o.unionErrors[0].errors[0];a[m]={message:u.message,type:u.code}}else a[m]={message:r,type:l};if("unionErrors"in o&&o.unionErrors.forEach(u=>u.errors.forEach(d=>e.push(d))),s){const u=a[m].types,d=u&&u[o.code];a[m]=appendErrors(m,s,a,l,d?[].concat(d,o.message):o.message)}e.shift()}return a},zodResolver=(e,s,a={})=>async(o,l,r)=>{try{const c=await e[a.mode==="sync"?"parse":"parseAsync"](o,s);return r.shouldUseNativeValidation&&i({},r),{errors:{},values:a.raw?o:c}}catch(c){if(isZodError(c))return{values:{},errors:n(parseErrorSchema(c.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw c}};function SimulatorSlugUrl(){const{watch:e}=useFormContext(),[s,a]=reactExports.useState();return reactExports.useEffect(()=>{const o=e("step_4.slug");a(o.replaceAll(" ","-"))},[e()]),jsxRuntimeExports.jsxs("div",{className:"w-full md:w-full flex gap-2 items-center bg-white p-2 my-4 rounded-md",children:[jsxRuntimeExports.jsx(FaArrowLeft,{className:"fill-zinc-600"}),jsxRuntimeExports.jsx(FaArrowRight,{className:"fill-zinc-600"}),jsxRuntimeExports.jsx(FaCircleNotch,{className:"fill-zinc-600"}),jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-full bg-zinc-600 rounded-xl p-3 flex gap-2 items-center",children:[jsxRuntimeExports.jsx(FaLock,{className:"fill-green-600"}),jsxRuntimeExports.jsxs("h2",{className:"w-[90%] md:w-full overflow-hidden whitespace-nowrap text-ellipsis text-sm xl:text-base opacity-80",children:["https://chat.wipzee.com/",s]})]})]})}function SocialProof(){const{control:e}=useFormContext(),{fields:s,remove:a,append:o}=useFieldArray({control:e,name:"step_0.social_proof"});return jsxRuntimeExports.jsxs(Root.Container,{className:"overflow-auto",children:[jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col gap-4 md:gap-0 md:flex-row justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Adicione avaliações dos seus clientes:"}),jsxRuntimeExports.jsx("span",{className:"text-sm opacity-70",children:"(Essas avaliações estarão visível na bio do chat)"})]}),jsxRuntimeExports.jsxs(Button,{type:"button",onClick:()=>o({}),children:["Adicionar ",jsxRuntimeExports.jsx(MdAdd,{})]})]}),jsxRuntimeExports.jsx(Root.Container,{className:"w-full px-4 overflow-auto my-2",children:s.map((l,r)=>jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-col gap-4 my-2 p-2 rounded-lg border border-primary-100 relative",children:[jsxRuntimeExports.jsx(MdDelete,{className:"absolute -top-3 -right-3 bg-red-800/50 fill-red-500 cursor-pointer rounded-full p-1 text-2xl",onClick:()=>a(r)}),jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-wrap md:flex-nowrap justify-start items-center gap-4",children:[jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.avatar`,sizeContainer:"50px"}),jsxRuntimeExports.jsx(Root.Input,{type:"number",title:"Nota da avaliação",name:`step_0.social_proof.${r}.rating`,widthContainer:"w-2/3",min:0,max:5}),jsxRuntimeExports.jsx(Root.Input,{title:"Nome do cliente",name:`step_0.social_proof.${r}.person_name`})]}),jsxRuntimeExports.jsx(Root.TextArea,{name:`step_0.social_proof.${r}.text`,title:"Oque o cliente achou do produto?"}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex gap-4 justify-start",children:[jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.images.0`,sizeContainer:"50px"}),jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.images.1`,sizeContainer:"50px"}),jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.images.2`,sizeContainer:"50px"})]})]},l.id))})]})}function ModalEditChat({project:e,setProjects:s}){var j,C,_,N,R;const{setModalContent:a,clearModal:o}=reactExports.useContext(ModalContext),{setClient:l,client:r}=reactExports.useContext(ClientContext),[c,m]=reactExports.useState(),[u,d]=useSearchParams(),x=Number(u.get(ICON_NAME_URL))||0,h=useForm({resolver:zodResolver(chatSchema),defaultValues:{step_0:{project_name:e.project_name,chat_input_message:e.chat_input_message,logo:e.logo,social_proof:e.social_proof},step_1:{prompt_id:e.prompt.id,bio:e.bio,call_to_action:e.call_to_action},step_2:{facebook_pixel:e.pixel_facebook},step_3:{chat_appearance:{chat_icon:(j=e.chat_appearance)==null?void 0:j.chat_icon,icon_text:(C=e.chat_appearance)==null?void 0:C.icon_text,primary_color:(_=e.chat_appearance)==null?void 0:_.primary_color,second_color:(N=e.chat_appearance)==null?void 0:N.second_color,background:(R=e.chat_appearance)==null?void 0:R.background}},step_4:{slug:e.slug}}});reactExports.useEffect(()=>{(async()=>{u.set(CTA_NAME_URL,(e.call_to_action.length-1).toString()),d(u);const E=await getPlanManagementById(e.plan_management_id);(E==null?void 0:E.status)===200&&m(E.data.prompt)})()},[]);const f=async E=>{var w,b,A;let y={};if(Object.keys(E).forEach(v=>{const S=E[v];Object.keys(S).forEach(M=>{y[M]=E[v][M]})}),y&&e.slug){if((w=E.step_4)!=null&&w.slug&&((b=E.step_4)==null?void 0:b.slug)!==e.slug&&!await checkSlugIsAvailable(E.step_4.slug)){a({componentName:"modal_error_slug",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_slug",message:"A slug escolhida não está disponível!",type:"WARNING"})});return}y.chat_appearance.id=(A=e.chat_appearance)==null?void 0:A.id;const v=await updateProject(y,e.slug);v&&v.status===200&&(s(S=>{const M=S.findIndex(T=>T.id===e.id),P=S.filter(T=>T.id!==e.id);return y.is_online=v.data.is_online,y.plan_management_id=v.data.plan_management_id,y.id=v.data.id,y.prompt=v.data.prompt,y.chat_appearance=v.data.chat_appearance,P.splice(M,0,y),P}),a({componentName:"modal_chat_updated",components:jsxRuntimeExports.jsx(PopOver,{message:"Chat atualizado com sucesso",componentName:"modal_chat_updated",functionAfterComplete:()=>o("modal_edit_project")})}))}};async function p(){const E=async()=>{if(e.id){const y=await deleteProject(e.id);if(y&&y.status===200){s(b=>b.filter(A=>A.id!==e.id));const w=r==null?void 0:r.plan_management.project.findIndex(b=>b.id===e.id);r&&w&&(r.plan_management.project.splice(w,1),l(r)),a({componentName:"modal_delete_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Chat excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>o(null,{clearAll:!0})})})}}};a({componentName:"modal_confirm_delete_chat",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(Confirm,{title:"Tem certeza que deseja deletar esse chat?",subTitle:"Uma vez removido, não pode ser revertido.",confirmFunction:E,cancelFuntion:()=>o("modal_confirm_delete_chat")})})})}const g=E=>{u.set(ICON_NAME_URL,E.toString()),d(u),h.unregister("step_3.chat_appearance.chat_icon"),h.register("step_3.chat_appearance.chat_icon",{value:E})};return!!(c!=null&&c.length)&&jsxRuntimeExports.jsx("div",{className:"w-screen px-4 md:px-0 md:w-[90vw] md:h-[80vh] md:min-h-[450px] md:min-w-[700px] flex overflow-hidden",children:jsxRuntimeExports.jsxs(Root.EditForm,{form:h,onDelete:p,onSubmit:f,activeSimulator:!0,children:[jsxRuntimeExports.jsxs(Root.EditStep,{index:0,titleStep:"Informações do chat",children:[jsxRuntimeExports.jsxs(Root.Container,{className:"flex justify-start items-center gap-6",children:[jsxRuntimeExports.jsx(Root.File,{name:"step_0.logo",sizeContainer:"80px"}),jsxRuntimeExports.jsx(Root.Input,{name:"step_0.project_name",title:"Escreva o nome do seu chat"})]}),jsxRuntimeExports.jsx(Root.TextArea,{name:"step_0.chat_input_message.0",title:"Digite a primeira mensagem do seu chat"}),jsxRuntimeExports.jsx(SocialProof,{})]}),jsxRuntimeExports.jsxs(Root.EditStep,{index:1,titleStep:"Configurações do chat",children:[jsxRuntimeExports.jsx(Root.Select,{name:"step_1.prompt_id",options:c.map(E=>Object({value:E.id,text:E.prompt_name})),title:"Selecione sua fonte de dados"}),jsxRuntimeExports.jsx(Root.TextArea,{name:"step_1.bio",title:"Escreva uma descrição para seu chat"}),jsxRuntimeExports.jsx(CallToActionFormChat,{prompts:c})]}),jsxRuntimeExports.jsx(Root.EditStep,{index:2,titleStep:"Aparência do chat",children:jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-col items-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-center text-xl",children:"Escolha um icone para seu chat"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2 md:gap-4 text-5xl",children:CHAT_ICONS_MODELS.map(({Icon:E,id:y},w)=>jsxRuntimeExports.jsx(E,{"data-iscurrent":x-1===w,className:"hover:bg-primary-100 data-[iscurrent=true]:bg-primary-100 cursor-pointer rounded-full p-2",onClick:()=>g(y)},y))})]}),jsxRuntimeExports.jsx(Root.Input,{name:"step_3.chat_appearance.icon_text",title:"Digite o texto que será exibido ao lado do icon"}),jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex",title:"Defina as cores do seu chat",children:[jsxRuntimeExports.jsx(Root.Color,{name:"step_3.chat_appearance.primary_color",title:"Escolha a cor primária do seu chat"}),jsxRuntimeExports.jsx(Root.Color,{name:"step_3.chat_appearance.second_color",title:"Escolha a cor secundária do seu chat"}),jsxRuntimeExports.jsx(Root.Color,{name:"step_3.chat_appearance.background",title:"Escolha a cor do background do seu chat"})]})]})}),jsxRuntimeExports.jsx(Root.EditStep,{index:3,titleStep:"Configuração avançadas",children:jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col items-center p-2",children:[jsxRuntimeExports.jsx(Root.Input,{name:"step_4.slug",title:"Altere a slug do seu chat"}),jsxRuntimeExports.jsx(SimulatorSlugUrl,{}),jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-auto flex flex-col items-center md:items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-medium uppercase",children:"Lembre-se"}),jsxRuntimeExports.jsx("span",{className:"opacity-70 text-center md:text-left",children:"Ao trocar a slug do seu chat, todos seus clientes que possuirem a URL antiga, podem perder acesso ao seu site utilizando a antiga URL."})]})]})})]})})}function CardChat({project:e,setNewProject:s,prompts:a}){const{client:o,setClient:l}=reactExports.useContext(ClientContext),{setModalContent:r}=reactExports.useContext(ModalContext),c=useNavigate(),[m,u]=useSearchParams(),d=async()=>{if(m.get("tour")==="2"&&(m.set("tour","0"),u(m),o)){const f=await updateTutorialClient(o.id,!1);l(f)}r({componentName:"modal_edit_project",components:jsxRuntimeExports.jsx(PopUp,{positionModal:"START",children:jsxRuntimeExports.jsx(ModalEditChat,{setProjects:s,project:e,prompts:a})})})},x=async(f,p)=>{if(!p)return r({componentName:"modal_failed_updated_status_chat",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat",type:"WARNING"})}),!1;const g=await updateIsOnlineProject(f,p);return(g==null?void 0:g.status)===200?(s(j=>(j.find(C=>C.id===g.data.id).is_online=g.data.is_online,j)),!0):(r({componentName:"modal_failed_updated_status_chat_02",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat_02",type:"WARNING"})}),!1)},h=()=>{if(m.set("tour","2"),u(m),!e.slug){r({componentName:"modal_failed_display_link",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao exibir seus links",type:"ERROR",componentName:"modal_failed_display_link"})});return}r({componentName:"modal_display_share_project",components:jsxRuntimeExports.jsx(PopUp,{positionModal:"START",children:jsxRuntimeExports.jsx(ShareProject,{slug:e.slug})})})};return e&&jsxRuntimeExports.jsxs("div",{className:"w-full text-light relative flex flex-col items-center gap-2 cursor-pointer rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center gap-2 p-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-2",children:[jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos acessar seu chat",text:"Clique aqui em cima para obter seu link ou para pegar o código do widget",positionX:"RIGHT",hidden:m.get("tour")==="2"||m.get("tour")==="0",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Veja todos os seus links",children:jsxRuntimeExports.jsx(FaLink,{className:"text-xl",onClick:h})})}),jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos personalizar seu chat",text:"Agora que já viu como funciona, vamos conhecer como podemos deixar ele de acordo com a sua marca!",positionX:window.innerWidth>=768||window.innerWidth<=480?"RIGHT":"CENTER",hidden:m.get("tour")!=="2",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Edite seu chat",children:jsxRuntimeExports.jsx(FaGear,{className:"text-xl",onClick:d})})})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Ative ou desative seu chat",children:jsxRuntimeExports.jsx(ToggleComponent,{isActive:e.is_online,template:"onOff",cb:f=>x(f,e.slug)})})})]}),jsxRuntimeExports.jsx("div",{className:"w-[150px] h-[110px] rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:e.logo||"https://via.placeholder.com/100",alt:"imagem do projeto",className:"w-full h-full object-cover",onClick:()=>window.open(`https://chat.wipzee.com/${e.slug}`)})}),jsxRuntimeExports.jsxs("h2",{className:"text-center py-4 font-bold text-xl flex gap-2 items-center ",onClick:()=>c("/panel?tab=metrics"),children:[jsxRuntimeExports.jsx(FaChartColumn,{}),e.project_name]})]},e.slug)}function MyChats(){const{client:e}=reactExports.useContext(ClientContext),{setModalContent:s}=reactExports.useContext(ModalContext),[a,o]=reactExports.useState(e!=null&&e.plan_management?e.plan_management.project:[]),l=Array(MAX_CONTAINER_TO_CREATE_CHAT).fill(0),r=()=>[s({componentName:"modal_locked_chat",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_locked_chat",message:"Esse slot não está disponível, crie seu chat em um slot disponível ou contrate um plano com mais slot disponível.",type:"WARNING"})})];return e&&jsxRuntimeExports.jsx(Container,{title:"Meus chats",children:jsxRuntimeExports.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 gap-8",children:l.map((c,m)=>{var u,d,x,h;return(u=e.plan_management)!=null&&u.plan&&m<Number(e.plan_management.plan.max_projects.default)?jsxRuntimeExports.jsx("div",{className:"w-[90%] xs:w-1/2 md:w-1/3 lg:w-1/4 md:max-w-[300px] flex justify-center items-center rounded-xl cursor-pointer border border-primary-100 bg-primary-50 dark:bg-primary-300 hover:bg-primary-200 text-light dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:(d=a[m])!=null&&d.id?jsxRuntimeExports.jsx(CardChat,{project:a[m],setNewProject:o,prompts:(x=e.plan_management)==null?void 0:x.prompt},a[m].id):jsxRuntimeExports.jsx(ButtonCreateChat,{plan_management_id:(h=e==null?void 0:e.plan_management)==null?void 0:h.id,projects:a,index:m})},m):jsxRuntimeExports.jsx("div",{className:"w-[90%] xs:w-1/2 md:w-1/3 lg:w-1/4 min-h-[200px] md:max-w-[300px]  flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",onClick:r,children:jsxRuntimeExports.jsx(FaLock,{className:"py-3 text-5xl"})},m)})})})}function ModalColumnOrganization({setColumns:e,columns:s,modalName:a}){const{clearModal:o}=reactExports.useContext(ModalContext),[l,r]=reactExports.useState(s),c=u=>{const d=u.currentTarget.dataset.status=="true",x=u.currentTarget.dataset.name;r(()=>[...s.filter((h,f)=>(f>1&&h.columnName===x&&(h.status=!d),h))])},m=()=>{localStorage.setItem("metricColumnActive",JSON.stringify(s)),e(s),o(a)};return jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 bg-light dark:bg-zinc-800 text-dark dark:text-light",children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-center text-xl p-4",children:"Organize suas columns"}),jsxRuntimeExports.jsx("div",{className:"w-full flex gap-2 flex-col",children:l.map((u,d)=>jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between px-4",children:[jsxRuntimeExports.jsx("p",{children:u.columnName}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsx("div",{className:"w-[30px] h-[20px] bg-zinc-400 dark:bg-zinc-100 flex overflow-hidden rounded-full cursor-pointer",style:{justifyContent:`${u.status?"end":"start"}`},onClick:c,"data-status":u.status,"data-name":u.columnName,children:jsxRuntimeExports.jsx("div",{className:"w-2/3 h-full rounded-xl flex justify-center items-center",style:{background:`${u.status?"green":"red"}`},children:d<2&&jsxRuntimeExports.jsx(FaLock,{className:"w-[8px]"})})})})]},u.columnName))}),jsxRuntimeExports.jsxs("div",{className:"w-full flex mt-12 justify-evenly items-center",children:[jsxRuntimeExports.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:()=>o(a),children:"Fechar"}),jsxRuntimeExports.jsx(Button,{onClick:m,children:"Salvar"})]})]})}function SelectTime({}){const[e,s]=useSearchParams(),a=l=>{const r=formatDate(new Date).currentHour;var c=0;switch(l){case"today":c=r;break;case"yesterday":c=r+24;break;case"last_7_days":c=r+6*24;break;case"last_14_days":c=r+13*24;break;case"last_month":c=r+29*24;break;case"last_3_month":c=r+89*24;break;case"last_6_month":c=r+179*24;break;case"last_year":c=r+364*24;break;default:c=0;break}e.set("filter_time",c.toString()),s(e)},o=()=>{e.delete("filter_time"),s(e)};return jsxRuntimeExports.jsx(Select,{onSelected:a,onDelete:o,title:"Selecione uma data",name:"datetime",options:[{value:"today",text:"Hoje"},{value:"yesterday",text:"Ontem"},{value:"last_7_days",text:"Ultimos 7 dias"},{value:"last_14_days",text:"Ultimos 14 dias"},{value:"last_month",text:"Ultimo mês"},{value:"last_3_month",text:"Ultimos 3 meses"},{value:"last_6_month",text:"Ultimos 6 meses"},{value:"last_year",text:"Ultimo ano"}]})}function eventManager(e,s=0){function a(){var p;return((p=e.metric)==null?void 0:p.chat_event.reduce((g,j)=>{const C=j.open_chat.filter(_=>{const N=convertDateInHour(_.created_at);return s>0?N<=s:!0});return g+C.length},0))||0}function o(){var g;return(((g=e.metric)==null?void 0:g.chat_event.filter(j=>{const C=convertDateInHour(j.created_at);return s>0?C<=s:!0}))||[]).filter((j,C,_)=>C===_.findIndex(N=>N.guest_id===j.guest_id)).length}function l(){return e.message_manager.map(p=>p.messages.filter(j=>{const C=convertDateInHour(j.time);return s>0?C<=s:!0})).flat().filter(p=>p.player==="user").length}function r(){return e.message_manager.map(p=>p.messages.filter(j=>{const C=convertDateInHour(j.time);return s>0?C<=s:!0})).flat().filter(p=>p.player==="assistant").length}function c(){const f=l()+r(),p=o()>0?f/o():0;return p%1===0?p:Number(p.toFixed(1))}function m(){var _;const f=(_=e.metric)==null?void 0:_.chat_event.reduce((N,R)=>{const E=R.chat_time.filter(y=>{const w=convertDateInHour(y.created_at);return s>0?w<=s:!0});return N+E.reduce((y,w)=>{if(!w.closed_at&&!w.created_at)return 0;const b=Number(new Date(w.closed_at))-Number(new Date(w.created_at));return y+b},0)},0),p=Math.floor(f/1e3),g=Math.floor(p/60);return`${Math.floor(g/60).toString().padStart(2,"0")}:${(g%60).toString().padStart(2,"0")}:${(p%60).toString().padStart(2,"0")}`}function u(){var N;const f=(N=e.metric)==null?void 0:N.chat_event.reduce((R,E)=>{const y=E.chat_time.filter(w=>{const b=convertDateInHour(w.created_at);return s>0?b<=s:!0});return R+y.reduce((w,b)=>{if(!b.closed_at&&!b.created_at)return 0;const A=Number(new Date(b.closed_at))-Number(new Date(b.created_at));return w+A},0)},0),p=f>0?f/o():0,g=Math.floor(p/1e3),j=Math.floor(g/60),C=Math.floor(j/60),_=`${C.toString().padStart(2,"0")}:${(j%60).toString().padStart(2,"0")}:${(g%60).toString().padStart(2,"0")}`;return C!==1/0?_:"00:00:00"}function d(){var p;const f=(p=e.metric)==null?void 0:p.button_event.filter(g=>{const j=convertDateInHour(g);return s>0?j<=s:!0},0);return(f==null?void 0:f.reduce((g,j)=>g+j.clicked_button.length,0))||0}function x(){return e.message_manager.map(p=>p.lead_collected).flat().length}function h(){return formatDate(e.created_at).dateFormat_A}return{IS_ONLINE:e.is_online||!1,NAME:e.project_name,CAT:a(),CAU:o(),MESSAGE_INPUT:l(),MESSAGE_OUTPUT:r(),MESSAGES_TOTAL:l()+r(),MEDIA_MESSAGES_CHAT:c(),USAGE_TIME:m(),MEDIA_USAGE_TIME:u(),CREATED_AT:h(),LINK_CLICKS:d(),LEADS_COLLECTED:x(),SERVICE_NOTE:0,RESOLUTION_RATE:0}}async function analizyDataWithArtifialIntelligence(e){return await axios.post(`${API_URL}/analyze_metric`,{prompt:e}).catch(a=>console.warn(a))}function formatTextAI(e){const s=e.split("");let a="";return s.forEach(o=>{o.includes(`
`)&&a.length||o.includes(":")?a+=o+"<br />":a+=o}),a}async function createMetricAnalysis(e,s){const a=await axios.post(`${API_URL}/metric_analysis/create`,{plan_management_id:e,result:s});if(a.data.error)throw new Error("Unable to create the Metric Analysis.");return a}async function sendFeedbackMetricAnalysis({feedback:e,metrics_analysis_rating:s,metric_analysis_id:a}){const o=await axios.post(`${API_URL}/metric_analysis/create_feedback`,{feedback:e,metrics_analysis_rating:s,metric_analysis_id:a});if(o.data.error)throw new Error("Unable to create the Feedback Metric Analysis.");return o}async function getMetricAnalysis(e){const s=await axios.get(`${API_URL}/metric_analysis/${e}`);if(s.status===400)throw new Error("Unable to create the Feedback Metric Analysis.");return s}function ModalFeedbackAnalyze({index:e,spanReview:s,metric_analysis_id:a}){const o=reactExports.useRef(null),{setModalContent:l,clearModal:r}=reactExports.useContext(ModalContext),c=async()=>{var u;const m=(u=o.current)==null?void 0:u.value;m&&a?(await sendFeedbackMetricAnalysis({feedback:m,metrics_analysis_rating:e,metric_analysis_id:a})).data.response&&l({componentName:"modal_send_success",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_send_success",message:"Feedback enviado com sucesso. Obrigado!",functionAfterComplete:()=>r(null,{clearLast:!0})})}):l({componentName:"modal_error_send_feedback",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_send_feedback",message:"Você precisa deixar um feedback antes de enviar sua avaliação ou houve um erro no envio do feedback!",type:"ERROR"})})};return jsxRuntimeExports.jsxs("div",{className:"w-[300px] flex flex-col items-center gap-2 p-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-center font-bold text-lg",children:['Sua avaliação foi "',s,'".']}),jsxRuntimeExports.jsx("p",{className:"text-center opacity-80",children:"Gostaria de deixar um feedback em algo poderia melhorar?"}),jsxRuntimeExports.jsx("textarea",{ref:o}),jsxRuntimeExports.jsx(Button,{customClass:"my-4",onClick:c,children:"Enviar"})]})}var prompt=`
 A wipzee é uma empresa que fornece um chatbot com inteligencia artificial, promovendo uma experiência completa ao usuário.
 Desda personalização do chat até o consumo de dados (Métricas), abaixo será informado as métricas do usuário, quero que você faça uma analise
 completa e sugira melhorias ou de feedbacks positivos sobre as métricas.

 exemplo 1: 
    se tiver muitos chats abertos e nenhum clique no link, significa que o cliente não está sendo influenciado a clicar no link. 
    Sugestão: "Mudar o texto do link e deixar mais atrativo ou melhorar sua fonte de dados."
 exemplo 2: 
    se tiver muitos chats abertos e nenhuma ou poucas mensagens, significa que o cliente não está sentindo avontade de conversar com a IA ou não está conseguindo conversar com ela. 
    Sugestão: Melhorar a primeira mensagem do chat ou ver se existe algum problema tecnico nas trocas de mensagens."
`;function AnalyzeMetric(){const{clearModal:e,setModalContent:s}=reactExports.useContext(ModalContext),{client:a}=reactExports.useContext(ClientContext),[o,l]=reactExports.useState(),r=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{var u;if(a){const x=(await getMetricAnalysis((u=a.plan_management)==null?void 0:u.id)).data.response,h=a.plan_management.plan.max_analyze_metric.default,f=a.plan_management.plan.max_analyze_metric.bonus,p=Number(h+f);x.length?l({status:"APRROVED",analysis:x}):p>0&&x.length<=p?c():s({componentName:"modal_limit_analysis",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_limit_analysis",message:Number(a.plan_management.plan.monthly_price)>0?"O limite de analises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.":"Não é possivel analisar métricas no plano gratuito, mude de plano ou entre em contato com o suporte.",functionAfterComplete:()=>e(null,{clearAll:!0})})})}})()},[]);const c=()=>{if(o&&a&&(o==null?void 0:o.analysis.length)>=Number(a.plan_management.plan.max_analyze_metric.default)){s({componentName:"modal_max_limit_analysis",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_max_limit_analysis",message:"O limite de análises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.",type:"WARNING"})});return}if(l(null),!a)throw new Error("Client is missing!");const u=a.plan_management.project,d=formatDate(new Date).currentHour;u&&u.forEach(x=>{prompt+=`
                    NOME DO CHAT: ${x.project_name}
                    
                    MÉTRICAS:

                    Chats abertos total:
                    (Essa métrica pode tanto ser tanto varios usuários abrindo um chat ou como pode ser o mesmo usuário abrindo ele varias vezes)
                    [1000]

                    Chats abertos:
                    (Essa métrica conta quantas vezes o usuário abriu o chat, caso o usuário abra o mesmo chat 2 vezes ou mais, será contabilizado apenas uma vez)
                    [1]

                    Quando o chat foi criado:  
                    (Essa métrica registra quando o chat foi criado)
                    [${eventManager(x,d).CREATED_AT}]

                    chat está ativado ou desativado:  
                    (Informa se o chat está ativado ou não: true = ativado e false = desativado)
                    [${eventManager(x,d).IS_ONLINE}]

                    Leads coletados:  
                    (Informa quantos usuários deixaram um contato salvo no sistema)
                    [${eventManager(x,d).LEADS_COLLECTED}]

                    Cliques no link:  
                    (Informa quantos cliques no link(call to action) foi dado no chat)
                    [100]

                    Média de mensagens:  
                    (Informa qual a média de mensagens por chat)
                    [${eventManager(x,d).MEDIA_MESSAGES_CHAT}]

                    Média de tempo de uso:  
                    (Informa qual a média que o usuário ficou interagindo no chat)
                    [${eventManager(x,d).MEDIA_USAGE_TIME}]

                    Total de Mensagens:  
                    (Informa qual o total de mensagens que esse chat tem)
                    [${eventManager(x,d).MESSAGES_TOTAL}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${eventManager(x,d).MESSAGE_INPUT}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${eventManager(x,d).MESSAGE_OUTPUT}]

                    Saída de Mensagens:  
                    (Informa quantas mensagens nossa inteligencia artificial já mandou para esse chat)
                    [${eventManager(x,d).MESSAGE_OUTPUT}]

                    tempo de uso:  
                    (Informa quanto tempo esse chat já ficou aberto)
                    [${eventManager(x,d).USAGE_TIME}]`}),(async()=>{const x=await analizyDataWithArtifialIntelligence(prompt);if((x==null?void 0:x.status)===200&&x.data){const{text:h}=x.data.choices[0],f=await createMetricAnalysis(a==null?void 0:a.plan_management.id,h);l({status:"APRROVED",analysis:f.data.response})}else s({componentName:"modal_error_analyze_metric",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_analyze_metric",message:"Não foi possível analisar suas métricas, por favor tente mais tarde.",type:"ERROR"})})})()},m=u=>{var d,x;if(o!=null&&o.analysis[0].feedback)s({componentName:"modal_error_analysis_metric",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_analysis_metric",message:"Essa análise já foi avaliada!",type:"WARNING"})});else{const h=u.currentTarget.tabIndex,f=((d=u.currentTarget.querySelector("span"))==null?void 0:d.textContent)||"Regular",p=(x=r.current)==null?void 0:x.querySelectorAll("div > svg");p==null||p.forEach(g=>g.classList.remove("fill-primary-100")),p==null||p.forEach((g,j)=>j+1<=h&&g.classList.add("fill-primary-100")),s({componentName:"modal_show_feedback_analyze",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(ModalFeedbackAnalyze,{index:h,spanReview:f,metric_analysis_id:o==null?void 0:o.analysis[0].id})})})}};return o?jsxRuntimeExports.jsxs("div",{className:"w-full md:max-w-[600px] min-w-[400px] flex flex-col items-center gap-4 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Relatório da análise"}),jsxRuntimeExports.jsxs("span",{className:"opacity-70",children:[o.analysis.length,"/",Number(a==null?void 0:a.plan_management.plan.max_analyze_metric.default)," Análises restantes de hoje"]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-[300px] overflow-auto border border-primary-100 p-2",children:jsxRuntimeExports.jsx("p",{dangerouslySetInnerHTML:{__html:formatTextAI(o.analysis[0].result)},className:"text-center"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full items-center my-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Avalie essa análise:"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",ref:r,children:Array.from({length:5}).map((u,d)=>jsxRuntimeExports.jsxs("div",{tabIndex:d+1,onClick:m,className:"group flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx(MdStar,{"data-isselected":d+1<=o.analysis[0].metrics_analysis_rating,className:"cursor-pointer text-3xl hover:fill-primary-100 data-[isselected=true]:fill-primary-100"}),jsxRuntimeExports.jsx("span",{className:"group-hover:opacity-100 opacity-0",children:d===0?"horrível":d===1?"ruim":d===2?"regular":d===3?"boa":"excelente"})]},d))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-8 justify-center items-center",children:[jsxRuntimeExports.jsx("span",{onClick:()=>e(null,{clearLast:!0}),className:"underline opacity-80 my-4 cursor-pointer",children:"Fechar análise"}),jsxRuntimeExports.jsx(Button,{onClick:c,children:"Nova análise"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4 p-4","data-loading":!0,children:[jsxRuntimeExports.jsx("h2",{children:"Analisando métricas"}),jsxRuntimeExports.jsx("span",{children:"Carregando..."})]})}function OptionsTable({client:e,handleRequestDataProject:s,setColumns:a,columns:o}){const{setModalContent:l}=reactExports.useContext(ModalContext),r=async({currentTarget:u})=>{if(e!=null&&e.plan_management){const d=u.querySelector("svg");d.classList.add("rotate-[-360deg]","transition-transform","duration-1000"),s(e==null?void 0:e.id);const x=setTimeout(()=>{d.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(x)},1e3)}},c=()=>{l({componentName:"modal_organization_column",components:jsxRuntimeExports.jsx(ModalColumnOrganization,{modalName:"modal_organization_column",setColumns:a,columns:o})})},m=()=>{l({componentName:"modal_show_analyze_metric",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(AnalyzeMetric,{})})})};return jsxRuntimeExports.jsxs("div",{className:"w-full md:w-[70vw] px-4 flex flex-row-reverse md:flex-row flex-wrap lg:flex-nowrap gap-4 lg:gap-8 justify-center lg:justify-end items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-1/5 md:w-auto p-2 flex justify-center bg-light dark:bg-dark border border-primary-100 rounded-md cursor-pointer",onClick:r,children:jsxRuntimeExports.jsx(FaArrowRotateLeft,{className:"text-xl fill-primary-100 dark:fill-light"})}),jsxRuntimeExports.jsx("div",{className:"w-[74%] md:w-auto h-[40px]",children:jsxRuntimeExports.jsx(SelectTime,{})}),jsxRuntimeExports.jsxs(Button,{onClick:c,customClass:"w-full md:w-auto bg-light dark:bg-dark text-primary-100 dark:text-light border border-primary-100 px-4",children:[" ",jsxRuntimeExports.jsx(FaBorderAll,{className:"text-xl fill-primary-100 dark:fill-light"})," Colunas"]}),jsxRuntimeExports.jsxs(Button,{customClass:"w-full md:w-auto px-2 bg-primary-100 border border-primary-100",onClick:m,children:[" ",jsxRuntimeExports.jsx(BsStars,{className:"text-xl"})," Análise de métrica com IA"]})]})}const defaultColumns=[{key:"IS_ONLINE",columnName:"Status",status:!0,dataType:"boolean",size:80},{key:"NAME",columnName:"Nome do chat",status:!0,dataType:"string",size:170},{key:"CAT",columnName:"Chats abertos (total)",status:!0,dataType:"number",size:200},{key:"CAU",columnName:"Chats abertos (unico)",status:!1,dataType:"number",size:200},{key:"MESSAGE_INPUT",columnName:"Mensagens de entrada",status:!1,dataType:"number",size:180},{key:"MESSAGE_OUTPUT",columnName:"Mensagens de saída",status:!1,dataType:"number",size:170},{key:"MESSAGES_TOTAL",columnName:"Mensagens total",status:!0,dataType:"number",size:170},{key:"MEDIA_MESSAGES_CHAT",columnName:"Mensagens por chat",status:!1,dataType:"number",size:220},{key:"USAGE_TIME",columnName:"Tempo de uso",status:!1,dataType:"string",size:170},{key:"MEDIA_USAGE_TIME",columnName:"Tempo de uso por chat",status:!0,dataType:"string",size:230},{key:"LINK_CLICKS",columnName:"Cliques no link",status:!0,dataType:"number",size:150},{key:"LEADS_COLLECTED",columnName:"Leads coletados",status:!0,dataType:"number",size:170},{key:"CREATED_AT",columnName:"Criado em",status:!0,dataType:"string",size:150}];function HeaderTableMetric({setColumns:e,columns:s}){return reactExports.useEffect(()=>{const a=JSON.parse(localStorage.getItem("metricColumnActive")||"[]");a.length>0?(a.length!==defaultColumns.length&&localStorage.setItem("metricColumnActive",JSON.stringify(defaultColumns)),a.status?e(a):localStorage.setItem("metricColumnActive",JSON.stringify(defaultColumns))):localStorage.setItem("metricColumnActive",JSON.stringify(defaultColumns))},[]),s&&jsxRuntimeExports.jsx("div",{className:"w-1/2 flex",children:s.map(a=>a.status&&jsxRuntimeExports.jsx("span",{style:{width:`${a.size}px`},className:"flex-none p-3 overflow-hidden whitespace-nowrap text-ellipsis text-sm font-bold uppercase text-center bg-primary-100 dark:bg-primary-300 text-light dark:text-primary-100 border-r border-r-light dark:border-r-primary-100",children:a.columnName},a.columnName))})}function TableMetric({columns:e,setColumns:s,planManagement:a}){const[o]=useSearchParams(),l=o.get("filter_time_metric");return jsxRuntimeExports.jsxs("div",{className:"w-[95%] md:w-[70vw] md:h-[40vh] self-center rounded-xl overflow-x-auto",children:[jsxRuntimeExports.jsx(HeaderTableMetric,{setColumns:s,columns:e}),jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:a!=null&&a.project.length?a.project.map(r=>jsxRuntimeExports.jsx("div",{className:"flex-none flex",children:e.map((c,m)=>c.status&&jsxRuntimeExports.jsx("span",{style:{width:`${c.size}px`},className:"flex-none text-ellipsis overflow-hidden whitespace-nowrap text-center border border-primary-100/30 p-2",children:m===0?jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-center items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`w-[8px] h-[8px] ${r.is_online?"bg-green-700":"bg-red-700"} rounded-full`}),jsxRuntimeExports.jsx("span",{children:r.is_online?"Ativo":"Desativado"})]}):m===1?r.project_name:eventManager(r,l)[c.key]},c.columnName))},r.id)):jsxRuntimeExports.jsx("h2",{className:"text-center p-4 text-xs",children:'Você não tem nenhuma chat criado, clique em "Meus chats" , depois criar "Novo chat".'})}),jsxRuntimeExports.jsx("div",{"data-hasproject":!!(a!=null&&a.project.length),className:"flex-none flex data-[hasproject]:hidden",children:e.map((r,c)=>r.status&&jsxRuntimeExports.jsx("div",{style:{width:`${r.size}px`},className:"flex-none p-2 flex justify-center items-center gap-2",children:c===1?jsxRuntimeExports.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:"TOTAL"}):r.dataType==="number"?jsxRuntimeExports.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:a==null?void 0:a.project.reduce((m,u)=>m+Number(eventManager(u,l)[r.key]),0)}):jsxRuntimeExports.jsx("span",{className:"w-full text-primary-100 text-xl text-center",children:"-"})},r.key))})]})}function Metric(){const e=JSON.parse(localStorage.getItem("metricColumnActive")||"[]"),{setModalContent:s}=reactExports.useContext(ModalContext),{client:a}=reactExports.useContext(ClientContext),[o,l]=reactExports.useState(e),[r,c]=reactExports.useState(a==null?void 0:a.plan_management);reactExports.useEffect(()=>{a!=null&&a.plan_management&&m(a==null?void 0:a.id)},[]);const m=async u=>{const d=await getClientById(u);(d==null?void 0:d.status)===200?c(d.data.plan_management):s({componentName:"modal_failed_load_metric",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao recarregar as métricas, tente reiniciar a página.",type:"ERROR",componentName:"modal_failed_load_metric"})})};return jsxRuntimeExports.jsxs(Container,{title:"Métricas",className:"flex-col items-center gap-2 md:gap-8",children:[jsxRuntimeExports.jsx(OptionsTable,{client:a,columns:o,handleRequestDataProject:m,setColumns:l}),jsxRuntimeExports.jsx(TableMetric,{columns:o,planManagement:r,setColumns:l})]})}function ButtonCreateNewDatabase({plan_management_id:e,index:s}){const{client:a}=reactExports.useContext(ClientContext),{setModalContent:o}=reactExports.useContext(ModalContext),l=useNavigate(),r=()=>{if(a!=null&&a.plan_management){const c=Number(a.plan_management.plan.max_databases.default),m=a.plan_management.prompt.length;a.plan_management.status!=="DISABLED"?c>m?l(`/create-database/${e}`):o({componentName:"modal_max_database",components:jsxRuntimeExports.jsx(PopOver,{message:"Você atingiu o número maximo de base de dados no seu plano.",componentName:"modal_max_database"})}):o({componentName:"modal_desactive_account",components:jsxRuntimeExports.jsx(PopOver,{message:"O plano da sua conta está desabilitado.",componentName:"modal_desactive_account"})})}else o({componentName:"modal_without_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan"})})};return jsxRuntimeExports.jsx("div",{className:"w-full rounded-xl border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-white dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20 flex justify-center",onClick:r,children:jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos criar sua primeira fonte de dados",text:"Clique em <span class='font-medium text-2xl mx-1'>+</span> para criar sua primeira fonte de dados.",positionX:window.innerWidth>680?"RIGHT":"CENTER",hidden:s!==0,children:jsxRuntimeExports.jsx(TipContainer,{tip:"Criar fonte de dados",children:jsxRuntimeExports.jsx(FaPlus,{className:"text-5xl py-3 fill-light dark:fill-primary-100"})})})})}function ModalEditDatabase({prompt:e,setPrompts:s}){const{setModalContent:a,clearModal:o}=reactExports.useContext(ModalContext),{client:l,setClient:r}=reactExports.useContext(ClientContext),c=JSON.parse(e.prompt_query||"{}"),m=!!Object.keys(c).length,u=useForm({resolver:zodResolver(databaseSchema),defaultValues:m?{step_0:{products:c.step_0.products||"",observation:c.step_0.observation},step_1:{payment_methods:c.step_1.payment_methods||[],credit_card_installments:c.step_1.credit_card_installments||"",order_tracking:c.step_1.order_tracking||"",tracking_link:c.step_1.tracking_link||""},step_2:{warranty_time:c.step_2.warranty_time||{time:0,type:""},how_exchanges_work_and_returns:c.step_2.how_exchanges_work_and_returns||"",how_guarantee_work:c.step_2.how_guarantee_work||""},step_3:{address:c.step_3.address||"",company_name:c.step_3.company_name||"",contact_email:c.step_3.contact_email||"",contact_phone_number:c.step_3.contact_phone_number||"",support_hours:c.step_3.support_hours||""},step_4:{client_describe:c.step_4.client_describe||"",ia_name:c.step_4.ia_name||"",restrictions:c.step_4.restrictions}}:void 0}),d=async h=>{const f=JSON.stringify(h),p=transformSchemaInText(h),g={prompt_name:e.prompt_name,prompt:p,prompt_query:f,client_describe:h.step_4.client_describe};if(g){const j=await updateDatabase(g,e.id);j&&l&&j.status===200&&(h.step_0.products.forEach(async C=>{await saveImage({client_id:l.id,prompt_id:e.id,url:C.image.url,description:C.image.description})}),s(C=>[...C.filter(_=>_.id!==j.data.id),j.data]),a({componentName:"modal_updated_database",components:jsxRuntimeExports.jsx(PopOver,{message:"Database atualizado com sucesso",componentName:"modal_updated_database",functionAfterComplete:()=>o(null,{clearAll:!0})})}))}};async function x(){if(e.id){const h=await daleteDatabase(e.id);if((h==null?void 0:h.status)===200){s(p=>p.filter(g=>g.id!==h.data.id));const f=l==null?void 0:l.plan_management.prompt.findIndex(p=>p.id===e.id);l&&typeof f=="number"&&(l.plan_management.prompt.splice(f,1),r(l)),a({componentName:"modal_delete_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Fonte de dados excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>o(null,{clearAll:!0})})})}else(h==null?void 0:h.status)===500?a({componentName:"modal_failed_delete_database",components:jsxRuntimeExports.jsx(PopOver,{message:"Você não pode excluir uma fonte de dados que possui um chat vinculado a ela, tente excluir todos os chats primeiro, antes de excluir essa fonte de dados.",type:"ERROR",componentName:"modal_failed_delete_database"})}):a({componentName:"modal_failed_delete",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao tentar excluir essa fonte de dados. Tente reiniciar a página e tentar de novo.",type:"ERROR",componentName:"modal_failed_delete"})})}}return jsxRuntimeExports.jsx("div",{className:"w-screen h-screen px-4 md:px-0 md:w-[90vw] md:h-[80vh] md:min-h-[450px] md:min-w-[700px] flex items-start overflow-hidden",children:jsxRuntimeExports.jsxs(Root.EditForm,{form:u,onDelete:x,onSubmit:d,children:[jsxRuntimeExports.jsxs(Root.EditStep,{index:0,titleStep:"Informações do produto",icon:jsxRuntimeExports.jsx(FaCircleInfo,{}),children:[jsxRuntimeExports.jsx(AddProduct,{}),jsxRuntimeExports.jsx(Root.Optional,{text:"Deseja adicionar alguma observação sobre seus produtos?",name:"step_0.observation",children:jsxRuntimeExports.jsx(Root.TextArea,{name:"step_0.observation",title:"Deixe uma observação sobre seus produtos"})})]}),jsxRuntimeExports.jsx(Root.EditStep,{index:1,titleStep:"Métodos de pagamento",icon:jsxRuntimeExports.jsx(FaInfo,{}),children:jsxRuntimeExports.jsx(StepPaymentMethodAndConditions,{})}),jsxRuntimeExports.jsxs(Root.EditStep,{index:2,titleStep:"Politicas e condições",icon:jsxRuntimeExports.jsx(FaBook,{}),children:[jsxRuntimeExports.jsxs(Root.Container,{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Root.Select,{name:"step_2.warranty_time.type",title:"Tipo de data",options:[{text:"Dia(s)",value:"dia"},{text:"Mês(s)",value:"mes"},{text:"Ano(s)",value:"ano"}]}),jsxRuntimeExports.jsx(Root.Input,{type:"number",name:"step_2.warranty_time.time",title:"Tempo de garantia?"})]}),jsxRuntimeExports.jsx(Root.TextArea,{name:"step_2.how_guarantee_work",title:"Como funciona a garantia?"}),jsxRuntimeExports.jsx(Root.Optional,{name:"step_2.how_exchanges_work_and_returns",text:"Esse produto/serviço possui trocas e devoluções?",children:jsxRuntimeExports.jsx(Root.TextArea,{name:"step_2.how_exchanges_work_and_returns",title:"Como funciona as trocas e devoluções?"})})]}),jsxRuntimeExports.jsxs(Root.EditStep,{index:3,titleStep:"Sobre a empresa",icon:jsxRuntimeExports.jsx(FaSuitcase,{}),children:[jsxRuntimeExports.jsx(Root.Container,{className:"flex gap-4",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_3.company_name",title:"Qual o nome da empresa?"})}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsx(Root.Input,{name:"step_3.contact_email",title:"Digite um e-mail para contato"}),jsxRuntimeExports.jsx(Root.Input,{title:"Digite um telefone para contato",name:"step_3.contact_phone_number",onChange:({target:h})=>{const f=h.value.replace(/[^\d]/g,"");if(f.length<11){let p;f.length===11?p=f.replace(/^(\d{2})(\d{1})(\d{4})(\d{4})$/,"($1) $2 $3-$4"):p=f.replace(/^(\d{2})(\d{4})(\d{4})$/,"($1) $2-$3"),h.value=p}else h.value=h.value.substring(0,15)}})]}),jsxRuntimeExports.jsx(OpeningHours,{}),jsxRuntimeExports.jsx(Root.Optional,{name:"step_3.address",text:"Sua empresa possui um endereço físico?",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_3.address",title:"Qual o endereço da sua empresa?"})})]}),jsxRuntimeExports.jsxs(Root.EditStep,{index:4,titleStep:"Personalidade da IA ",icon:jsxRuntimeExports.jsx(FaFaceGrinBeam,{}),children:[jsxRuntimeExports.jsx(Root.Optional,{name:"step_4.ia_name",text:"Deseja dar um nome a sua inteligência artificial?",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_4.ia_name",title:"Qual o nome da sua inteligência artificial?"})}),jsxRuntimeExports.jsx(Root.Optional,{text:"Deseja adicionar restrições de palavras ou frase?",name:"step_4.restrictions",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_4.restrictions",title:"Faça uma lista de restrições para que a IA evite utiliza-la em uma conversa"})}),jsxRuntimeExports.jsx(Root.TextArea,{title:"Faça uma breve descrição de quem é seu público (cliente)",name:"step_4.client_describe"})]})]})})}function MyDatabases(){var u;const{client:e}=reactExports.useContext(ClientContext),{setModalContent:s,clearModal:a}=reactExports.useContext(ModalContext),o=Array(MAX_CONTAINER_TO_CREATE_DATABASE).fill(0),[l,r]=reactExports.useState(((u=e==null?void 0:e.plan_management)==null?void 0:u.prompt)||[]),c=d=>{l!=null&&l.length&&s({componentName:"modal_create_database",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(ModalEditDatabase,{prompt:l[d],setPrompts:r})})})},m=d=>{async function x(h){h.preventDefault();const f=h.target.querySelector("input").value,p=l[d].id;if(f){const g=await updateDatabaseName(f,p);(g==null?void 0:g.status)===200&&(r([...l,l[d].prompt_name=f]),s({componentName:"modal_saved",components:jsxRuntimeExports.jsx(PopOver,{message:"Nome da sua base de dados foi atualizado com sucesso!",componentName:"modal_saved",functionAfterComplete:()=>a(null,{clearAll:!0})})}))}}s({componentName:"modal_edit_name",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center gap-4 p-4",children:[jsxRuntimeExports.jsx("h2",{children:"Digite o novo nome da sua fonte de dados:"}),jsxRuntimeExports.jsxs("form",{onSubmit:x,className:"flex flex-col justify-center items-center gap-4",children:[jsxRuntimeExports.jsx("input",{placeholder:"Ex: Minha nova base de dados",name:"database_name",defaultValue:l[d].prompt_name}),jsxRuntimeExports.jsx(Button,{children:"Salvar"})]})]})})})};return e&&jsxRuntimeExports.jsx(Container,{title:"Fonte de dados",children:jsxRuntimeExports.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 my-12 gap-8",children:o.map((d,x)=>{var h,f,p,g,j;return(h=e.plan_management)!=null&&h.plan&&x<Number(e.plan_management.plan.max_databases.default)?jsxRuntimeExports.jsx("div",{"data-prompt":!!((f=l[x])!=null&&f.prompt_name),className:"w-full max-w-[300px] flex justify-center items-center  cursor-pointer",children:(p=l[x])!=null&&p.prompt_name?jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-2 items-center justify-center rounded-xl border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-white dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:[jsxRuntimeExports.jsxs("h2",{className:"w-[200px] text-center py-4 flex justify-center items-center gap-2",onClick:()=>c(x),children:[jsxRuntimeExports.jsx(FaDatabase,{}),jsxRuntimeExports.jsx("span",{className:"w-full whitespace-nowrap text-ellipsis overflow-x-hidden",children:(g=l[x])==null?void 0:g.prompt_name})]}),jsxRuntimeExports.jsx(MdEdit,{className:"cursor-text ",onClick:()=>m(x)})]}):jsxRuntimeExports.jsx(ButtonCreateNewDatabase,{plan_management_id:e.plan_management.id,index:x})},x):jsxRuntimeExports.jsx("div",{"data-prompt":!!((j=l[x])!=null&&j.prompt_name),className:"w-full max-w-[300px] flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:jsxRuntimeExports.jsx(FaLock,{className:"py-3 text-5xl"})},x)})})})}function ListChats({chats:e,setIndex:s}){const[a,o]=useSearchParams(),l=a.get("mobile_modal_select_chat")==="open",r=c=>{a.delete("mobile_modal_select_chat"),o(a),s(c)};return!!e.length&&jsxRuntimeExports.jsx("div",{"data-isopen":window.innerWidth<768?!!l:!0,className:"w-full md:w-[400px] md:max-h-[400px] fixed md:static top-0 md:bg-transparent left-0 h-full overflow-auto flex flex-col border-r border-light/40 data-[isopen=false]:hidden",children:e.map((c,m)=>c.messages.length>1&&jsxRuntimeExports.jsxs("div",{className:"w-full cursor-pointer hover:bg-primary-200 transition-colors p-4 border border-primary-100/20",onClick:()=>r(m),children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap text-ellipsis overflow-hidden py-1 text-xl font-bold",children:c.messages.length>1?c.messages[1].message.replace("<br/>",""):`Chat ${m.toString().padStart(2,"0")}`},c.messages.join()),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"italic text-xs",children:[c.messages.length," messagens"]}),jsxRuntimeExports.jsx("span",{className:"italic text-xs",children:formatDate(c.messages[c.messages.length-1].time).dateFormat_A})]})]},c.id))})}function ContentChats({messageManager:e,index:s}){var d;const{client:a}=reactExports.useContext(ClientContext),[o,l]=reactExports.useState(),[r,c]=useSearchParams(),m=[...e[s].historic_messages,...e[s].messages];reactExports.useEffect(()=>{var x;if(e.length){const h=(x=a==null?void 0:a.plan_management.project.find(j=>e&&j.id===j.id))==null?void 0:x.logo,f=a==null?void 0:a.plan_management.project.find(j=>e&&j.id===j.id),p=f==null?void 0:f.project_name,g=f==null?void 0:f.message_manager.map(j=>j.lead_collected).flat();h&&p&&l({logoChat:h,projectName:p,leads:g})}},[]);const u=()=>{const x=o==null?void 0:o.projectName.replaceAll(" ","_");x&&r.set(FILTER_BY_PROJECT_NAME_URL,x),r.set(TAB_NAME_URL,"leads"),c(r)};return jsxRuntimeExports.jsx("div",{className:"w-full h-full flex flex-col mb-8 md:mb-0",children:jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full h-[60px] flex justify-between items-center px-4 bg-primary-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-[50px] h-[50px] overflow-hidden rounded-full",children:jsxRuntimeExports.jsx("img",{src:o==null?void 0:o.logoChat,alt:"logo do cliente",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx("p",{className:"px-4 text-xl text-light",children:o==null?void 0:o.projectName})]}),jsxRuntimeExports.jsx(TipContainer,{tip:"Leads coletados",positionX:"LEFT",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center cursor-pointer",onClick:u,children:[jsxRuntimeExports.jsx(MdLeaderboard,{}),(d=o==null?void 0:o.leads)==null?void 0:d.filter(x=>x.email||x.name||x.cell_phone&&x).length]})})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-full max-h-[400px] p-4 flex flex-col gap-4 overflow-auto",children:(m==null?void 0:m.map((x,h)=>jsxRuntimeExports.jsx("div",{"data-player":x.player,className:"w-full flex data-[player='user']:justify-end justify-start",children:jsxRuntimeExports.jsxs("div",{"data-player":x.player,className:"max-w-[80%] bg-primary-100/50 dark:bg-light text-black/80 data-[player='user']:bg-primary-100 dark:data-[player='user']:bg-primary-200 data-[player='user']:text-light p-2 rounded-xl",children:[jsxRuntimeExports.jsx("h2",{dangerouslySetInnerHTML:{__html:x.message}}),jsxRuntimeExports.jsx("span",{className:"w-full flex justify-end text-xs italic",children:formatDate(x.time).shortHour})]})},h)))||jsxRuntimeExports.jsx("h2",{className:"w-full h-[200px] flex justify-center items-center",children:"Ainda não existe nenhuma conversa para esse chat"})})]})})}function ConversationHistoric(){var f;const{client:e}=reactExports.useContext(ClientContext),[s,a]=useSearchParams(),[o,l]=reactExports.useState(0),[r,c]=reactExports.useState([]),m=(f=e==null?void 0:e.plan_management)==null?void 0:f.project.map(p=>({id:p.project_name.replace(" ","_"),value:p.project_name,text:p.project_name}));reactExports.useEffect(()=>{const p=s.get("filter_time"),g=s.get("project");if(e&&m!=null&&m.length){let j;g?j=e.plan_management.project.filter(_=>_.project_name.replaceAll(" ","_")===g&&_):j=e.plan_management.project;const C=j.map(_=>_.message_manager.filter(R=>Number(p)?convertDateInHour(R.created_at)<=Number(p):!0)).flat();c(C)}},[s]);const u=p=>{s.set("project",p.replaceAll(" ","_")),a(s)},d=async({currentTarget:p})=>{if(e!=null&&e.plan_management){const g=p.querySelector("svg");g.classList.add("rotate-[-360deg]","transition-transform","duration-1000");const j=setTimeout(()=>{g.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(j)},1e3)}},x=()=>{s.append("mobile_modal_select_chat","open"),a(s)},h=()=>{s.delete("project"),a(s)};return jsxRuntimeExports.jsxs(Container,{title:"Conversas",className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-[90%] flex flex-col-reverse md:flex-row md:justify-end gap-2 md:gap-8 md:h-[40px] px-4 md:px-0",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione um chat",children:jsxRuntimeExports.jsx(Select,{name:"select_chat",title:"Selecione um chat",options:m||[],onSelected:u,onDelete:h})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-8 justify-between",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione uma data  como filtro",children:jsxRuntimeExports.jsx(SelectTime,{})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Atualize seus chats",positionX:"LEFT",children:jsxRuntimeExports.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",onClick:d,children:jsxRuntimeExports.jsx(FaArrowRotateLeft,{className:"text-nxl"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-[90%] h-3/4 flex gap-4 flex-col md:flex-row md:bg-light md:dark:bg-gray my-4",children:[jsxRuntimeExports.jsx(Button,{customClass:"bg-primary-100 dark:bg-primary-200 md:hidden",onClick:x,children:"Selecione um chat "}),jsxRuntimeExports.jsx(ListChats,{chats:r,setIndex:l}),r.length?jsxRuntimeExports.jsx(ContentChats,{messageManager:r,index:o}):jsxRuntimeExports.jsx("h2",{className:"p-4 text-center w-full",children:"Você ainda não teve acessos no seu chat"})]})]})}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,s=0){return byteToHex[e[s+0]]+byteToHex[e[s+1]]+byteToHex[e[s+2]]+byteToHex[e[s+3]]+"-"+byteToHex[e[s+4]]+byteToHex[e[s+5]]+"-"+byteToHex[e[s+6]]+byteToHex[e[s+7]]+"-"+byteToHex[e[s+8]]+byteToHex[e[s+9]]+"-"+byteToHex[e[s+10]]+byteToHex[e[s+11]]+byteToHex[e[s+12]]+byteToHex[e[s+13]]+byteToHex[e[s+14]]+byteToHex[e[s+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,s,a){if(native.randomUUID&&!s&&!e)return native.randomUUID();e=e||{};const o=e.random||(e.rng||rng)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=o[l];return s}return unsafeStringify(o)}function Table({titleColumn:e,rows:s,maxPerPage:a=10}){const[o,l]=reactExports.useState(0),[r,c]=reactExports.useState([]);reactExports.useEffect(()=>{if(!s)return;const u=Math.floor(s.length/a),d=s.length%a,x=[];if(Array.from({length:u}).forEach((h,f)=>{const p=s.slice(a*f,a*(f+1));x.push(p)}),d){const h=s.slice(s.length-d,s.length);x.push(h)}c(x)},[s]);const m=u=>{const d=u.currentTarget.dataset.tab;l(d==="previous"?x=>x>0?x-1:r.length-1:x=>x<r.length-1?x+1:0)};return jsxRuntimeExports.jsx("div",{className:"w-full mx-auto flex flex-col items-center",children:r[o]?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-full overflow-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full table-auto",children:[jsxRuntimeExports.jsx("thead",{className:"w-full bg-primary-100/30 border-2 border-primary-100/60",children:jsxRuntimeExports.jsx("tr",{className:"w-full",children:e.map(u=>jsxRuntimeExports.jsx("th",{className:"min-w-20 whitespace-nowrap overflow-hidden text-ellipsis uppercase p-2 px-3 border-r border-primary-100/40",children:u},v4()))})}),jsxRuntimeExports.jsx("tbody",{className:"w-full divide-y divide-gray_light",children:r[o].map((u,d)=>jsxRuntimeExports.jsx("tr",{"data-color":d%2===0,className:"data-[color=true]:bg-primary-50/10 h-[30px]",children:u.map(x=>jsxRuntimeExports.jsx("td",{className:"text-center lowercase",children:x},v4()))},v4()))})]})}),jsxRuntimeExports.jsxs("div",{"data-pagination":r.length>1,className:"w-full flex gap-4 items-center justify-center p-4 data-[pagination=false]:hidden",children:[jsxRuntimeExports.jsx(FaArrowCircleLeft,{className:"cursor-pointer","data-tab":"previous",onClick:m}),jsxRuntimeExports.jsxs("span",{children:[o+1," - ",r.length]}),jsxRuntimeExports.jsx(FaArrowCircleRight,{className:"cursor-pointer","data-tab":"next",onClick:m})]})]}):jsxRuntimeExports.jsx("h2",{children:"Você ainda não recebeu nenhum dado para ser exibido na tabela"})})}function TransactionHistoric({plan_management:e}){const[s,a]=reactExports.useState();return reactExports.useEffect(()=>{const o=e==null?void 0:e.trasaction.map(l=>[e.plan.plan_name,formatDate(l.updated_at).dateFormat_A,`${l.amount_paid} reais`,l.payment_method,l.status==="APPROVED"?"Aprovado":"Pendente"]);a(o)},[]),s&&jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl p-2",children:"Historico de transações"}),jsxRuntimeExports.jsx("div",{className:"w-[95%]",children:jsxRuntimeExports.jsx(Table,{titleColumn:["Plano","Data e hora","Valor do plano","Método de pagamento","Status"],rows:s,maxPerPage:5})})]})}function PlanName({plan_management:e}){return e&&e.status!=="DISABLED"?jsxRuntimeExports.jsx("span",{className:"font-bold text-yellow-600 uppercase",children:e.plan.plan_name}):jsxRuntimeExports.jsx("span",{className:"text-zinc-400/60",children:"Sem plano"})}function calculatesRemainingFreeTrialDays(e){const l=(new Date(e)-new Date)/(1e3*60*60*24);return Number(l.toFixed(0))}function PlanInformation({plan_management:e}){const s=()=>e?calculatesRemainingFreeTrialDays(e.free_trial):0;return e&&e.status!=="DISABLED"&&jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col items-center",children:[jsxRuntimeExports.jsxs("span",{children:["Status:",jsxRuntimeExports.jsx("span",{"data-status":e.status,className:"px-1 rounded-md mx-2 bg-red-200 text-red-700 data-[status='ACTIVE']:bg-green-200 data-[status='ACTIVE']:text-green-700",children:e.status==="ACTIVE"?"Ativo":"Desativado"})]}),jsxRuntimeExports.jsxs("span",{children:["Chats: ",e.project.length," / ",Number(e.plan.max_projects.default)]}),jsxRuntimeExports.jsxs("span",{children:["Fonte de dados: ",e.prompt.length," / ",Number(e.plan.max_databases.default)]}),jsxRuntimeExports.jsxs("span",{children:["Análise de métrica diária:  ",Number(e.plan.max_analyze_metric.default)," "]}),jsxRuntimeExports.jsxs("span",{children:["Limite de messages: ",messagesEventManager(e).totalMessages," / ",Number(e.plan.max_messages.default)," "]}),jsxRuntimeExports.jsxs("span",{"data-free":Number(e.plan.monthly_price)<=0,className:"data-[free=true]:hidden",children:["Reembolso garantido: ",s()>0?s()+" dias restantes":"expirado"]})]})}function ButtonChangeAndAddPlan({client:e}){const s=useNavigate(),a=()=>{s("/plans")};return(e!=null&&e.refund_requested.length&&e.refund_requested[0].status!=="PENDING",!0)&&jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col my-4 justify-center items-center",children:jsxRuntimeExports.jsx(Button,{onClick:a,children:((e==null?void 0:e.plan_management)&&e.plan_management.status)!=="DISABLED"?Number(e==null?void 0:e.plan_management.plan.monthly_price)>0?"Mudar de plano":"Contratar plano":"Adicionar plano"})})}async function refundRequested(e){return await axios.post(`${API_URL}/refund_requested`,e).catch(a=>console.warn(a))}async function reactivatePlan(e){return await axios.post(`${API_URL}/refund_requested/reactive`,{client_id:e}).catch(a=>console.warn(a))}function ButtonRequestRefund({client:e}){const{setModalContent:s}=reactExports.useContext(ModalContext),a=()=>e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0?calculatesRemainingFreeTrialDays(e==null?void 0:e.plan_management.free_trial):0,o=async()=>{const m=d=>{var f,p;d.preventDefault();const x=(f=d.currentTarget.querySelector("textarea"))==null?void 0:f.value,h=(p=d.currentTarget.querySelector("div > span[data-active='true']"))==null?void 0:p.textContent;if(!x||!h){s({componentName:"modal_error_refund",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_refund",message:"Informe o motivo da solicitação do seu reembolso e de uma nota para sua expêriencia na Wipzee.",type:"WARNING"})});return}(async()=>{if(e){const g={client_id:e.id,reason:x||"",product_review:Number(h||0)};await refundRequested(g)?(s({componentName:"modal_request_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Solicitação de reembolso foi enviada com sucesso!",componentName:"modal_request_success"})}),setTimeout(()=>window.location.reload(),1e3)):s({componentName:"modal_error_request",components:jsxRuntimeExports.jsx(PopOver,{message:"Ocorreu um erro ao enviar sua solicitação de reembolso, por favor entre em contato com nosso suporte.",componentName:"modal_error_request"})})}else s({componentName:"modal_error_client",components:jsxRuntimeExports.jsx(PopOver,{message:"Erro ao processar o cliente, por favor recarregue a página.",componentName:"modal_error_client"})})})()},u=({currentTarget:d})=>{const x=d.closest("div[data-review='review']");x==null||x.querySelectorAll("span").forEach(h=>h.dataset.active="false"),d.dataset.active="true"};s({componentName:"modal_reason_client",components:jsxRuntimeExports.jsxs(PopUp,{children:[jsxRuntimeExports.jsx("h2",{className:"p-4 text-xl font-medium text-center",children:"Solicitação de reembolso"}),jsxRuntimeExports.jsxs("form",{className:"w-auto md:w-[500px] p-4 space-y-3",onSubmit:m,children:[jsxRuntimeExports.jsx(TextArea,{name:"reason",title:"Por qual motivo você deseja pedir seu reembolso?"}),jsxRuntimeExports.jsx("h2",{className:"text-center p-4",children:"De uma nota para a sua experiência com a Wipzee. "}),jsxRuntimeExports.jsx("div",{"data-review":"review",className:"w-4/5 flex mx-auto justify-between mt-12",children:Array.from({length:6}).map((d,x)=>jsxRuntimeExports.jsx("span",{className:"w-12 h-12 text-light bg-primary-100/30 hover:bg-primary-100 data-[active=true]:bg-primary-100 transition-colors p-3 rounded-full flex items-center justify-center font-bold cursor-pointer",onClick:u,children:x},x))}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mt-8",children:jsxRuntimeExports.jsx(Button,{children:"Enviar"})})]})]})})},l=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0)return e!=null&&e.refund_requested.length&&e.plan_management.status==="ACTIVE"&&a()>0?e.refund_requested[0].status!=="PENDING":a()>0&&e.plan_management.status!=="DISABLED"},r=()=>{e?window.open(`https://dash.ticto.com.br/subscription-verification?code=${e==null?void 0:e.ticto_order_code}&email=${e==null?void 0:e.purchase_email}`):s({componentName:"modal_failed_cancel",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao preencher os dados de cancelamento, por favor entre em contato com o suporte.",componentName:"modal_failed_cancel"})})},c=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0&&e.plan_management.status==="ACTIVE"&&a()<=0)return!!(e.refund_requested.length&&e.refund_requested[0].status!=="PENDING")};return l()?jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center",children:jsxRuntimeExports.jsx("a",{onClick:o,className:"text-center underline cursor-pointer",children:"Pedir reembolso"})}):c()&&jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center",children:jsxRuntimeExports.jsx("a",{onClick:r,className:"text-center underline cursor-pointer",children:"Gerenciar assinatura"})})}function CardPlan({client:e}){return jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-1/2 min-w-[150px] max-w-[400px] min-h-[200px] flex flex-col justify-between border border-zinc-600 p-2 rounded-md z-20",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-center gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-center",children:"Plano atual:"}),jsxRuntimeExports.jsx(PlanName,{plan_management:e==null?void 0:e.plan_management})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center my-4",children:jsxRuntimeExports.jsx(PlanInformation,{plan_management:e==null?void 0:e.plan_management})}),jsxRuntimeExports.jsx(ButtonChangeAndAddPlan,{client:e}),jsxRuntimeExports.jsx(ButtonRequestRefund,{client:e})]})}function CardRefund({client:e}){const{setModalContent:s}=reactExports.useContext(ModalContext),a=async()=>{e&&await reactivatePlan(e.id)&&(s({componentName:"modal_reactive_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Plano reativado com  sucesso!",componentName:"modal_reactive_plan"})}),setTimeout(()=>window.location.reload(),1500))};return!!(e!=null&&e.refund_requested.length)&&e.refund_requested[0].status!=="CANCEL"&&jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-1/2 min-w-[150px] max-w-[400px] min-h-[200px] border border-zinc-600 p-2 rounded-md",children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-center pb-4 text-xl",children:"Reembolso solicitado:"}),jsxRuntimeExports.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Reembolso solicidado em:",jsxRuntimeExports.jsx("p",{children:e.refund_requested[0].created_at.substring(0,10)})]}),jsxRuntimeExports.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Plano:",jsxRuntimeExports.jsx("p",{children:e.plan_management.plan.plan_name})]}),jsxRuntimeExports.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Status:",e.refund_requested[0].status==="PENDING"?jsxRuntimeExports.jsx("p",{className:"text-red-600",children:"Pendente"}):e.refund_requested[0].status==="APPROVED"?jsxRuntimeExports.jsx("p",{className:"text-green-600",children:"Dinheiro devolvido"}):jsxRuntimeExports.jsx("p",{className:"text-zinc-200",children:"Reembolso cancelado"})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mt-6",children:e.refund_requested[0].status==="PENDING"&&jsxRuntimeExports.jsx(Button,{onClick:a,children:"Cancelar reembolso"})})]})}function Payments(){const{client:e}=reactExports.useContext(ClientContext);return jsxRuntimeExports.jsxs(Container,{title:"Assinatura",className:"flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-[95%] flex flex-col md:flex-row gap-2 justify-center items-center",children:[jsxRuntimeExports.jsx(CardPlan,{client:e}),jsxRuntimeExports.jsx(CardRefund,{client:e})]}),jsxRuntimeExports.jsx(TransactionHistoric,{plan_management:e==null?void 0:e.plan_management})]})}function ChangePassword(){const{setValue:e}=useFormContext(),s=useForm(),{handleSubmit:a}=s,{client:o}=reactExports.useContext(ClientContext),{setModalContent:l,clearModal:r}=reactExports.useContext(ModalContext),c=async m=>{if(!o)throw new Error("Client not founded.");if(m.new_password.length<8||m.current_password.length<8){const x=!m.new_password.length||!m.current_password.length?"Preencha todos os dados":"Informe uma senha com mais de 8 caracteres";l({componentName:"modal_error_fill_data",components:jsxRuntimeExports.jsx(PopOver,{message:x,componentName:"modal_error_fill_data",type:"WARNING"})});return}if(m.new_password!==m.confirm_password){l({componentName:"modal_error_new_password",components:jsxRuntimeExports.jsx(PopOver,{message:"Sua confirmação de senha não é idêntica a sua nova senha!",componentName:"modal_error_new_password",type:"ERROR"})});return}m.client_id=o.id;const u=await changePasswordClient(m);u||l({componentName:"modal_error_password",components:jsxRuntimeExports.jsx(PopOver,{message:"A sua atual senha está incorreta!",componentName:"modal_error_password",type:"ERROR"})}),(u==null?void 0:u.status)===200&&(e("password",m.new_password),l({componentName:"modal_change_password_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Senha atualizada com sucesso!",componentName:"modal_change_password_success",functionAfterComplete:()=>r(null,{clearLast:!0})})}))};return jsxRuntimeExports.jsx(FormProvider,{...s,children:jsxRuntimeExports.jsxs("form",{className:"flex min-w-[200px] flex-col gap-8 p-4",onSubmit:a(c),children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Sua senha atual:"}),jsxRuntimeExports.jsx(InputPassword,{name:"current_password"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Nova senha:"}),jsxRuntimeExports.jsx(InputPassword,{name:"new_password"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Confirme sua senha:"}),jsxRuntimeExports.jsx(InputPassword,{name:"confirm_password"})]}),jsxRuntimeExports.jsxs(Button,{customClass:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FaSave,{})," Salvar"]})]})})}const clientSchema=z.object({fullname:z.string().min(1,"Digite seu nome completo!").refine(e=>{const s=e.split(" ");return!!(s.length>=2&&s[1])},"Vocẽ precisa informar seu nome completo"),user:z.string().min(1,"Digite um nome de usuário!").max(25,"Nome de usuário muito longe, informe um menor."),email:z.string().email(),password:z.string().min(8,"Sua senha precisa ter no minimo 8 caracteres!")});function ConfigProfile(){const{setModalContent:e}=reactExports.useContext(ModalContext),{client:s,setClient:a}=reactExports.useContext(ClientContext),o=useForm({resolver:t(clientSchema),defaultValues:{fullname:s==null?void 0:s.fullname,user:s==null?void 0:s.user,email:s==null?void 0:s.email,password:"senha-qualquer"}}),{handleSubmit:l,formState:{errors:r}}=o;reactExports.useEffect(()=>{const x=c(r);x&&e({componentName:"modal_error_message",components:jsxRuntimeExports.jsx(PopOver,{message:x,type:"WARNING",componentName:"modal_error_message"})})},[r]);const c=x=>{if(typeof x=="object"&&objectType!==null)for(let h in x){if(h==="message")return x[h];{const f=c(x[h]);if(f!==void 0)return f}}},m=async x=>{if((s==null?void 0:s.user)===x.user||await checkUserIsAvailable(x.user)){x.client_id=s==null?void 0:s.id;const h=await updateClient(x);(h==null?void 0:h.status)===200&&(a(h.data),e({componentName:"modal_user_success",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_user_success",message:"Perfil atualizado com sucesso"})}))}else e({componentName:"modal_error_user",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_user",message:"Usuário informado não está disponível!",type:"WARNING"})})},u=()=>{e({componentName:"modal_show_password",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(FormProvider,{...o,children:jsxRuntimeExports.jsx(ChangePassword,{})})})})},d=()=>{e({componentName:"modal_show_email",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_show_email",message:"Ainda não é possível atualizar o e-mail, para mais informações entre em contato com o suporte.",type:"WARNING"})})};return jsxRuntimeExports.jsx(Container,{title:"Configurações",children:jsxRuntimeExports.jsx(FormProvider,{...o,children:jsxRuntimeExports.jsxs("form",{onSubmit:l(m),className:"w-full md:w-2/3 mx-auto p-4 px-8 flex flex-col gap-6",children:[jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-col md:flex-row items-center gap-4",children:[jsxRuntimeExports.jsx(Root.Input,{name:"fullname",title:"Nome completo"}),jsxRuntimeExports.jsx(Root.Input,{name:"user",title:"Usuário"})]}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(Root.Container,{children:jsxRuntimeExports.jsx(Root.Input,{type:"email",name:"email",title:"Informe seu e-mail",disabled:!0})}),jsxRuntimeExports.jsxs(Button,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:d,children:["Alterar e-mail",jsxRuntimeExports.jsx(FaLock,{})]})]}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(Root.Container,{children:jsxRuntimeExports.jsx(Root.Input,{type:"password",name:"password",title:"Sua senha",disabled:!0})}),jsxRuntimeExports.jsxs(Button,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:u,children:["Alterar senha",jsxRuntimeExports.jsx(FaLock,{})]})]}),jsxRuntimeExports.jsxs(Button,{customClass:"flex gap-2 mt-8",children:["Salvar ",jsxRuntimeExports.jsx(FaSave,{})]})]})})})}function HelpCenter(){const[e,s]=useSearchParams();return reactExports.useEffect(()=>{window.open("https://wa.me/5535991368790"),e.set("tab","0"),s(e),window.location.reload()},[]),jsxRuntimeExports.jsx(Container,{title:"Central de ajuda",children:jsxRuntimeExports.jsx("h1",{className:"w-full text-center",children:"Vamos redicionar você para o whatsapp"})})}function Leads({}){var d;const{client:e}=reactExports.useContext(ClientContext),[s,a]=useSearchParams(),o=["nome","e-mail","Telefone"],[l,r]=reactExports.useState([[]]),c=(d=e==null?void 0:e.plan_management.project)==null?void 0:d.map(x=>({id:x.project_name.replaceAll(" ","_"),value:x.project_name,text:x.project_name}));reactExports.useEffect(()=>{const x=s.get("filter_time"),h=s.get("project");var f=(e==null?void 0:e.plan_management.project)||[];h&&(f=f.filter(g=>g.project_name.replaceAll(" ","_")===h&&g));const p=f.flatMap(g=>g.message_manager.flatMap(j=>j.lead_collected.map(C=>!x||convertDateInHour(C.time)<=Number(x)?[C.name||"-",C.email||"-",C.cell_phone||"-"]:[])));r(p)},[s]);const m=x=>{s.set("project",x.replaceAll(" ","_")),a(s)},u=()=>{s.delete("project"),a(s)};return jsxRuntimeExports.jsxs(Container,{title:"Leads coletados",className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-[90%] flex flex-col-reverse md:flex-row md:justify-end gap-2 md:gap-8 md:h-[40px] px-4 md:px-0",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione um chat",children:jsxRuntimeExports.jsx(Select,{name:"select_chat",title:"Selecione um chat",options:c||[],onSelected:m,onDelete:u})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione uma data  como filtro",children:jsxRuntimeExports.jsx(SelectTime,{})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Atualize seus chats",positionX:"LEFT",children:jsxRuntimeExports.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",children:jsxRuntimeExports.jsx(FaArrowRotateLeft,{className:"text-nxl"})})})]}),jsxRuntimeExports.jsx("div",{className:"w-[90%]",children:jsxRuntimeExports.jsx(Table,{titleColumn:o,rows:l})})]})}const containers=[{tab:"my_chats",element:jsxRuntimeExports.jsx(MyChats,{})},{tab:"metrics",element:jsxRuntimeExports.jsx(Metric,{})},{tab:"database",element:jsxRuntimeExports.jsx(MyDatabases,{})},{tab:"records",element:jsxRuntimeExports.jsx(ConversationHistoric,{})},{tab:"conversations",element:jsxRuntimeExports.jsx(ConversationHistoric,{})},{tab:"leads",element:jsxRuntimeExports.jsx(Leads,{})},{tab:"payment",element:jsxRuntimeExports.jsx(Payments,{})},{tab:"help_center",element:jsxRuntimeExports.jsx(HelpCenter,{})},{tab:"config",element:jsxRuntimeExports.jsx(ConfigProfile,{})}];function ControlComponentsSelectedMenu(){const[e]=useSearchParams(),s=e.get("tab")||"my_chats",a=()=>{const o=containers.find(l=>l.tab===s);return o==null?void 0:o.element};return jsxRuntimeExports.jsx("div",{className:"w-full px-2 md:px-8",children:a()})}function MainPanelClient(){return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen md:w-[90%] flex-grow flex flex-col items-center bg-gradient-to-br from-primary-100 from-[10%] to-light to-[20%] dark:to-dark",children:[jsxRuntimeExports.jsx(PanelHeader,{}),jsxRuntimeExports.jsx(ControlComponentsSelectedMenu,{})]})}export{MainPanelClient as default};
