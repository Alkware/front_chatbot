import{r as x,M as E,j as t,B as k,e as z,A as U,C as M,F as Et,f as Ze,g as Mt,h as Tt,d as D,P as b,T,i as It,k as kt,m as Pt,n as Rt,b as Q,o as Dt,p as Re,t as et,q as Lt,s as He,v as Bt,w as Ft,x as zt,y as Ut,I as H,z as he,D as V,E as Je,R as A,G as Ot,H as $t,J as qt,K as Gt,N as Z,O as X,Q as Vt,S as Ht,U as Jt,V as Wt,W as Kt,X as tt,Y as Yt,Z as Qt,$ as Xt,a0 as Zt,a1 as ea,a2 as ta,a3 as aa,a4 as sa,a5 as De,a6 as Le,a7 as na,a8 as Be,a9 as oa,aa as ra,ab as ia,ac as at,ad as la,ae as ca,af as da,ag as ma,ah as ua,ai as fa,aj as pa,ak as ha,al as ga,am as xa,an as _a,ao as ya,ap as Na,aq as ja,ar as wa,as as Fe,at as ba,au as Ca,av as je,aw as va,ax as Sa,ay as Aa,az as Me,aA as we,aB as st,aC as Ea,aD as oe,aE as ze,aF as Ma,aG as Ta,u as Ia,aH as G,aI as Y,aJ as ka,aK as Pa,aL as Ra,aM as Da,aN as La,aO as Ba,aP as nt,aQ as ot,aR as rt,aS as Fa,aT as za,aU as Ua,aV as Oa,aW as $a,aX as qa,aY as it,aZ as Ga}from"./index-FWBCWSa1.js";import{c as q}from"./Panel-iapG9WMk.js";import{G as Va,m as Ha}from"./messagesEventManager-mkubjA2u.js";const Ja=[{short:"Jan",complete:"Janeiro"},{short:"Fev",complete:"Fevereiro"},{short:"Mar",complete:"Março"},{short:"Abr",complete:"Abril"},{short:"Mai",complete:"Maio"},{short:"Jun",complete:"Junho"},{short:"Jul",complete:"Julho"},{short:"Ago",complete:"Agosto"},{short:"Set",complete:"Setembro"},{short:"Out",complete:"Outubro"},{short:"Nov",complete:"Novembro"},{short:"Dez",complete:"Dezembro"}];function L(e=new Date){const a=new Date(e);a.toLocaleTimeString("pt-BR",{hour12:!1});const s=a.getTimezoneOffset(),n=a.getMonth(),r=a.getUTCHours()-s/60,o=a.toLocaleDateString(),i=`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`,c=`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`,l=`${a.getDay()} de ${Ja[n].short} - ${c}`,m=+`${a.getFullYear()}${(n+1).toString().padStart(2,"0")}${a.getDate().toString().padStart(2,"0")}${a.getHours().toString().padStart(2,"0")}${a.getMinutes().toString().padStart(2,"0")}${a.getMilliseconds()}`;return{currentHour:r,fullDate:o,fullHour:i,shortHour:c,dateFormat_A:l,fullDateWithHour:`${o} - ${i}`,dateTransformNumber:m}}function Wa({notification:e,setDisplayNotification:a}){const{clearModal:s}=x.useContext(E),n=()=>{a(!1)};return t.jsxs("div",{className:"w-screen flex flex-col justify-start md:justify-center items-center min-h-screen md:min-h-0 md:min-w-[500px] md:max-w-[80vw] gap-4 relative p-4",children:[t.jsx("h2",{className:"w-full text-2xl text-center font-bold py-6",children:e.notification.title}),t.jsx("p",{dangerouslySetInnerHTML:{__html:e.notification.describe},className:"max-h-[70vh] overflow-auto"}),t.jsxs("div",{className:"flex p-4 gap-8 items-center ",children:[t.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:()=>s(null,{clearLast:!0}),children:"Fechar"}),!!e.notification.code&&t.jsx(k,{onClick:n,children:e.notification.cta_text})]})]})}async function Ka(e){return await z.post(`${U}/notification/${e}/read`).catch(s=>console.warn(s))}async function Ya(e){return await z.post(`${U}/notification/${e}/all_read`).catch(s=>console.warn(s))}function Qa(){const{client:e}=x.useContext(M),{setModalContent:a}=x.useContext(E),[s,n]=x.useState(),[r,o]=x.useState(),i=r==null?void 0:r.filter(m=>!m.read);x.useEffect(()=>{var d;const m=(d=e==null?void 0:e.notification_client)==null?void 0:d.sort((p,f)=>!p.read&&f.read?-1:p.read&&!f.read?1:0);o(m)},[]);const c=async m=>{const d=await Ka(m.id);(d==null?void 0:d.status)===200&&(o(p=>{if(p){const f=p.filter(h=>h.id!==m.id),u=p.find(h=>h.id===m.id);if(u)return u.read=!0,f.push(u),f}}),a({componentName:"modal_display_notification",components:t.jsx(D,{children:t.jsx(Wa,{notification:m,setDisplayNotification:n})})}))},l=async()=>{if(!e)return;await Ya(e.id)?o(d=>{if(d)return d.map(p=>(p.read=!0,p))}):a({componentName:"modal_failed_marked_read_notification",components:t.jsx(b,{componentName:"modal_failed_marked_read_notification",type:"WARNING",message:"Não foi possível marcar todas as notificações como lida, por favor tente mais tarde!"})})};return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:()=>n(m=>!m),children:[t.jsx("span",{"data-isnotification":!!(i!=null&&i.length),className:"w-[20px] h-[20px] data-[isnotification=false]:hidden flex justify-center items-center text-xs bg-red-800 border border-primary-300 rounded-full absolute -top-[10px] -right-[10px]",children:i==null?void 0:i.length}),t.jsx(Et,{className:"text-2xl fill-light cursor-pointer"})]}),t.jsxs("div",{"data-display":!!s,className:"w-full h-screen md:h-auto md:min-w-[400px] data-[display=false]:hidden flex flex-col fixed md:absolute z-50 md:rounded-md bg-primary-100 p-4 top-0 md:top-auto right-0 md:translate-x-[122px] md:my-2",children:[t.jsx(Ze,{className:" text-4xl absolute top-2 right-3  md:hidden",onClick:()=>n(m=>!m)}),t.jsxs("div",{className:"w-full flex justify-between items-center border-b border-white/30 my-8 md:my-0",children:[t.jsx("h2",{className:"text-xl font-bold text-light",children:"Notificações"}),t.jsx(k,{onClick:l,children:"Marcar todas como lida"})]}),t.jsx("div",{className:"w-full flex flex-col  md:max-h-[300px] overflow-auto",children:r!=null&&r.length?r==null?void 0:r.map(m=>t.jsxs("div",{className:"flex gap-4 items-center min-h-[60px] border-b border-white/30 hover:bg-primary-200/50 transition-colors cursor-pointer",onClick:()=>c(m),children:[t.jsx("div",{className:"min-w-1/3",children:m.read?t.jsx(Mt,{className:"size-6 fill-zinc-300"}):t.jsx(Tt,{className:"size-6 fill-orange-400"})}),t.jsxs("div",{"data-isread":!!m.read,className:"flex flex-col data-[isread=true]:opacity-60 text-light",children:[t.jsx("h2",{className:"font-medium text-lg",children:m.notification.title}),t.jsxs("div",{className:"flex gap-2 items-end px-2",children:[t.jsx("p",{className:"w-2/3 line-clamp-1 opacity-90",dangerouslySetInnerHTML:{__html:m.notification.describe}}),t.jsx("span",{className:"text-xs opacity-70",children:L(m.notification.created_at).dateFormat_A})]})]})]},m.id)):t.jsx("h2",{className:"w-full text-center py-4",children:"Você ainda não recebeu nenhuma notificação!"})})]})]})}function Xa({}){const[e,a]=x.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(T,{tip:"Precisa de ajudar no painel?",positionY:"BOTTOM",positionX:"LEFT",children:t.jsx("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:()=>a(s=>!s),children:t.jsx(It,{className:"size-6 fill-light cursor-pointer"})})}),t.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t.jsx("div",{id:"wipzee-chat","data-display":e,className:"data-[display=false]:hidden"})})]})}function Za(){x.useEffect(()=>{const a=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",a)},[]);const e=()=>{const a=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",!a);const s=a?"light":"dark";localStorage.theme=s};return t.jsxs("div",{className:"flex gap-3",children:[t.jsx(T,{tip:"Notificações",positionY:"BOTTOM",positionX:"LEFT",children:t.jsx(Qa,{})}),t.jsx(T,{tip:"Escolha entre thema light ou dark",positionY:"BOTTOM",positionX:"LEFT",children:t.jsxs("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:e,children:[t.jsx(kt,{className:"size-6 fill-light cursor-pointer hidden dark:block"}),t.jsx(Pt,{className:"size-6 fill-light cursor-pointer block dark:hidden"})]})}),t.jsx(Xa,{})]})}function es(){return t.jsxs("header",{className:"w-full h-[8%] px-0 md:px-8 min-h-[70px] col-span-8 row-span-1 flex justify-between md:justify-end items-center md:bg-transparent",children:[t.jsx(Rt,{urlParamName:"menu_mobile",className:"md:hidden"}),t.jsx(Za,{})]})}function ts({plan_management_id:e}){const{client:a}=x.useContext(M),{setModalContent:s,clearModal:n}=x.useContext(E),r=Q(),o=()=>{if(a!=null&&a.plan_management)if(a!=null&&a.plan_management.artificial_intelligence.length){const i=Number(a.plan_management.plan.max_projects.default),c=a.plan_management.project.length;a.plan_management.status!=="DISABLED"?i>c?r(`/create-chat/${e}`):s({componentName:"modal_reached_max_plan",components:t.jsx(b,{message:"Você atingiu o número maximo de chats por plano.",componentName:"modal_reached_max_plan"})}):s({componentName:"modal_plan_is_desabled",components:t.jsx(b,{message:"O plano da sua conta está desabilitado.",componentName:"modal_plan_is_desabled",functionAfterComplete:()=>r("/panel?tab=4")})})}else s({componentName:"modal_create_database",components:t.jsx(D,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-4",children:[t.jsxs("h2",{className:"text-xl text-center",children:["Para criar um novo chat, antes é necessário ",t.jsx("br",{}),"  criar uma inteligência artificial."]}),t.jsxs("h2",{className:"text-lg text-center opacity-80",children:["Ela será capaz de aprender sobre seu negócio e ",t.jsx("br",{}),"dar informações precisas ao usuário sem que você precise realizar ",t.jsx("br",{}),"esse atendimento."]}),t.jsxs(k,{customClass:"my-4",onClick:()=>{r("/panel?tab=artificial_intelligence"),n("modal_create_database")},children:[t.jsx(Re,{}),"Criar Inteligência artificial"]})]})})});else s({componentName:"modal_without_plan",components:t.jsx(b,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan",functionAfterComplete:()=>r("/panel?tab=4")})})};return t.jsx("div",{onClick:o,className:"w-full h-full min-w-[200px] min-h-[200px] cursor-pointer  rounded-xl flex justify-center items-center border border-primary-100 bg-primary-50 dark:bg-primary-300 hover:bg-primary-200 text-light dark:text-primary-100 text-xl",children:t.jsx(T,{tip:"Crie um novo chat",children:t.jsx(Dt,{className:"text-6xl text-light dark:text-primary-100"})})})}function W({children:e,title:a,className:s}){return t.jsxs("div",{className:et("w-full md:min-h-[70vh] flex flex-col gap-4 justify-start items-start bg-light dark:bg-dark rounded-xl border border-primary-100 dark:border-primary-300 relative ",s),children:[t.jsx("h2",{className:"w-full text-primary-100 dark:text-light text-2xl font-semibold uppercase p-4 px-8",children:a}),e]})}var le={},as=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},lt={},B={};let Ue;const ss=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];B.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17};B.getSymbolTotalCodewords=function(a){return ss[a]};B.getBCHDigit=function(e){let a=0;for(;e!==0;)a++,e>>>=1;return a};B.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');Ue=a};B.isKanjiModeEnabled=function(){return typeof Ue<"u"};B.toSJIS=function(a){return Ue(a)};var ge={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function a(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,r){if(e.isValid(n))return n;try{return a(n)}catch{return r}}})(ge);function ct(){this.buffer=[],this.length=0}ct.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let s=0;s<a;s++)this.putBit((e>>>a-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var ns=ct;function ce(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ce.prototype.set=function(e,a,s,n){const r=e*this.size+a;this.data[r]=s,n&&(this.reservedBit[r]=!0)};ce.prototype.get=function(e,a){return this.data[e*this.size+a]};ce.prototype.xor=function(e,a,s){this.data[e*this.size+a]^=s};ce.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]};var os=ce,dt={};(function(e){const a=B.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const r=Math.floor(n/7)+2,o=a(n),i=o===145?26:Math.ceil((o-13)/(2*r-2))*2,c=[o-7];for(let l=1;l<r-1;l++)c[l]=c[l-1]-i;return c.push(6),c.reverse()},e.getPositions=function(n){const r=[],o=e.getRowColCoords(n),i=o.length;for(let c=0;c<i;c++)for(let l=0;l<i;l++)c===0&&l===0||c===0&&l===i-1||c===i-1&&l===0||r.push([o[c],o[l]]);return r}})(dt);var mt={};const rs=B.getSymbolSize,We=7;mt.getPositions=function(a){const s=rs(a);return[[0,0],[s-We,0],[0,s-We]]};var ut={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};e.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},e.from=function(r){return e.isValid(r)?parseInt(r,10):void 0},e.getPenaltyN1=function(r){const o=r.size;let i=0,c=0,l=0,m=null,d=null;for(let p=0;p<o;p++){c=l=0,m=d=null;for(let f=0;f<o;f++){let u=r.get(p,f);u===m?c++:(c>=5&&(i+=a.N1+(c-5)),m=u,c=1),u=r.get(f,p),u===d?l++:(l>=5&&(i+=a.N1+(l-5)),d=u,l=1)}c>=5&&(i+=a.N1+(c-5)),l>=5&&(i+=a.N1+(l-5))}return i},e.getPenaltyN2=function(r){const o=r.size;let i=0;for(let c=0;c<o-1;c++)for(let l=0;l<o-1;l++){const m=r.get(c,l)+r.get(c,l+1)+r.get(c+1,l)+r.get(c+1,l+1);(m===4||m===0)&&i++}return i*a.N2},e.getPenaltyN3=function(r){const o=r.size;let i=0,c=0,l=0;for(let m=0;m<o;m++){c=l=0;for(let d=0;d<o;d++)c=c<<1&2047|r.get(m,d),d>=10&&(c===1488||c===93)&&i++,l=l<<1&2047|r.get(d,m),d>=10&&(l===1488||l===93)&&i++}return i*a.N3},e.getPenaltyN4=function(r){let o=0;const i=r.data.length;for(let l=0;l<i;l++)o+=r.data[l];return Math.abs(Math.ceil(o*100/i/5)-10)*a.N4};function s(n,r,o){switch(n){case e.Patterns.PATTERN000:return(r+o)%2===0;case e.Patterns.PATTERN001:return r%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(r+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return r*o%2+r*o%3===0;case e.Patterns.PATTERN110:return(r*o%2+r*o%3)%2===0;case e.Patterns.PATTERN111:return(r*o%3+(r+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(r,o){const i=o.size;for(let c=0;c<i;c++)for(let l=0;l<i;l++)o.isReserved(l,c)||o.xor(l,c,s(r,l,c))},e.getBestMask=function(r,o){const i=Object.keys(e.Patterns).length;let c=0,l=1/0;for(let m=0;m<i;m++){o(m),e.applyMask(m,r);const d=e.getPenaltyN1(r)+e.getPenaltyN2(r)+e.getPenaltyN3(r)+e.getPenaltyN4(r);e.applyMask(m,r),d<l&&(l=d,c=m)}return c}})(ut);var xe={};const J=ge,de=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],me=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];xe.getBlocksCount=function(a,s){switch(s){case J.L:return de[(a-1)*4+0];case J.M:return de[(a-1)*4+1];case J.Q:return de[(a-1)*4+2];case J.H:return de[(a-1)*4+3];default:return}};xe.getTotalCodewordsCount=function(a,s){switch(s){case J.L:return me[(a-1)*4+0];case J.M:return me[(a-1)*4+1];case J.Q:return me[(a-1)*4+2];case J.H:return me[(a-1)*4+3];default:return}};var ft={},_e={};const re=new Uint8Array(512),fe=new Uint8Array(256);(function(){let a=1;for(let s=0;s<255;s++)re[s]=a,fe[a]=s,a<<=1,a&256&&(a^=285);for(let s=255;s<512;s++)re[s]=re[s-255]})();_e.log=function(a){if(a<1)throw new Error("log("+a+")");return fe[a]};_e.exp=function(a){return re[a]};_e.mul=function(a,s){return a===0||s===0?0:re[fe[a]+fe[s]]};(function(e){const a=_e;e.mul=function(n,r){const o=new Uint8Array(n.length+r.length-1);for(let i=0;i<n.length;i++)for(let c=0;c<r.length;c++)o[i+c]^=a.mul(n[i],r[c]);return o},e.mod=function(n,r){let o=new Uint8Array(n);for(;o.length-r.length>=0;){const i=o[0];for(let l=0;l<r.length;l++)o[l]^=a.mul(r[l],i);let c=0;for(;c<o.length&&o[c]===0;)c++;o=o.slice(c)}return o},e.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let o=0;o<n;o++)r=e.mul(r,new Uint8Array([1,a.exp(o)]));return r}})(ft);const pt=ft;function Oe(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Oe.prototype.initialize=function(a){this.degree=a,this.genPoly=pt.generateECPolynomial(this.degree)};Oe.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(a.length+this.degree);s.set(a);const n=pt.mod(s,this.genPoly),r=this.degree-n.length;if(r>0){const o=new Uint8Array(this.degree);return o.set(n,r),o}return n};var is=Oe,ht={},K={},$e={};$e.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40};var O={};const gt="[0-9]+",ls="[A-Z $%*+\\-./:]+";let ie="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ie=ie.replace(/u/g,"\\u");const cs="(?:(?![A-Z0-9 $%*+\\-./:]|"+ie+`)(?:.|[\r
]))+`;O.KANJI=new RegExp(ie,"g");O.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");O.BYTE=new RegExp(cs,"g");O.NUMERIC=new RegExp(gt,"g");O.ALPHANUMERIC=new RegExp(ls,"g");const ds=new RegExp("^"+ie+"$"),ms=new RegExp("^"+gt+"$"),us=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");O.testKanji=function(a){return ds.test(a)};O.testNumeric=function(a){return ms.test(a)};O.testAlphanumeric=function(a){return us.test(a)};(function(e){const a=$e,s=O;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,i){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!a.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?o.ccBits[0]:i<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return s.testNumeric(o)?e.NUMERIC:s.testAlphanumeric(o)?e.ALPHANUMERIC:s.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function n(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+r)}}e.from=function(o,i){if(e.isValid(o))return o;try{return n(o)}catch{return i}}})(K);(function(e){const a=B,s=xe,n=ge,r=K,o=$e,i=7973,c=a.getBCHDigit(i);function l(f,u,h){for(let g=1;g<=40;g++)if(u<=e.getCapacity(g,h,f))return g}function m(f,u){return r.getCharCountIndicator(f,u)+4}function d(f,u){let h=0;return f.forEach(function(g){const y=m(g.mode,u);h+=y+g.getBitsLength()}),h}function p(f,u){for(let h=1;h<=40;h++)if(d(f,h)<=e.getCapacity(h,u,r.MIXED))return h}e.from=function(u,h){return o.isValid(u)?parseInt(u,10):h},e.getCapacity=function(u,h,g){if(!o.isValid(u))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=r.BYTE);const y=a.getSymbolTotalCodewords(u),_=s.getTotalCodewordsCount(u,h),w=(y-_)*8;if(g===r.MIXED)return w;const j=w-m(g,u);switch(g){case r.NUMERIC:return Math.floor(j/10*3);case r.ALPHANUMERIC:return Math.floor(j/11*2);case r.KANJI:return Math.floor(j/13);case r.BYTE:default:return Math.floor(j/8)}},e.getBestVersionForData=function(u,h){let g;const y=n.from(h,n.M);if(Array.isArray(u)){if(u.length>1)return p(u,y);if(u.length===0)return 1;g=u[0]}else g=u;return l(g.mode,g.getLength(),y)},e.getEncodedBits=function(u){if(!o.isValid(u)||u<7)throw new Error("Invalid QR Code version");let h=u<<12;for(;a.getBCHDigit(h)-c>=0;)h^=i<<a.getBCHDigit(h)-c;return u<<12|h}})(ht);var xt={};const Te=B,_t=1335,fs=21522,Ke=Te.getBCHDigit(_t);xt.getEncodedBits=function(a,s){const n=a.bit<<3|s;let r=n<<10;for(;Te.getBCHDigit(r)-Ke>=0;)r^=_t<<Te.getBCHDigit(r)-Ke;return(n<<10|r)^fs};var yt={};const ps=K;function ee(e){this.mode=ps.NUMERIC,this.data=e.toString()}ee.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)};ee.prototype.getLength=function(){return this.data.length};ee.prototype.getBitsLength=function(){return ee.getBitsLength(this.data.length)};ee.prototype.write=function(a){let s,n,r;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),r=parseInt(n,10),a.put(r,10);const o=this.data.length-s;o>0&&(n=this.data.substr(s),r=parseInt(n,10),a.put(r,o*3+1))};var hs=ee;const gs=K,be=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function te(e){this.mode=gs.ALPHANUMERIC,this.data=e}te.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)};te.prototype.getLength=function(){return this.data.length};te.prototype.getBitsLength=function(){return te.getBitsLength(this.data.length)};te.prototype.write=function(a){let s;for(s=0;s+2<=this.data.length;s+=2){let n=be.indexOf(this.data[s])*45;n+=be.indexOf(this.data[s+1]),a.put(n,11)}this.data.length%2&&a.put(be.indexOf(this.data[s]),6)};var xs=te,_s=function(a){for(var s=[],n=a.length,r=0;r<n;r++){var o=a.charCodeAt(r);if(o>=55296&&o<=56319&&n>r+1){var i=a.charCodeAt(r+1);i>=56320&&i<=57343&&(o=(o-55296)*1024+i-56320+65536,r+=1)}if(o<128){s.push(o);continue}if(o<2048){s.push(o>>6|192),s.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){s.push(o>>12|224),s.push(o>>6&63|128),s.push(o&63|128);continue}if(o>=65536&&o<=1114111){s.push(o>>18|240),s.push(o>>12&63|128),s.push(o>>6&63|128),s.push(o&63|128);continue}s.push(239,191,189)}return new Uint8Array(s).buffer};const ys=_s,Ns=K;function ae(e){this.mode=Ns.BYTE,typeof e=="string"&&(e=ys(e)),this.data=new Uint8Array(e)}ae.getBitsLength=function(a){return a*8};ae.prototype.getLength=function(){return this.data.length};ae.prototype.getBitsLength=function(){return ae.getBitsLength(this.data.length)};ae.prototype.write=function(e){for(let a=0,s=this.data.length;a<s;a++)e.put(this.data[a],8)};var js=ae;const ws=K,bs=B;function se(e){this.mode=ws.KANJI,this.data=e}se.getBitsLength=function(a){return a*13};se.prototype.getLength=function(){return this.data.length};se.prototype.getBitsLength=function(){return se.getBitsLength(this.data.length)};se.prototype.write=function(e){let a;for(a=0;a<this.data.length;a++){let s=bs.toSJIS(this.data[a]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var Cs=se,Nt={exports:{}};(function(e){var a={single_source_shortest_paths:function(s,n,r){var o={},i={};i[n]=0;var c=a.PriorityQueue.make();c.push(n,0);for(var l,m,d,p,f,u,h,g,y;!c.empty();){l=c.pop(),m=l.value,p=l.cost,f=s[m]||{};for(d in f)f.hasOwnProperty(d)&&(u=f[d],h=p+u,g=i[d],y=typeof i[d]>"u",(y||g>h)&&(i[d]=h,c.push(d,h),o[d]=m))}if(typeof r<"u"&&typeof i[r]>"u"){var _=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(_)}return o},extract_shortest_path_from_predecessor_list:function(s,n){for(var r=[],o=n;o;)r.push(o),s[o],o=s[o];return r.reverse(),r},find_path:function(s,n,r){var o=a.single_source_shortest_paths(s,n,r);return a.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(s){var n=a.PriorityQueue,r={},o;s=s||{};for(o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r.queue=[],r.sorter=s.sorter||n.default_sorter,r},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var r={value:s,cost:n};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=a})(Nt);var vs=Nt.exports;(function(e){const a=K,s=hs,n=xs,r=js,o=Cs,i=O,c=B,l=vs;function m(_){return unescape(encodeURIComponent(_)).length}function d(_,w,j){const N=[];let v;for(;(v=_.exec(j))!==null;)N.push({data:v[0],index:v.index,mode:w,length:v[0].length});return N}function p(_){const w=d(i.NUMERIC,a.NUMERIC,_),j=d(i.ALPHANUMERIC,a.ALPHANUMERIC,_);let N,v;return c.isKanjiModeEnabled()?(N=d(i.BYTE,a.BYTE,_),v=d(i.KANJI,a.KANJI,_)):(N=d(i.BYTE_KANJI,a.BYTE,_),v=[]),w.concat(j,N,v).sort(function(S,P){return S.index-P.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function f(_,w){switch(w){case a.NUMERIC:return s.getBitsLength(_);case a.ALPHANUMERIC:return n.getBitsLength(_);case a.KANJI:return o.getBitsLength(_);case a.BYTE:return r.getBitsLength(_)}}function u(_){return _.reduce(function(w,j){const N=w.length-1>=0?w[w.length-1]:null;return N&&N.mode===j.mode?(w[w.length-1].data+=j.data,w):(w.push(j),w)},[])}function h(_){const w=[];for(let j=0;j<_.length;j++){const N=_[j];switch(N.mode){case a.NUMERIC:w.push([N,{data:N.data,mode:a.ALPHANUMERIC,length:N.length},{data:N.data,mode:a.BYTE,length:N.length}]);break;case a.ALPHANUMERIC:w.push([N,{data:N.data,mode:a.BYTE,length:N.length}]);break;case a.KANJI:w.push([N,{data:N.data,mode:a.BYTE,length:m(N.data)}]);break;case a.BYTE:w.push([{data:N.data,mode:a.BYTE,length:m(N.data)}])}}return w}function g(_,w){const j={},N={start:{}};let v=["start"];for(let C=0;C<_.length;C++){const S=_[C],P=[];for(let I=0;I<S.length;I++){const R=S[I],ne=""+C+I;P.push(ne),j[ne]={node:R,lastCount:0},N[ne]={};for(let Ne=0;Ne<v.length;Ne++){const $=v[Ne];j[$]&&j[$].node.mode===R.mode?(N[$][ne]=f(j[$].lastCount+R.length,R.mode)-f(j[$].lastCount,R.mode),j[$].lastCount+=R.length):(j[$]&&(j[$].lastCount=R.length),N[$][ne]=f(R.length,R.mode)+4+a.getCharCountIndicator(R.mode,w))}}v=P}for(let C=0;C<v.length;C++)N[v[C]].end=0;return{map:N,table:j}}function y(_,w){let j;const N=a.getBestModeForData(_);if(j=a.from(w,N),j!==a.BYTE&&j.bit<N.bit)throw new Error('"'+_+'" cannot be encoded with mode '+a.toString(j)+`.
 Suggested mode is: `+a.toString(N));switch(j===a.KANJI&&!c.isKanjiModeEnabled()&&(j=a.BYTE),j){case a.NUMERIC:return new s(_);case a.ALPHANUMERIC:return new n(_);case a.KANJI:return new o(_);case a.BYTE:return new r(_)}}e.fromArray=function(w){return w.reduce(function(j,N){return typeof N=="string"?j.push(y(N,null)):N.data&&j.push(y(N.data,N.mode)),j},[])},e.fromString=function(w,j){const N=p(w,c.isKanjiModeEnabled()),v=h(N),C=g(v,j),S=l.find_path(C.map,"start","end"),P=[];for(let I=1;I<S.length-1;I++)P.push(C.table[S[I]].node);return e.fromArray(u(P))},e.rawSplit=function(w){return e.fromArray(p(w,c.isKanjiModeEnabled()))}})(yt);const ye=B,Ce=ge,Ss=ns,As=os,Es=dt,Ms=mt,Ie=ut,ke=xe,Ts=is,pe=ht,Is=xt,ks=K,ve=yt;function Ps(e,a){const s=e.size,n=Ms.getPositions(a);for(let r=0;r<n.length;r++){const o=n[r][0],i=n[r][1];for(let c=-1;c<=7;c++)if(!(o+c<=-1||s<=o+c))for(let l=-1;l<=7;l++)i+l<=-1||s<=i+l||(c>=0&&c<=6&&(l===0||l===6)||l>=0&&l<=6&&(c===0||c===6)||c>=2&&c<=4&&l>=2&&l<=4?e.set(o+c,i+l,!0,!0):e.set(o+c,i+l,!1,!0))}}function Rs(e){const a=e.size;for(let s=8;s<a-8;s++){const n=s%2===0;e.set(s,6,n,!0),e.set(6,s,n,!0)}}function Ds(e,a){const s=Es.getPositions(a);for(let n=0;n<s.length;n++){const r=s[n][0],o=s[n][1];for(let i=-2;i<=2;i++)for(let c=-2;c<=2;c++)i===-2||i===2||c===-2||c===2||i===0&&c===0?e.set(r+i,o+c,!0,!0):e.set(r+i,o+c,!1,!0)}}function Ls(e,a){const s=e.size,n=pe.getEncodedBits(a);let r,o,i;for(let c=0;c<18;c++)r=Math.floor(c/3),o=c%3+s-8-3,i=(n>>c&1)===1,e.set(r,o,i,!0),e.set(o,r,i,!0)}function Se(e,a,s){const n=e.size,r=Is.getEncodedBits(a,s);let o,i;for(o=0;o<15;o++)i=(r>>o&1)===1,o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(n-15+o,8,i,!0),o<8?e.set(8,n-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(n-8,8,1,!0)}function Bs(e,a){const s=e.size;let n=-1,r=s-1,o=7,i=0;for(let c=s-1;c>0;c-=2)for(c===6&&c--;;){for(let l=0;l<2;l++)if(!e.isReserved(r,c-l)){let m=!1;i<a.length&&(m=(a[i]>>>o&1)===1),e.set(r,c-l,m),o--,o===-1&&(i++,o=7)}if(r+=n,r<0||s<=r){r-=n,n=-n;break}}}function Fs(e,a,s){const n=new Ss;s.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),ks.getCharCountIndicator(l.mode,e)),l.write(n)});const r=ye.getSymbolTotalCodewords(e),o=ke.getTotalCodewordsCount(e,a),i=(r-o)*8;for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const c=(i-n.getLengthInBits())/8;for(let l=0;l<c;l++)n.put(l%2?17:236,8);return zs(n,e,a)}function zs(e,a,s){const n=ye.getSymbolTotalCodewords(a),r=ke.getTotalCodewordsCount(a,s),o=n-r,i=ke.getBlocksCount(a,s),c=n%i,l=i-c,m=Math.floor(n/i),d=Math.floor(o/i),p=d+1,f=m-d,u=new Ts(f);let h=0;const g=new Array(i),y=new Array(i);let _=0;const w=new Uint8Array(e.buffer);for(let S=0;S<i;S++){const P=S<l?d:p;g[S]=w.slice(h,h+P),y[S]=u.encode(g[S]),h+=P,_=Math.max(_,P)}const j=new Uint8Array(n);let N=0,v,C;for(v=0;v<_;v++)for(C=0;C<i;C++)v<g[C].length&&(j[N++]=g[C][v]);for(v=0;v<f;v++)for(C=0;C<i;C++)j[N++]=y[C][v];return j}function Us(e,a,s,n){let r;if(Array.isArray(e))r=ve.fromArray(e);else if(typeof e=="string"){let m=a;if(!m){const d=ve.rawSplit(e);m=pe.getBestVersionForData(d,s)}r=ve.fromString(e,m||40)}else throw new Error("Invalid data");const o=pe.getBestVersionForData(r,s);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!a)a=o;else if(a<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const i=Fs(a,s,r),c=ye.getSymbolSize(a),l=new As(c);return Ps(l,a),Rs(l),Ds(l,a),Se(l,s,0),a>=7&&Ls(l,a),Bs(l,i),isNaN(n)&&(n=Ie.getBestMask(l,Se.bind(null,l,s))),Ie.applyMask(n,l),Se(l,s,n),{modules:l,version:a,errorCorrectionLevel:s,maskPattern:n,segments:r}}lt.create=function(a,s){if(typeof a>"u"||a==="")throw new Error("No input text");let n=Ce.M,r,o;return typeof s<"u"&&(n=Ce.from(s.errorCorrectionLevel,Ce.M),r=pe.from(s.version),o=Ie.from(s.maskPattern),s.toSJISFunc&&ye.setToSJISFunction(s.toSJISFunc)),Us(a,r,n,o)};var jt={},qe={};(function(e){function a(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const r=parseInt(n.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:o,scale:o?4:i,margin:r,color:{dark:a(n.color.dark||"#000000ff"),light:a(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,r){return r.width&&r.width>=n+r.margin*2?r.width/(n+r.margin*2):r.scale},e.getImageWidth=function(n,r){const o=e.getScale(n,r);return Math.floor((n+r.margin*2)*o)},e.qrToImageData=function(n,r,o){const i=r.modules.size,c=r.modules.data,l=e.getScale(i,o),m=Math.floor((i+o.margin*2)*l),d=o.margin*l,p=[o.color.light,o.color.dark];for(let f=0;f<m;f++)for(let u=0;u<m;u++){let h=(f*m+u)*4,g=o.color.light;if(f>=d&&u>=d&&f<m-d&&u<m-d){const y=Math.floor((f-d)/l),_=Math.floor((u-d)/l);g=p[c[y*i+_]?1:0]}n[h++]=g.r,n[h++]=g.g,n[h++]=g.b,n[h]=g.a}}})(qe);(function(e){const a=qe;function s(r,o,i){r.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=i,o.width=i,o.style.height=i+"px",o.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,i,c){let l=c,m=i;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),i||(m=n()),l=a.getOptions(l);const d=a.getImageWidth(o.modules.size,l),p=m.getContext("2d"),f=p.createImageData(d,d);return a.qrToImageData(f.data,o,l),s(p,m,d),p.putImageData(f,0,0),m},e.renderToDataURL=function(o,i,c){let l=c;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),l||(l={});const m=e.render(o,i,l),d=l.type||"image/png",p=l.rendererOpts||{};return m.toDataURL(d,p.quality)}})(jt);var wt={};const Os=qe;function Ye(e,a){const s=e.a/255,n=a+'="'+e.hex+'"';return s<1?n+" "+a+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function Ae(e,a,s){let n=e+a;return typeof s<"u"&&(n+=" "+s),n}function $s(e,a,s){let n="",r=0,o=!1,i=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%a),m=Math.floor(c/a);!l&&!o&&(o=!0),e[c]?(i++,c>0&&l>0&&e[c-1]||(n+=o?Ae("M",l+s,.5+m+s):Ae("m",r,0),r=0,o=!1),l+1<a&&e[c+1]||(n+=Ae("h",i),i=0)):r++}return n}wt.render=function(a,s,n){const r=Os.getOptions(s),o=a.modules.size,i=a.modules.data,c=o+r.margin*2,l=r.color.light.a?"<path "+Ye(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",m="<path "+Ye(r.color.dark,"stroke")+' d="'+$s(i,o,r.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+m+`</svg>
`;return typeof n=="function"&&n(null,f),f};const qs=as,Pe=lt,bt=jt,Gs=wt;function Ge(e,a,s,n,r){const o=[].slice.call(arguments,1),i=o.length,c=typeof o[i-1]=="function";if(!c&&!qs())throw new Error("Callback required as last argument");if(c){if(i<2)throw new Error("Too few arguments provided");i===2?(r=s,s=a,a=n=void 0):i===3&&(a.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=s,s=a,a=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(s=a,a=n=void 0):i===2&&!a.getContext&&(n=s,s=a,a=void 0),new Promise(function(l,m){try{const d=Pe.create(s,n);l(e(d,a,n))}catch(d){m(d)}})}try{const l=Pe.create(s,n);r(null,e(l,a,n))}catch(l){r(l)}}le.create=Pe.create;le.toCanvas=Ge.bind(null,bt.render);le.toDataURL=Ge.bind(null,bt.renderToDataURL);le.toString=Ge.bind(null,function(e,a,s){return Gs.render(e,s)});function Vs({text:e,width:a}){const s=x.useRef(null),n=localStorage.theme==="dark"?"#000":"#7672f2",r=localStorage.theme==="dark"?"#7672f2":"#fff";x.useEffect(()=>{s.current&&le.toCanvas(s.current,e,{width:a,margin:1,color:{dark:n,light:r}},function(i){i&&console.error(i)})},[e,a]);const o=()=>{if(s.current){const i=s.current.toDataURL("image/png").replace("image/png","image/octet-stream"),c=document.createElement("a");c.download="qrcode.png",c.href=i,c.click()}};return t.jsxs("div",{className:"w-full flex justify-center",children:[t.jsx("div",{className:"w-4/5 flex justify-center",children:t.jsx("canvas",{ref:s})}),t.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:t.jsx(T,{tip:"Baixar imagem",children:t.jsx(Lt,{onClick:o,className:" text-2xl cursor-pointer"})})})]})}function Hs({slug:e}){const{setModalContent:a,clearModal:s}=x.useContext(E),n=x.useRef(null),r=x.useRef(null),o="http://localhost:5174",i=()=>{s(null,{clearAll:!0}),window.open(`${o}/${e}`)},c=()=>{try{const d=n.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var m=document.execCommand("copy");m&&a({componentName:"modal_copy_link",components:t.jsx(b,{message:"Link Copiado!",type:"INFORMATION",componentName:"modal_copy_link"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{a({componentName:"modal_failed_copy_link",components:t.jsx(b,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_link"})})}},l=()=>{try{const d=r.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var m=document.execCommand("copy");m&&a({componentName:"modal_copy_widget",components:t.jsx(b,{message:"Widget Copiado!",type:"INFORMATION",componentName:"modal_copy_widget"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{a({componentName:"modal_failed_copy_widget",components:t.jsx(b,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_widget"})})}};return t.jsxs("div",{className:"w-full h-screen md:h-auto flex flex-col gap-8 relative md:static p-4",children:[t.jsx(Ze,{className:"text-4xl rotate-180 md:hidden absolute",onClick:()=>s(null,{clearLast:!0})}),t.jsxs("div",{className:"w-full flex flex-col gap-2 mt-12 md:mt-0",children:[t.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Link do seu chat"}),t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx("input",{ref:n,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`${o}/${e}`}),t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx(T,{tip:"Copie seu link",children:t.jsx(He,{onClick:c,className:" text-2xl cursor-pointer"})}),t.jsx("div",{children:t.jsx(T,{tip:"Abra seu chat",children:t.jsx(Bt,{onClick:i,className:" text-xl cursor-pointer"})})})]})]}),t.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Esse será o link que você enviará aos usuários que irão acessar seu chat."})]}),t.jsxs("div",{className:"w-full flex flex-col gap-2",children:[t.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Código do Widget"}),t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx("input",{ref:r,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`<script src="https://widget.wipzee.com/${e}" defer><\/script>`}),t.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:t.jsx(He,{onClick:l,className:" text-2xl cursor-pointer"})})]}),t.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Copie e cole esse código no head do html do seu site."})]}),t.jsxs("div",{className:"w-full flex flex-col gap-2",children:[t.jsx("h2",{className:"w-4/5 text-center uppercase",children:"QR CODE"}),t.jsx(Vs,{width:200,text:`${o}/${e}`}),t.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Use esse QR CODE para acessar seu site facilmente"})]})]})}const Js=e=>e.errors!=null,Ws=(e,a)=>{const s={};for(;e.length;){const n=e[0],{code:r,message:o,path:i}=n,c=i.join(".");if(!s[c])if("unionErrors"in n){const l=n.unionErrors[0].errors[0];s[c]={message:l.message,type:l.code}}else s[c]={message:o,type:r};if("unionErrors"in n&&n.unionErrors.forEach(l=>l.errors.forEach(m=>e.push(m))),a){const l=s[c].types,m=l&&l[n.code];s[c]=Ut(c,a,s,r,m?[].concat(m,n.message):n.message)}e.shift()}return s},Ct=(e,a,s={})=>async(n,r,o)=>{try{const i=await e[s.mode==="sync"?"parse":"parseAsync"](n,a);return o.shouldUseNativeValidation&&Ft({},o),{errors:{},values:s.raw?n:i}}catch(i){if(Js(i))return{values:{},errors:zt(Ws(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}};function Ks({}){return t.jsx(H,{name:"facebook_pixel",title:"Adicione o pixel do seu facebook"})}function Ee({title:e,joinAtInput:a,containerWidth:s,...n}){const{register:r,watch:o}=he(),i=x.useRef(null);x.useEffect(()=>{if(i.current){const m=i.current.querySelector("label"),d=i.current.querySelector("input");d&&m&&d.value.length>0&&(m.classList.remove("top-0","opacity-50","cursor-text","py-2"),m.classList.add("top-0","-translate-y-1/2","bg-primary-100","text-sm"))}},[]);const c=({currentTarget:m})=>{const d=m.querySelector("label"),p=m.querySelector("input");d.classList.remove("top-0","opacity-50","cursor-text","py-2"),d.classList.add("top-0","-translate-y-1/2","bg-primary-100","text-sm"),p.focus()},l=({currentTarget:m})=>{const d=m.querySelector("label");m.querySelector("input").value.length<=0&&(d.classList.add("top-0","opacity-50","cursor-text","py-2"),d.classList.remove("top-0","-translate-y-1/2","bg-primary-100","text-sm"))};return t.jsxs("div",{className:et("w-full flex items-center gap-2 mt-8 relative",s),ref:i,onClick:c,onBlur:l,children:[t.jsx("label",{htmlFor:n.name,className:"w-[50px] h-[50px] rounded-full mx-2 border-2 border-white cursor-pointer",style:{background:o(n.name)}}),t.jsx("input",{type:"color",id:n.name,className:"cursor-pointer w-0 h-0 p-0 absolute left-1/3 -top-full",...r(n.name,{onChange:n.onChange}),...n})]})}function Ys({}){const[e,a]=V(),s=he(),n=Number(e.get(Je))||0,r=o=>{e.set(Je,o.toString()),a(e),s.unregister("chat_appearance.chat_icon"),s.register("chat_appearance.chat_icon",{value:o})};return t.jsxs(A.Container,{className:"w-full flex flex-col items-center gap-8",children:[t.jsxs("div",{className:"flex flex-col justify-center gap-4",children:[t.jsx("h2",{className:"text-center text-xl",children:"Escolha um icone para seu chat"}),t.jsx("div",{className:"flex justify-center gap-2 md:gap-4 text-5xl",children:Ot.map(({Icon:o,id:i},c)=>t.jsx(o,{"data-iscurrent":n-1===c,className:"hover:bg-primary-100 data-[iscurrent=true]:bg-primary-100 cursor-pointer rounded-full p-2",onClick:()=>r(i)},i))})]}),t.jsx(H,{name:"chat_appearance.icon_text",title:"Digite o texto que será exibido ao lado do icon"}),t.jsxs(A.Container,{className:"w-full flex",title:"Defina as cores do seu chat",children:[t.jsx(Ee,{name:"chat_appearance.primary_color",title:"Escolha a cor primária do seu chat"}),t.jsx(Ee,{name:"chat_appearance.second_color",title:"Escolha a cor secundária do seu chat"}),t.jsx(Ee,{name:"chat_appearance.background",title:"Escolha a cor do background do seu chat"})]})]})}function Qs(){const{watch:e}=he(),[a,s]=x.useState();return x.useEffect(()=>{const n=e("slug");s(n==null?void 0:n.replaceAll(" ","-"))},[e()]),t.jsxs("div",{className:"w-full md:w-full flex gap-2 items-center bg-white p-2 my-4 rounded-md",children:[t.jsx($t,{className:"fill-zinc-600"}),t.jsx(qt,{className:"fill-zinc-600"}),t.jsx(Gt,{className:"fill-zinc-600"}),t.jsxs("div",{className:"w-4/5 md:w-full bg-zinc-600 rounded-xl p-3 flex gap-2 items-center",children:[t.jsx(Z,{className:"fill-green-600"}),t.jsxs("h2",{className:"w-[90%] md:w-full overflow-hidden whitespace-nowrap text-ellipsis text-sm xl:text-base opacity-80",children:["https://chat.wipzee.com/",a]})]})]})}function Xs({}){return t.jsxs(A.Container,{className:"flex flex-col items-center p-2",children:[t.jsx(H,{name:"slug",title:"Altere a slug do seu chat"}),t.jsx(Qs,{}),t.jsxs("div",{className:"w-4/5 md:w-auto flex flex-col items-center md:items-start",children:[t.jsx("span",{className:"font-medium uppercase",children:"Lembre-se"}),t.jsx("span",{className:"opacity-70 text-center md:text-left",children:"Ao trocar a slug do seu chat, todos seus clientes que possuirem a URL antiga, podem perder acesso ao seu chat utilizando a antiga URL."})]})]})}function Zs({project:e,setProjects:a,ai:s}){var d,p,f,u,h,g;const{setModalContent:n,clearModal:r}=x.useContext(E),{setClient:o,client:i}=x.useContext(M),c=X({resolver:Ct(Vt),defaultValues:{project_name:e.project_name,chat_input_message:e.chat_input_message,logo_id:((d=e==null?void 0:e.logo)==null?void 0:d.id)||"",artificial_intelligence_id:(e==null?void 0:e.artificial_intelligence_id)||"",bio:e.bio,links:e.links,facebook_pixel:e.pixel_facebook,chat_appearance:{chat_icon:(p=e.chat_appearance)==null?void 0:p.chat_icon,icon_text:(f=e.chat_appearance)==null?void 0:f.icon_text,primary_color:(u=e.chat_appearance)==null?void 0:u.primary_color,second_color:(h=e.chat_appearance)==null?void 0:h.second_color,background:(g=e.chat_appearance)==null?void 0:g.background},slug:e.slug}}),l=async y=>{var w;if(!y&&!e.slug)return;if(y.slug&&y.slug!==e.slug&&!await Wt(y.slug)){n({componentName:"modal_error_slug",components:t.jsx(b,{componentName:"modal_error_slug",message:"A slug escolhida não está disponível!",type:"WARNING"})});return}y.plan_management_id=e.plan_management_id,y.chat_appearance&&e.chat_appearance&&(y.chat_appearance.id=(w=e==null?void 0:e.chat_appearance)==null?void 0:w.id);const _=await Kt(y,e.slug);if(!_){n({componentName:"modal_failed_chat_updated",components:t.jsx(b,{message:"Falha ao tentar atualizar o chat, tente entrar em contato com o suporte.",componentName:"modal_failed_chat_updated",type:"WARNING"})});return}n({componentName:"modal_chat_updated",components:t.jsx(b,{message:"Chat atualizado com sucesso",componentName:"modal_chat_updated",functionAfterComplete:()=>{r("modal_edit_project"),a(j=>{const N=y,v=j.findIndex(S=>S.id===e.id),C=j.filter(S=>S.id!==e.id);return N.is_online=_.is_online,N.plan_management_id=_.plan_management_id,N.artificial_intelligence_id=_.artificial_intelligence_id,N.id=_.id,N.chat_appearance=_.chat_appearance,N.logo=_.logo,C.splice(v,0,N),C})}})})};async function m(){const y=async()=>{if(e.id){const _=await Yt(e.id);if(_&&_.status===200){a(j=>j.filter(N=>N.id!==e.id));const w=i==null?void 0:i.plan_management.project.findIndex(j=>j.id===e.id);i&&w&&(i.plan_management.project.splice(w,1),o(i)),n({componentName:"modal_delete_success",components:t.jsx(b,{message:"Chat excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>r(null,{clearAll:!0})})})}}};n({componentName:"modal_confirm_delete_chat",components:t.jsx(D,{children:t.jsx(tt,{title:"Tem certeza que deseja deletar esse chat?",subTitle:"Uma vez removido, não pode ser revertido.",confirmFunction:y,cancelFuntion:()=>r("modal_confirm_delete_chat")})})})}return!!(s!=null&&s.length)&&!!i&&t.jsx("div",{className:"w-screen h-screen px-4 md:px-0 flex",children:t.jsxs(A.EditForm,{form:c,onDelete:m,onSubmit:l,activeSimulator:!0,children:[t.jsx(A.EditStep,{index:0,titleStep:"Informações do chat",children:t.jsx(Ht,{client_id:i.id,imageDefault:e.logo&&[e.logo]})}),t.jsx(A.EditStep,{index:1,titleStep:"Configurações do chat",children:t.jsx(Jt,{artificialInteligence:s,createChatForm:c})}),t.jsx(A.EditStep,{index:2,titleStep:"Eventos e rastreamentos",children:t.jsx(Ks,{})}),t.jsx(A.EditStep,{index:3,titleStep:"Aparência do chat",children:t.jsx(Ys,{})}),t.jsx(A.EditStep,{index:4,titleStep:"Configuração avançadas",children:t.jsx(Xs,{})})]})})}function en({project:e,setNewProject:a,ai:s}){var u;const{client:n,setClient:r}=x.useContext(M),{setModalContent:o}=x.useContext(E),i="http://localhost:5174",c=Q(),[l,m]=V(),d=async()=>{if(l.get("tour")==="2"&&(l.set("tour","0"),m(l),n)){const h=await ta(n.id,!1);r(h)}o({componentName:"modal_edit_project",components:t.jsx(D,{positionModal:"START",children:t.jsx(Zs,{setProjects:a,project:e,ai:s})})})},p=async(h,g)=>{if(!g)return o({componentName:"modal_failed_updated_status_chat",components:t.jsx(b,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat",type:"WARNING"})}),!1;const y=await aa(h,g);return(y==null?void 0:y.status)===200?(a(_=>(_.find(w=>w.id===y.data.id).is_online=y.data.is_online,_)),!0):(o({componentName:"modal_failed_updated_status_chat_02",components:t.jsx(b,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat_02",type:"WARNING"})}),!1)},f=()=>{if(l.set("tour","2"),m(l),!e.slug){o({componentName:"modal_failed_display_link",components:t.jsx(b,{message:"Falha ao exibir seus links",type:"ERROR",componentName:"modal_failed_display_link"})});return}o({componentName:"modal_display_share_project",components:t.jsx(D,{positionModal:"START",children:t.jsx(Hs,{slug:e.slug})})})};return e&&t.jsxs("div",{className:"w-full text-light relative flex flex-col items-center gap-2 cursor-pointer rounded-xl  border border-primary-100 bg-primary-50 dark:bg-primary-300 hover:bg-primary-200 text-xl",children:[t.jsxs("div",{className:"w-full flex justify-between items-center gap-2 p-2",children:[t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsx("div",{children:t.jsx(T,{tip:"Veja todos os seus links",children:t.jsx(Qt,{className:"text-xl",onClick:f})})}),t.jsx(T,{tip:"Edite seu chat",children:t.jsx(Xt,{className:"text-xl",onClick:d})})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(T,{tip:"Ative ou desative seu chat",children:t.jsx(Zt,{isActive:e.is_online,template:"onOff",cb:h=>p(h,e.slug)})})})]}),t.jsx("div",{className:"w-[150px] h-[110px] rounded-xl overflow-hidden",children:t.jsx("img",{src:((u=e.logo)==null?void 0:u.url)||"https://via.placeholder.com/100",alt:"imagem do projeto",className:"w-full h-full object-contain",onClick:()=>window.open(`${i}/${e.slug}`)})}),t.jsxs("h2",{className:"text-center py-4 font-bold text-xl flex gap-2 items-center ",onClick:()=>c("/panel?tab=metrics"),children:[t.jsx(ea,{}),e.project_name]})]},e.slug)}function tn(){const{client:e}=x.useContext(M),{setModalContent:a}=x.useContext(E),[s,n]=x.useState(e!=null&&e.plan_management?e.plan_management.project:[]),r=Array(sa).fill(0),o=()=>[a({componentName:"modal_locked_chat",components:t.jsx(b,{componentName:"modal_locked_chat",message:"Esse slot não está disponível, crie seu chat em um slot disponível ou contrate um plano com mais slot disponível.",type:"WARNING"})})];return e&&t.jsx(W,{title:"Meus chats",children:t.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 gap-8",children:r.map((i,c)=>{var l,m,d,p;return(l=e.plan_management)!=null&&l.plan&&c<Number(e.plan_management.plan.max_projects.default)?t.jsx("div",{className:"w-[90%] xs:w-1/2 md:w-1/3 lg:w-1/4 md:max-w-[300px]",children:(m=s[c])!=null&&m.id?t.jsx(en,{project:s[c],setNewProject:n,ai:(d=e.plan_management)==null?void 0:d.artificial_intelligence},s[c].id):t.jsx(ts,{plan_management_id:(p=e==null?void 0:e.plan_management)==null?void 0:p.id,projects:s,index:c})},c):t.jsx("div",{className:"w-[90%] xs:w-1/2 md:w-1/3 lg:w-1/4 min-h-[200px] md:max-w-[300px] flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl",onClick:o,children:t.jsx(Z,{className:"py-3 text-5xl teste"})},c)})})})}function an({setColumns:e,columns:a,modalName:s}){const{clearModal:n}=x.useContext(E),[r,o]=x.useState(a),i=l=>{const m=l.currentTarget.dataset.status=="true",d=l.currentTarget.dataset.name;o(()=>[...a.filter((p,f)=>(f>1&&p.columnName===d&&(p.status=!m),p))])},c=()=>{localStorage.setItem("metricColumnActive",JSON.stringify(a)),e(a),n(s)};return t.jsxs("div",{className:"w-full md:w-1/2 bg-light dark:bg-zinc-800 text-dark dark:text-light",children:[t.jsx("h2",{className:"w-full text-center text-xl p-4",children:"Organize suas columns"}),t.jsx("div",{className:"w-full flex gap-2 flex-col",children:r.map((l,m)=>t.jsxs("div",{className:"w-full flex justify-between px-4",children:[t.jsx("p",{children:l.columnName}),t.jsx("div",{className:"flex gap-4",children:t.jsx("div",{className:"w-[30px] h-[20px] bg-zinc-400 dark:bg-zinc-100 flex overflow-hidden rounded-full cursor-pointer",style:{justifyContent:`${l.status?"end":"start"}`},onClick:i,"data-status":l.status,"data-name":l.columnName,children:t.jsx("div",{className:"w-2/3 h-full rounded-xl flex justify-center items-center",style:{background:`${l.status?"green":"red"}`},children:m<2&&t.jsx(Z,{className:"w-[8px]"})})})})]},l.columnName))}),t.jsxs("div",{className:"w-full flex mt-12 justify-evenly items-center",children:[t.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:()=>n(s),children:"Fechar"}),t.jsx(k,{onClick:c,children:"Salvar"})]})]})}function Ve({}){const[e,a]=V(),s=r=>{const o=L(new Date).currentHour;var i=0;switch(r){case"today":i=o;break;case"yesterday":i=o+24;break;case"last_7_days":i=o+6*24;break;case"last_14_days":i=o+13*24;break;case"last_month":i=o+29*24;break;case"last_3_month":i=o+89*24;break;case"last_6_month":i=o+179*24;break;case"last_year":i=o+364*24;break;default:i=0;break}e.set("filter_time",i.toString()),a(e)},n=()=>{e.delete("filter_time"),a(e)};return t.jsx(De,{onSelected:s,onDelete:n,title:"Selecione uma data",name:"datetime",options:[{value:"today",text:"Hoje"},{value:"yesterday",text:"Ontem"},{value:"last_7_days",text:"Ultimos 7 dias"},{value:"last_14_days",text:"Ultimos 14 dias"},{value:"last_month",text:"Ultimo mês"},{value:"last_3_month",text:"Ultimos 3 meses"},{value:"last_6_month",text:"Ultimos 6 meses"},{value:"last_year",text:"Ultimo ano"}]})}function F(e,a=0){function s(){var u;return((u=e.metric)==null?void 0:u.chat_event.reduce((h,g)=>{const y=g.open_chat.filter(_=>{const w=q(_.created_at);return a>0?w<=a:!0});return h+y.length},0))||0}function n(){var h;return(((h=e.metric)==null?void 0:h.chat_event.filter(g=>{const y=q(g.created_at);return a>0?y<=a:!0}))||[]).filter((g,y,_)=>y===_.findIndex(w=>w.guest_id===g.guest_id)).length}function r(){return e.message_manager.map(u=>u.messages.filter(g=>{const y=q(g.time);return a>0?y<=a:!0})).flat().filter(u=>u.player==="user").length}function o(){return e.message_manager.map(u=>u.messages.filter(g=>{const y=q(g.time);return a>0?y<=a:!0})).flat().filter(u=>u.player==="assistant").length}function i(){const f=r()+o(),u=n()>0?f/n():0;return u%1===0?u:Number(u.toFixed(1))}function c(){var _;const f=(_=e.metric)==null?void 0:_.chat_event.reduce((w,j)=>{const N=j.chat_time.filter(v=>{const C=q(v.created_at);return a>0?C<=a:!0});return w+N.reduce((v,C)=>{if(!C.closed_at&&!C.created_at)return 0;const S=Number(new Date(C.closed_at))-Number(new Date(C.created_at));return v+S},0)},0),u=Math.floor(f/1e3),h=Math.floor(u/60);return`${Math.floor(h/60).toString().padStart(2,"0")}:${(h%60).toString().padStart(2,"0")}:${(u%60).toString().padStart(2,"0")}`}function l(){var w;const f=(w=e.metric)==null?void 0:w.chat_event.reduce((j,N)=>{const v=N.chat_time.filter(C=>{const S=q(C.created_at);return a>0?S<=a:!0});return j+v.reduce((C,S)=>{if(!S.closed_at&&!S.created_at)return 0;const P=Number(new Date(S.closed_at))-Number(new Date(S.created_at));return C+P},0)},0),u=f>0?f/n():0,h=Math.floor(u/1e3),g=Math.floor(h/60),y=Math.floor(g/60),_=`${y.toString().padStart(2,"0")}:${(g%60).toString().padStart(2,"0")}:${(h%60).toString().padStart(2,"0")}`;return y!==1/0?_:"00:00:00"}function m(){var u;const f=(u=e.metric)==null?void 0:u.button_event.filter(h=>{const g=q(h);return a>0?g<=a:!0},0);return(f==null?void 0:f.reduce((h,g)=>h+g.clicked_button.length,0))||0}function d(){return e.message_manager.map(u=>u.lead_collected).flat().length}function p(){return L(e.created_at).dateFormat_A}return{IS_ONLINE:e.is_online||!1,NAME:e.project_name,CAT:s(),CAU:n(),MESSAGE_INPUT:r(),MESSAGE_OUTPUT:o(),MESSAGES_TOTAL:r()+o(),MEDIA_MESSAGES_CHAT:i(),USAGE_TIME:c(),MEDIA_USAGE_TIME:l(),CREATED_AT:p(),LINK_CLICKS:m(),LEADS_COLLECTED:d(),SERVICE_NOTE:0,RESOLUTION_RATE:0}}async function sn(e){return await z.post(`${U}/analyze_metric`,{prompt:e}).catch(s=>console.warn(s))}function nn(e){const a=e.split("");let s="";return a.forEach(n=>{n.includes(`
`)&&s.length||n.includes(":")?s+=n+"<br />":s+=n}),s}async function on(e,a){const s=await z.post(`${U}/metric_analysis/create`,{plan_management_id:e,result:a});if(s.data.error)throw await Le({level:"warning",path:"src/api/metricAnalysis.ts Ln: 21",log:"Falha ao tentar criar a analise de métrica",sector:"Plataforma"}),new Error("Unable to create the Metric Analysis.");return s}async function rn({feedback:e,metrics_analysis_rating:a,metric_analysis_id:s}){const n=await z.post(`${U}/metric_analysis/create_feedback`,{feedback:e,metrics_analysis_rating:a,metric_analysis_id:s});if(n.data.error)throw await Le({level:"warning",path:"src/api/metricAnalysis.ts Ln: 42",log:"Falha ao tentar enviar o feedback sobre a análise de métrica",sector:"Plataforma"}),new Error("Unable to create the Feedback Metric Analysis.");return n}async function ln(e){const a=await z.get(`${U}/metric_analysis/${e}`);if(a.status===400)throw await Le({level:"warning",path:"src/api/metricAnalysis.ts Ln: 59",log:"Falha ao tentar buscar todas as análises de métricas",sector:"Plataforma"}),new Error("Unable to create the Feedback Metric Analysis.");return a}function cn({index:e,spanReview:a,metric_analysis_id:s}){const n=x.useRef(null),{setModalContent:r,clearModal:o}=x.useContext(E),i=async()=>{var l;const c=(l=n.current)==null?void 0:l.value;c&&s?(await rn({feedback:c,metrics_analysis_rating:e,metric_analysis_id:s})).data.response&&r({componentName:"modal_send_success",components:t.jsx(b,{componentName:"modal_send_success",message:"Feedback enviado com sucesso. Obrigado!",functionAfterComplete:()=>o(null,{clearLast:!0})})}):r({componentName:"modal_error_send_feedback",components:t.jsx(b,{componentName:"modal_error_send_feedback",message:"Você precisa deixar um feedback antes de enviar sua avaliação ou houve um erro no envio do feedback!",type:"ERROR"})})};return t.jsxs("div",{className:"w-[300px] flex flex-col items-center gap-2 p-4",children:[t.jsxs("h2",{className:"text-center font-bold text-lg",children:['Sua avaliação foi "',a,'".']}),t.jsx("p",{className:"text-center opacity-80",children:"Gostaria de deixar um feedback em algo poderia melhorar?"}),t.jsx("textarea",{ref:n}),t.jsx(k,{customClass:"my-4",onClick:i,children:"Enviar"})]})}var Qe=`
 A wipzee é uma empresa que fornece um chatbot com inteligencia artificial, promovendo uma experiência completa ao usuário.
 Desda personalização do chat até o consumo de dados (Métricas), abaixo será informado as métricas do usuário, quero que você faça uma analise
 completa e sugira melhorias ou de feedbacks positivos sobre as métricas.

 exemplo 1: 
    se tiver muitos chats abertos e nenhum clique no link, significa que o cliente não está sendo influenciado a clicar no link. 
    Sugestão: "Mudar o texto do link e deixar mais atrativo ou melhorar sua fonte de dados."
 exemplo 2: 
    se tiver muitos chats abertos e nenhuma ou poucas mensagens, significa que o cliente não está sentindo avontade de conversar com a IA ou não está conseguindo conversar com ela. 
    Sugestão: Melhorar a primeira mensagem do chat ou ver se existe algum problema tecnico nas trocas de mensagens."
`;function dn(){const{clearModal:e,setModalContent:a}=x.useContext(E),{client:s}=x.useContext(M),[n,r]=x.useState(),o=x.useRef(null);x.useEffect(()=>{(async()=>{var l;if(s){const d=(await ln((l=s.plan_management)==null?void 0:l.id)).data.response,p=s.plan_management.plan.max_analyze_metric.default,f=s.plan_management.plan.max_analyze_metric.bonus,u=Number(p+f);d.length?r({status:"APRROVED",analysis:d}):u>0&&d.length<=u?i():a({componentName:"modal_limit_analysis",components:t.jsx(b,{componentName:"modal_limit_analysis",message:Number(s.plan_management.plan.monthly_price)>0?"O limite de analises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.":"Não é possivel analisar métricas no plano gratuito, mude de plano ou entre em contato com o suporte.",functionAfterComplete:()=>e(null,{clearAll:!0})})})}})()},[]);const i=()=>{if(n&&s&&(n==null?void 0:n.analysis.length)>=Number(s.plan_management.plan.max_analyze_metric.default)){a({componentName:"modal_max_limit_analysis",components:t.jsx(b,{componentName:"modal_max_limit_analysis",message:"O limite de análises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.",type:"WARNING"})});return}if(r(null),!s)return;const l=s.plan_management.project,m=L(new Date).currentHour;l&&l.forEach(d=>{Qe+=`
                    NOME DO CHAT: ${d.project_name}
                    
                    MÉTRICAS:

                    Chats abertos total:
                    (Essa métrica pode tanto ser tanto varios usuários abrindo um chat ou como pode ser o mesmo usuário abrindo ele varias vezes)
                    [1000]

                    Chats abertos:
                    (Essa métrica conta quantas vezes o usuário abriu o chat, caso o usuário abra o mesmo chat 2 vezes ou mais, será contabilizado apenas uma vez)
                    [1]

                    Quando o chat foi criado:  
                    (Essa métrica registra quando o chat foi criado)
                    [${F(d,m).CREATED_AT}]

                    chat está ativado ou desativado:  
                    (Informa se o chat está ativado ou não: true = ativado e false = desativado)
                    [${F(d,m).IS_ONLINE}]

                    Leads coletados:  
                    (Informa quantos usuários deixaram um contato salvo no sistema)
                    [${F(d,m).LEADS_COLLECTED}]

                    Cliques no link:  
                    (Informa quantos cliques no link(call to action) foi dado no chat)
                    [100]

                    Média de mensagens:  
                    (Informa qual a média de mensagens por chat)
                    [${F(d,m).MEDIA_MESSAGES_CHAT}]

                    Média de tempo de uso:  
                    (Informa qual a média que o usuário ficou interagindo no chat)
                    [${F(d,m).MEDIA_USAGE_TIME}]

                    Total de Mensagens:  
                    (Informa qual o total de mensagens que esse chat tem)
                    [${F(d,m).MESSAGES_TOTAL}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${F(d,m).MESSAGE_INPUT}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${F(d,m).MESSAGE_OUTPUT}]

                    Saída de Mensagens:  
                    (Informa quantas mensagens nossa inteligencia artificial já mandou para esse chat)
                    [${F(d,m).MESSAGE_OUTPUT}]

                    tempo de uso:  
                    (Informa quanto tempo esse chat já ficou aberto)
                    [${F(d,m).USAGE_TIME}]`}),(async()=>{const d=await sn(Qe);if((d==null?void 0:d.status)===200&&d.data){const{text:p}=d.data.choices[0],f=await on(s==null?void 0:s.plan_management.id,p);r({status:"APRROVED",analysis:f.data.response})}else a({componentName:"modal_error_analyze_metric",components:t.jsx(b,{componentName:"modal_error_analyze_metric",message:"Não foi possível analisar suas métricas, por favor tente mais tarde.",type:"ERROR"})})})()},c=l=>{var m,d;if(n!=null&&n.analysis[0].feedback)a({componentName:"modal_error_analysis_metric",components:t.jsx(b,{componentName:"modal_error_analysis_metric",message:"Essa análise já foi avaliada!",type:"WARNING"})});else{const p=l.currentTarget.tabIndex,f=((m=l.currentTarget.querySelector("span"))==null?void 0:m.textContent)||"Regular",u=(d=o.current)==null?void 0:d.querySelectorAll("div > svg");u==null||u.forEach(h=>h.classList.remove("fill-primary-100")),u==null||u.forEach((h,g)=>g+1<=p&&h.classList.add("fill-primary-100")),a({componentName:"modal_show_feedback_analyze",components:t.jsx(D,{children:t.jsx(cn,{index:p,spanReview:f,metric_analysis_id:n==null?void 0:n.analysis[0].id})})})}};return n?t.jsxs("div",{className:"w-full md:max-w-[600px] min-w-[400px] flex flex-col items-center gap-4 p-4",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Relatório da análise"}),t.jsxs("span",{className:"opacity-70",children:[n.analysis.length,"/",Number(s==null?void 0:s.plan_management.plan.max_analyze_metric.default)," Análises restantes de hoje"]})]}),t.jsx("div",{className:"max-h-[300px] overflow-auto border border-primary-100 p-2",children:t.jsx("p",{dangerouslySetInnerHTML:{__html:nn(n.analysis[0].result)},className:"text-center"})}),t.jsxs("div",{className:"flex flex-col w-full items-center my-4",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Avalie essa análise:"}),t.jsx("div",{className:"flex gap-2",ref:o,children:Array.from({length:5}).map((l,m)=>t.jsxs("div",{tabIndex:m+1,onClick:c,className:"group flex flex-col justify-center items-center",children:[t.jsx(na,{"data-isselected":m+1<=n.analysis[0].metrics_analysis_rating,className:"cursor-pointer text-3xl hover:fill-primary-100 data-[isselected=true]:fill-primary-100"}),t.jsx("span",{className:"group-hover:opacity-100 opacity-0",children:m===0?"horrível":m===1?"ruim":m===2?"regular":m===3?"boa":"excelente"})]},m))})]}),t.jsxs("div",{className:"flex gap-8 justify-center items-center",children:[t.jsx("span",{onClick:()=>e(null,{clearLast:!0}),className:"underline opacity-80 my-4 cursor-pointer",children:"Fechar análise"}),t.jsx(k,{onClick:i,children:"Nova análise"})]})]}):t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4","data-loading":!0,children:[t.jsx("h2",{children:"Analisando métricas"}),t.jsx("span",{children:"Carregando..."})]})}function mn({client:e,handleRequestDataProject:a,setColumns:s,columns:n}){const{setModalContent:r}=x.useContext(E),o=async({currentTarget:l})=>{if(e!=null&&e.plan_management){const m=l.querySelector("svg");m.classList.add("rotate-[-360deg]","transition-transform","duration-1000"),a(e==null?void 0:e.id);const d=setTimeout(()=>{m.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(d)},1e3)}},i=()=>{r({componentName:"modal_organization_column",components:t.jsx(an,{modalName:"modal_organization_column",setColumns:s,columns:n})})},c=()=>{r({componentName:"modal_show_analyze_metric",components:t.jsx(D,{children:t.jsx(dn,{})})})};return t.jsxs("div",{className:"w-full md:w-[70vw] px-4 flex flex-row-reverse md:flex-row flex-wrap lg:flex-nowrap gap-4 lg:gap-8 justify-center lg:justify-end items-center",children:[t.jsx("div",{className:"w-1/5 md:w-auto p-2 flex justify-center bg-light dark:bg-dark border border-primary-100 rounded-md cursor-pointer",onClick:o,children:t.jsx(Be,{className:"text-xl fill-primary-100 dark:fill-light"})}),t.jsx("div",{className:"w-[74%] md:w-auto h-[40px]",children:t.jsx(Ve,{})}),t.jsxs(k,{onClick:i,customClass:"w-full md:w-auto bg-light dark:bg-dark text-primary-100 dark:text-light border border-primary-100 px-4",children:[" ",t.jsx(oa,{className:"text-xl fill-primary-100 dark:fill-light"})," Colunas"]}),t.jsxs(k,{customClass:"w-full md:w-auto px-2 bg-primary-100 border border-primary-100",onClick:c,children:[" ",t.jsx(ra,{className:"text-xl"})," Análise de métrica com IA"]})]})}const ue=[{key:"IS_ONLINE",columnName:"Status",status:!0,dataType:"boolean",size:80},{key:"NAME",columnName:"Nome do chat",status:!0,dataType:"string",size:170},{key:"CAT",columnName:"Chats abertos (total)",status:!0,dataType:"number",size:200},{key:"CAU",columnName:"Chats abertos (unico)",status:!1,dataType:"number",size:200},{key:"MESSAGE_INPUT",columnName:"Mensagens de entrada",status:!1,dataType:"number",size:180},{key:"MESSAGE_OUTPUT",columnName:"Mensagens de saída",status:!1,dataType:"number",size:170},{key:"MESSAGES_TOTAL",columnName:"Mensagens total",status:!0,dataType:"number",size:170},{key:"MEDIA_MESSAGES_CHAT",columnName:"Mensagens por chat",status:!1,dataType:"number",size:220},{key:"USAGE_TIME",columnName:"Tempo de uso",status:!1,dataType:"string",size:170},{key:"MEDIA_USAGE_TIME",columnName:"Tempo de uso por chat",status:!0,dataType:"string",size:230},{key:"LINK_CLICKS",columnName:"Cliques no link",status:!0,dataType:"number",size:150},{key:"LEADS_COLLECTED",columnName:"Leads coletados",status:!0,dataType:"number",size:170},{key:"CREATED_AT",columnName:"Criado em",status:!0,dataType:"string",size:150}];function un({setColumns:e,columns:a}){return x.useEffect(()=>{const s=JSON.parse(localStorage.getItem("metricColumnActive")||"[]");s.length>0?(s.length!==ue.length&&localStorage.setItem("metricColumnActive",JSON.stringify(ue)),s.status?e(s):localStorage.setItem("metricColumnActive",JSON.stringify(ue))):localStorage.setItem("metricColumnActive",JSON.stringify(ue))},[]),a&&t.jsx("div",{className:"w-1/2 flex",children:a.map(s=>s.status&&t.jsx("span",{style:{width:`${s.size}px`},className:"flex-none p-3 overflow-hidden whitespace-nowrap text-ellipsis text-sm font-bold uppercase text-center bg-primary-100 dark:bg-primary-300 text-light dark:text-primary-100 border-r border-r-light dark:border-r-primary-100",children:s.columnName},s.columnName))})}function fn({columns:e,setColumns:a,planManagement:s}){const[n]=V(),r=n.get("filter_time_metric");return t.jsxs("div",{className:"w-[95%] md:w-[70vw] md:h-[40vh] self-center rounded-xl overflow-x-auto",children:[t.jsx(un,{setColumns:a,columns:e}),t.jsx("div",{className:"flex flex-col",children:s!=null&&s.project.length?s.project.map(o=>t.jsx("div",{className:"flex-none flex",children:e.map((i,c)=>i.status&&t.jsx("span",{style:{width:`${i.size}px`},className:"flex-none text-ellipsis overflow-hidden whitespace-nowrap text-center border border-primary-100/30 p-2",children:c===0?t.jsxs("div",{className:"w-full flex justify-center items-center gap-2",children:[t.jsx("div",{className:`w-[8px] h-[8px] ${o.is_online?"bg-green-700":"bg-red-700"} rounded-full`}),t.jsx("span",{children:o.is_online?"Ativo":"Desativado"})]}):c===1?o.project_name:F(o,r)[i.key]},i.columnName))},o.id)):t.jsx("h2",{className:"text-center p-4 text-xs",children:'Você não tem nenhuma chat criado, clique em "Meus chats" , depois criar "Novo chat".'})}),t.jsx("div",{"data-hasproject":!!(s!=null&&s.project.length),className:"flex-none flex data-[hasproject]:hidden",children:e.map((o,i)=>o.status&&t.jsx("div",{style:{width:`${o.size}px`},className:"flex-none p-2 flex justify-center items-center gap-2",children:i===1?t.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:"TOTAL"}):o.dataType==="number"?t.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:s==null?void 0:s.project.reduce((c,l)=>c+Number(F(l,r)[o.key]),0)}):t.jsx("span",{className:"w-full text-primary-100 text-xl text-center",children:"-"})},o.key))})]})}function pn(){const e=JSON.parse(localStorage.getItem("metricColumnActive")||"[]"),{setModalContent:a}=x.useContext(E),{client:s}=x.useContext(M),[n,r]=x.useState(e),[o,i]=x.useState(s==null?void 0:s.plan_management);x.useEffect(()=>{s!=null&&s.plan_management&&c(s==null?void 0:s.id)},[]);const c=async l=>{const m=await ia(l);(m==null?void 0:m.status)===200?i(m.data.plan_management):a({componentName:"modal_failed_load_metric",components:t.jsx(b,{message:"Falha ao recarregar as métricas, tente reiniciar a página.",type:"ERROR",componentName:"modal_failed_load_metric"})})};return t.jsxs(W,{title:"Métricas",className:"flex-col items-center gap-2 md:gap-8",children:[t.jsx(mn,{client:s,columns:n,handleRequestDataProject:c,setColumns:r}),t.jsx(fn,{columns:n,planManagement:o,setColumns:r})]})}function hn({plan_management_id:e}){const{client:a}=x.useContext(M),{setModalContent:s}=x.useContext(E),n=Q(),r=()=>{if(a!=null&&a.plan_management){const o=Number(a.plan_management.plan.max_databases.default),i=a.plan_management.artificial_intelligence.length;a.plan_management.status!=="DISABLED"?o>i?n(`/create-ai/${e}`):s({componentName:"modal_max_artificial_inteligencia",components:t.jsx(b,{message:"Você atingiu o número maximo de base de dados no seu plano.",componentName:"modal_max_artificial_inteligencia"})}):s({componentName:"modal_desactive_account",components:t.jsx(b,{message:"O plano da sua conta está desabilitado.",componentName:"modal_desactive_account"})})}else s({componentName:"modal_without_plan",components:t.jsx(b,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan"})})};return t.jsx("div",{className:"w-full rounded-md border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-white dark:text-primary-100 data-[prompt=false]:bg-primary-200/20 flex justify-center",onClick:r,children:t.jsx(T,{tip:"Criar inteligência artificial",children:t.jsx(at,{className:"size-10 py-2 fill-light dark:fill-primary-100"})})})}function gn({plan_management_id:e,intelligence:a,setIntelligence:s}){var d;const{setModalContent:n,clearModal:r}=x.useContext(E),{client:o,setClient:i}=x.useContext(M),c=X({resolver:Ct(pa),defaultValues:{products_id:a.ai_products_Services.map(p=>p.product_id),services_id:a.ai_products_Services.map(p=>p.service_id),client_describe:a.client_describe||"",artificial_name:a.artificial_name||"",restrictions:a.restrictions||""}}),l=async p=>{const f={products_id:p.products_id,services_id:p.services_id,identification:p.identification,artificial_name:p.artificial_name,restrictions:p.restrictions,client_describe:p.client_describe,plan_management_id:a.plan_management_id,client_company_id:p.client_company_id},u=await ha(f,a.id);u&&o&&u.status===200&&(s(h=>[...h.filter(g=>g.id!==u.data.id),u.data]),n({componentName:"modal_updated_ai",components:t.jsx(b,{message:"Inteligência artificial atualizada com sucesso",componentName:"modal_updated_ai",functionAfterComplete:()=>r(null,{clearAll:!0})})}))};async function m(){var p,f;if(a.id){const u=await ga(a.id);if((u==null?void 0:u.status)===200){s(g=>g.filter(y=>y.id!==u.data.id));const h=(p=o==null?void 0:o.plan_management)==null?void 0:p.artificial_intelligence.findIndex(g=>g.id===a.id);o&&typeof h=="number"&&((f=o.plan_management)==null||f.artificial_intelligence.splice(h,1),i(o)),n({componentName:"modal_delete_success",components:t.jsx(b,{message:"Inteligência artificial excluida com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>r(null,{clearAll:!0})})})}else(u==null?void 0:u.status)===401?n({componentName:"modal_failed_delete_ai",components:t.jsx(b,{message:"Você não pode excluir uma inteligência artificial que possui um chat vinculado a ela, tente excluir todos os chats primeiro, antes de excluir essa fonte de dados.",type:"ERROR",componentName:"modal_failed_delete_ai"})}):n({componentName:"modal_failed_delete",components:t.jsx(b,{message:"Falha ao tentar excluir essa inteligência artificial. Tente reiniciar a página e tentar de novo.",type:"ERROR",componentName:"modal_failed_delete"})})}}return t.jsx("div",{className:"w-screen h-screen px-4 md:px-0 md:min-h-[450px] md:min-w-[700px] flex items-start overflow-hidden",children:t.jsxs(A.EditForm,{form:c,onSubmit:l,onDelete:m,children:[t.jsx(A.EditStep,{index:0,titleStep:"Vincule seus produtos",icon:t.jsx(la,{}),children:t.jsx(ca,{plan_management_id:e,ai_products_services:a.ai_products_Services})}),t.jsx(A.EditStep,{index:1,titleStep:"Sobre sua empresa",icon:t.jsx(da,{}),children:t.jsx(ma,{companies:(d=o==null?void 0:o.plan_management)==null?void 0:d.client_company})}),t.jsx(A.EditStep,{index:2,titleStep:"Personalidade da AI",icon:t.jsx(ua,{}),children:t.jsx(fa,{})})]})})}function xn(){var l;const{client:e}=x.useContext(M),{setModalContent:a,clearModal:s}=x.useContext(E),n=Array(xa).fill(0),[r,o]=x.useState(((l=e==null?void 0:e.plan_management)==null?void 0:l.artificial_intelligence)||[]),i=m=>{r!=null&&r.length&&(e!=null&&e.plan_management)&&a({componentName:"modal_create_database",components:t.jsx(D,{children:t.jsx(gn,{plan_management_id:e==null?void 0:e.plan_management.id,intelligence:r[m],setIntelligence:o})})})},c=m=>{async function d(p){p.preventDefault();const f=p.target.querySelector("input").value,u=r[m].id;if(f){const h=await Na(f,u);(h==null?void 0:h.status)===200&&(o([...r,r[m].artificial_name=f]),a({componentName:"modal_saved",components:t.jsx(b,{message:"Nome da sua base de dados foi atualizado com sucesso!",componentName:"modal_saved",functionAfterComplete:()=>s(null,{clearAll:!0})})}))}}a({componentName:"modal_edit_name",components:t.jsx(D,{children:t.jsxs("div",{className:"flex flex-col justify-center items-center gap-4 p-4",children:[t.jsx("h2",{children:"Digite o novo nome da sua fonte de dados:"}),t.jsxs("form",{onSubmit:d,className:"flex flex-col justify-center items-center gap-4",children:[t.jsx("input",{placeholder:"Ex: Minha nova base de dados",name:"database_name",defaultValue:r[m].artificial_name}),t.jsx(k,{children:"Salvar"})]})]})})})};return e&&t.jsx(W,{title:"Inteligência artificial",children:t.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 my-8 gap-6",children:n.map((m,d)=>{var p,f,u,h;return(p=e.plan_management)!=null&&p.plan&&d<Number(e.plan_management.plan.max_databases.default)?t.jsx("div",{className:"w-full max-w-[250px] flex justify-center items-center cursor-pointer",children:(f=r[d])!=null&&f.identification?t.jsxs("div",{className:"w-full relative flex gap-2 items-center justify-between rounded-md border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-white dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:[t.jsx(Va,{className:"size-10"}),t.jsx("h2",{className:"text-center flex justify-center items-center gap-2 whitespace-nowrap text-ellipsis overflow-x-hidden",onClick:()=>i(d),children:(u=r[d])==null?void 0:u.identification}),t.jsx(_a,{className:"cursor-text size-6 mx-2",onClick:()=>c(d)}),t.jsx("div",{"data-hasproduct":!!e.plan_management.artificial_intelligence[d].ai_products_Services.length,className:"data-[hasproduct=true]:hidden absolute top-0 right-1",children:t.jsx(T,{tip:"Inteligência artificial não tem conhecimento sobre seus produtos!",positionX:"LEFT",children:t.jsx(ya,{className:"fill-orange-500"})})})]}):t.jsx(hn,{plan_management_id:e.plan_management.id})},d):t.jsx("div",{"data-prompt":!!((h=r[d])!=null&&h.artificial_name),className:"w-full max-w-[250px] flex opacity-30 cursor-not-allowed justify-center items-center rounded-md border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:t.jsx(Z,{className:"size-10 py-3"})},d)})})})}function _n({chats:e,selectedChatById:a}){const[s,n]=V(),r=s.get("mobile_modal_select_chat")==="open",o=i=>{s.delete("mobile_modal_select_chat"),n(s),a(i)};return!!e.length&&t.jsx("div",{"data-isopen":window.innerWidth<768?!!r:!0,className:"w-full md:w-[400px] md:max-h-[400px] fixed md:static top-0 md:bg-transparent left-0 h-full overflow-auto flex flex-col border-r border-light/40 data-[isopen=false]:hidden",children:e.map((i,c)=>i.messages.length>1&&t.jsxs("div",{className:"w-full cursor-pointer hover:bg-primary-200 transition-colors p-4 border border-primary-100/20",onClick:()=>o(i.id),children:[t.jsx("h2",{className:"whitespace-nowrap text-ellipsis overflow-hidden py-1 text-xl font-bold",children:i.messages.length>1?i.messages[1].message.replace("<br/>",""):`Chat ${c.toString().padStart(2,"0")}`},i.messages.join()),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"italic text-xs",children:[i.messages.length," messagens"]}),t.jsx("span",{className:"italic text-xs",children:L(i.messages[i.messages.length-1].time).dateFormat_A})]})]},i.id))})}function yn({chats:e,selectedChatById:a}){const{client:s}=x.useContext(M),[n,r]=V(),{historic_messages:o,messages:i,project_id:c,lead_collected:l}=e.find(f=>f.id===a)||e[0],m=[...o,...i],d=s==null?void 0:s.plan_management.project.find(f=>f.id===c),p=()=>{const f=d==null?void 0:d.project_name.replaceAll(" ","_");f&&n.set(Fe,f),n.set(ba,"leads"),r(n)};return t.jsx("div",{className:"w-full h-full md:max-h-[400px] overflow-hidden flex flex-col mb-8 md:mb-0",children:t.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[t.jsxs("div",{className:"w-full h-[60px] flex justify-between items-center px-4 bg-primary-100",children:[t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("div",{className:"w-[50px] h-[50px] overflow-hidden rounded-full",children:t.jsx("img",{src:"https://via.placeholder.com/100",alt:"logo do cliente",className:"w-full h-full object-cover"})}),t.jsx("p",{className:"px-4 text-xl text-light",children:d==null?void 0:d.project_name})]}),t.jsx("div",{className:"flex gap-2 items-center cursor-pointer",onClick:p,children:l.find(f=>f.email||f.cell_phone)?t.jsx(T,{tip:"informações foram coletadas nesse chat",positionX:"LEFT",positionY:"BOTTOM",children:t.jsx(ja,{className:"fill-green-200"})}):t.jsx(T,{tip:"Nenhuma informação foi coletada",positionX:"LEFT",positionY:"BOTTOM",children:t.jsx(wa,{className:"fill-red-200"})})})]}),t.jsx("div",{className:"w-full h-full max-h-[320px] p-4 flex flex-col gap-4 overflow-auto",children:(m==null?void 0:m.map((f,u)=>t.jsx("div",{"data-player":f.player,className:"w-full flex data-[player='user']:justify-end justify-start",children:t.jsxs("div",{"data-player":f.player,className:"max-w-[80%] bg-primary-100/50 dark:bg-light text-black/80 data-[player='user']:bg-primary-100 dark:data-[player='user']:bg-primary-200 data-[player='user']:text-light p-2 rounded-xl",children:[t.jsx("h2",{dangerouslySetInnerHTML:{__html:f.message}}),t.jsx("span",{className:"w-full flex justify-end text-xs italic",children:L(f.time).shortHour})]})},u)))||t.jsx("h2",{className:"w-full h-[200px] flex justify-center items-center",children:"Ainda não existe nenhuma conversa para esse chat"})})]})})}function Xe(){var u;const{client:e}=x.useContext(M),[a,s]=V(),[n,r]=x.useState(),[o,i]=x.useState([]),c=a.get(Fe),l=(u=e==null?void 0:e.plan_management)==null?void 0:u.project.map(h=>({id:h.project_name.replace(" ","_"),value:h.project_name,text:h.project_name}));x.useEffect(()=>{const h=a.get(Ca);if(e&&l!=null&&l.length){let g;c?g=e.plan_management.project.filter(_=>_.project_name.replaceAll(" ","_")===c&&_):g=e.plan_management.project;const y=g.map(_=>_.message_manager.filter(j=>Number(h)?q(j.created_at)<=Number(h):!0)).flat();i(y)}},[a]);const m=h=>{a.set("project",h.replaceAll(" ","_")),s(a)},d=async({currentTarget:h})=>{if(e!=null&&e.plan_management){const g=h.querySelector("svg");g.classList.add("rotate-[-360deg]","transition-transform","duration-1000");const y=setTimeout(()=>{g.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(y)},1e3)}},p=()=>{a.append("mobile_modal_select_chat","open"),s(a)},f=()=>{a.delete("project"),s(a)};return t.jsxs(W,{title:"Conversas",className:"flex items-center",children:[t.jsxs("div",{className:"w-[90%] flex flex-col-reverse md:flex-row md:justify-end gap-2 md:gap-8 md:h-[40px] px-4 md:px-0",children:[t.jsx(T,{tip:"Selecione um chat",children:t.jsx(De,{name:"select_chat",title:"Selecione um chat",options:l||[],optionsDefault:c?Array.of(c):null,onSelected:m,onDelete:f})}),t.jsxs("div",{className:"flex gap-8 justify-between",children:[t.jsx(T,{tip:"Selecione uma data  como filtro",children:t.jsx(Ve,{})}),t.jsx(T,{tip:"Atualize seus chats",positionX:"LEFT",children:t.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",onClick:d,children:t.jsx(Be,{className:"text-nxl"})})})]})]}),t.jsxs("div",{className:"w-[90%] h-3/4 flex gap-4 flex-col md:flex-row md:bg-light md:dark:bg-gray my-4 border border-primary-200 rounded-md",children:[t.jsx(k,{customClass:"bg-primary-100 dark:bg-primary-200 md:hidden",onClick:p,children:"Selecione um chat "}),t.jsx(_n,{chats:o,selectedChatById:r}),o.length?t.jsx(yn,{chats:o,selectedChatById:n}):t.jsx("h2",{className:"p-4 text-center w-full",children:"Você ainda não teve acessos no seu chat"})]})]})}function vt({titleColumn:e,rows:a,maxPerPage:s=10}){const[n,r]=x.useState(0),[o,i]=x.useState([]);x.useEffect(()=>{if(!a)return;const l=Math.floor(a.length/s),m=a.length%s,d=[];if(Array.from({length:l}).forEach((p,f)=>{const u=a.slice(s*f,s*(f+1));d.push(u)}),m){const p=a.slice(a.length-m,a.length);d.push(p)}i(d)},[a]);const c=l=>{const m=l.currentTarget.dataset.tab;r(m==="previous"?d=>d>0?d-1:o.length-1:d=>d<o.length-1?d+1:0)};return t.jsx("div",{className:"w-full mx-auto flex flex-col items-center",children:o[n]?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full overflow-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{className:"w-full bg-primary-100/30 border-2 border-primary-100/60",children:t.jsx("tr",{className:"w-full",children:e.map(l=>t.jsx("th",{className:"min-w-20 whitespace-nowrap overflow-hidden text-ellipsis uppercase p-2 px-3 border-r border-primary-100/40",children:l},je()))})}),t.jsx("tbody",{className:"w-full divide-y divide-gray_light",children:o[n].map((l,m)=>t.jsx("tr",{"data-color":m%2===0,className:"data-[color=true]:bg-primary-50/10 h-[30px]",children:l.map(d=>t.jsx("td",{className:"text-center lowercase",children:d},je()))},je()))})]})}),t.jsxs("div",{"data-pagination":o.length>1,className:"w-full flex gap-4 items-center justify-center p-4 data-[pagination=false]:hidden",children:[t.jsx(va,{className:"cursor-pointer","data-tab":"previous",onClick:c}),t.jsxs("span",{children:[n+1," - ",o.length]}),t.jsx(Sa,{className:"cursor-pointer","data-tab":"next",onClick:c})]})]}):t.jsx("h2",{children:"Você ainda não recebeu nenhum dado para ser exibido na tabela"})})}function Nn({plan_management:e}){const[a,s]=x.useState();return x.useEffect(()=>{const n=e==null?void 0:e.trasaction.map(r=>[e.plan.plan_name,L(r.updated_at).dateFormat_A,`${r.amount_paid} reais`,r.payment_method,r.status==="APPROVED"?"Aprovado":"Pendente"]);s(n)},[]),a&&t.jsxs("div",{className:"w-full flex flex-col items-center",children:[t.jsx("h2",{className:"text-xl p-2",children:"Historico de transações"}),t.jsx("div",{className:"w-[95%]",children:t.jsx(vt,{titleColumn:["Plano","Data e hora","Valor do plano","Método de pagamento","Status"],rows:a,maxPerPage:5})})]})}function jn({plan_management:e}){return e&&e.status!=="DISABLED"?t.jsx("span",{className:"font-bold text-yellow-600 uppercase",children:e.plan.plan_name}):t.jsx("span",{className:"text-zinc-400/60",children:"Sem plano"})}function St(e){const r=(new Date(e)-new Date)/(1e3*60*60*24);return Number(r.toFixed(0))}function wn({plan_management:e}){const a=()=>e?St(e.free_trial):0;return e&&e.status!=="DISABLED"&&t.jsxs("div",{className:"w-full flex flex-col items-center",children:[t.jsxs("span",{children:["Status:",t.jsx("span",{"data-status":e.status,className:"px-1 rounded-md mx-2 bg-red-200 text-red-700 data-[status='ACTIVE']:bg-green-200 data-[status='ACTIVE']:text-green-700",children:e.status==="ACTIVE"?"Ativo":"Desativado"})]}),t.jsxs("span",{children:["Chats: ",e.project.length," / ",Number(e.plan.max_projects.default)]}),t.jsxs("span",{children:["Fonte de dados: ",e.artificial_intelligence.length," / ",Number(e.plan.max_databases.default)]}),t.jsxs("span",{children:["Análise de métrica diária:  ",Number(e.plan.max_analyze_metric.default)," "]}),t.jsxs("span",{children:["Limite de messages: ",Ha(e).totalMessages," / ",Number(e.plan.max_messages.default)," "]}),t.jsxs("span",{"data-free":Number(e.plan.monthly_price)<=0,className:"data-[free=true]:hidden",children:["Reembolso garantido: ",a()>0?a()+" dias restantes":"expirado"]})]})}function bn({client:e}){const a=Q(),s=()=>{a("/plans")};return(e!=null&&e.refund_requested.length&&e.refund_requested[0].status!=="PENDING",!0)&&t.jsx("div",{className:"w-full flex flex-col my-4 justify-center items-center",children:t.jsx(k,{onClick:s,children:((e==null?void 0:e.plan_management)&&e.plan_management.status)!=="DISABLED"?Number(e==null?void 0:e.plan_management.plan.monthly_price)>0?"Mudar de plano":"Contratar plano":"Adicionar plano"})})}async function Cn(e){return await z.post(`${U}/refund_requested`,e).catch(s=>console.warn(s))}async function vn(e){return await z.post(`${U}/refund_requested/reactive`,{client_id:e}).catch(s=>console.warn(s))}function Sn({client:e}){const{setModalContent:a}=x.useContext(E),s=()=>e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0?St(e==null?void 0:e.plan_management.free_trial):0,n=async()=>{const c=m=>{var f,u;m.preventDefault();const d=(f=m.currentTarget.querySelector("textarea"))==null?void 0:f.value,p=(u=m.currentTarget.querySelector("div > span[data-active='true']"))==null?void 0:u.textContent;if(!d||!p){a({componentName:"modal_error_refund",components:t.jsx(b,{componentName:"modal_error_refund",message:"Informe o motivo da solicitação do seu reembolso e de uma nota para sua expêriencia na Wipzee.",type:"WARNING"})});return}(async()=>{if(e){const h={client_id:e.id,reason:d||"",product_review:Number(p||0)};await Cn(h)?(a({componentName:"modal_request_success",components:t.jsx(b,{message:"Solicitação de reembolso foi enviada com sucesso!",componentName:"modal_request_success"})}),setTimeout(()=>window.location.reload(),1e3)):a({componentName:"modal_error_request",components:t.jsx(b,{message:"Ocorreu um erro ao enviar sua solicitação de reembolso, por favor entre em contato com nosso suporte.",componentName:"modal_error_request"})})}else a({componentName:"modal_error_client",components:t.jsx(b,{message:"Erro ao processar o cliente, por favor recarregue a página.",componentName:"modal_error_client"})})})()},l=({currentTarget:m})=>{const d=m.closest("div[data-review='review']");d==null||d.querySelectorAll("span").forEach(p=>p.dataset.active="false"),m.dataset.active="true"};a({componentName:"modal_reason_client",components:t.jsxs(D,{children:[t.jsx("h2",{className:"p-4 text-xl font-medium text-center",children:"Solicitação de reembolso"}),t.jsxs("form",{className:"w-auto md:w-[500px] p-4 space-y-3",onSubmit:c,children:[t.jsx(Aa,{name:"reason",title:"Por qual motivo você deseja pedir seu reembolso?"}),t.jsx("h2",{className:"text-center p-4",children:"De uma nota para a sua experiência com a Wipzee. "}),t.jsx("div",{"data-review":"review",className:"w-4/5 flex mx-auto justify-between mt-12",children:Array.from({length:6}).map((m,d)=>t.jsx("span",{className:"w-12 h-12 text-light bg-primary-100/30 hover:bg-primary-100 data-[active=true]:bg-primary-100 transition-colors p-3 rounded-full flex items-center justify-center font-bold cursor-pointer",onClick:l,children:d},d))}),t.jsx("div",{className:"w-full flex justify-center mt-8",children:t.jsx(k,{children:"Enviar"})})]})]})})},r=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0)return e!=null&&e.refund_requested.length&&e.plan_management.status==="ACTIVE"&&s()>0?e.refund_requested[0].status!=="PENDING":s()>0&&e.plan_management.status!=="DISABLED"},o=()=>{e?window.open(`https://dash.ticto.com.br/subscription-verification?code=${e==null?void 0:e.ticto_order_code}&email=${e==null?void 0:e.purchase_email}`):a({componentName:"modal_failed_cancel",components:t.jsx(b,{message:"Falha ao preencher os dados de cancelamento, por favor entre em contato com o suporte.",componentName:"modal_failed_cancel"})})},i=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0&&e.plan_management.status==="ACTIVE"&&s()<=0)return!!(e.refund_requested.length&&e.refund_requested[0].status!=="PENDING")};return r()?t.jsx("div",{className:"w-full flex justify-center",children:t.jsx("a",{onClick:n,className:"text-center underline cursor-pointer",children:"Pedir reembolso"})}):i()&&t.jsx("div",{className:"w-full flex justify-center",children:t.jsx("a",{onClick:o,className:"text-center underline cursor-pointer",children:"Gerenciar assinatura"})})}function An({client:e}){return t.jsxs("div",{className:"w-4/5 md:w-1/2 min-w-[150px] max-w-[400px] min-h-[200px] flex flex-col justify-between border border-zinc-600 p-2 rounded-md z-0",children:[t.jsxs("div",{className:"w-full flex justify-center gap-2",children:[t.jsx("h2",{className:"text-center",children:"Plano atual:"}),t.jsx(jn,{plan_management:e==null?void 0:e.plan_management})]}),t.jsx("div",{className:"w-full flex justify-center my-4",children:t.jsx(wn,{plan_management:e==null?void 0:e.plan_management})}),t.jsx(bn,{client:e}),t.jsx(Sn,{client:e})]})}function En({client:e}){const{setModalContent:a}=x.useContext(E),s=async()=>{e&&await vn(e.id)&&(a({componentName:"modal_reactive_plan",components:t.jsx(b,{message:"Plano reativado com  sucesso!",componentName:"modal_reactive_plan"})}),setTimeout(()=>window.location.reload(),1500))};return!!(e!=null&&e.refund_requested.length)&&e.refund_requested[0].status!=="CANCEL"&&t.jsxs("div",{className:"w-4/5 md:w-1/2 min-w-[150px] max-w-[400px] min-h-[200px] border border-zinc-600 p-2 rounded-md",children:[t.jsx("h2",{className:"w-full text-center pb-4 text-xl",children:"Reembolso solicitado:"}),t.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Reembolso solicidado em:",t.jsx("p",{children:e.refund_requested[0].created_at.substring(0,10)})]}),t.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Plano:",t.jsx("p",{children:e.plan_management.plan.plan_name})]}),t.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Status:",e.refund_requested[0].status==="PENDING"?t.jsx("p",{className:"text-red-600",children:"Pendente"}):e.refund_requested[0].status==="APPROVED"?t.jsx("p",{className:"text-green-600",children:"Dinheiro devolvido"}):t.jsx("p",{className:"text-zinc-200",children:"Reembolso cancelado"})]}),t.jsx("div",{className:"w-full flex justify-center mt-6",children:e.refund_requested[0].status==="PENDING"&&t.jsx(k,{onClick:s,children:"Cancelar reembolso"})})]})}function Mn(){const{client:e}=x.useContext(M);return t.jsxs(W,{title:"Assinatura",className:"flex-col items-center",children:[t.jsxs("div",{className:"w-[95%] flex flex-col md:flex-row gap-2 justify-center items-center",children:[t.jsx(An,{client:e}),t.jsx(En,{client:e})]}),t.jsx(Nn,{plan_management:e==null?void 0:e.plan_management})]})}function Tn(){const{setValue:e}=he(),a=X(),{handleSubmit:s}=a,{client:n}=x.useContext(M),{setModalContent:r,clearModal:o}=x.useContext(E),i=async c=>{if(!n)return;if(c.new_password.length<8||c.current_password.length<8){const d=!c.new_password.length||!c.current_password.length?"Preencha todos os dados":"Informe uma senha com mais de 8 caracteres";r({componentName:"modal_error_fill_data",components:t.jsx(b,{message:d,componentName:"modal_error_fill_data",type:"WARNING"})});return}if(c.new_password!==c.confirm_password){r({componentName:"modal_error_new_password",components:t.jsx(b,{message:"Sua confirmação de senha não é idêntica a sua nova senha!",componentName:"modal_error_new_password",type:"ERROR"})});return}c.client_id=n.id;const l=await Ea(c);l||r({componentName:"modal_error_password",components:t.jsx(b,{message:"A sua atual senha está incorreta!",componentName:"modal_error_password",type:"ERROR"})}),(l==null?void 0:l.status)===200&&(e("password",c.new_password),r({componentName:"modal_change_password_success",components:t.jsx(b,{message:"Senha atualizada com sucesso!",componentName:"modal_change_password_success",functionAfterComplete:()=>o(null,{clearLast:!0})})}))};return t.jsx(Me,{...a,children:t.jsxs("form",{className:"flex min-w-[200px] flex-col gap-8 p-4",onSubmit:s(i),children:[t.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[t.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Sua senha atual:"}),t.jsx(we,{name:"current_password"})]}),t.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[t.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Nova senha:"}),t.jsx(we,{name:"new_password"})]}),t.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[t.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Confirme sua senha:"}),t.jsx(we,{name:"confirm_password"})]}),t.jsxs(k,{customClass:"flex items-center gap-2",children:[t.jsx(st,{})," Salvar"]})]})})}const In=oe.object({fullname:oe.string().min(1,"Digite seu nome completo!").refine(e=>{const a=e.split(" ");return!!(a.length>=2&&a[1])},"você precisa informar seu nome completo"),user:oe.string().min(1,"Digite um nome de usuário!").max(25,"Nome de usuário muito longe, informe um menor."),email:oe.string().email(),password:oe.string().min(8,"Sua senha precisa ter no minimo 8 caracteres!")});function kn(){const{setModalContent:e}=x.useContext(E),{client:a,setClient:s}=x.useContext(M),n=X({resolver:ze(In),defaultValues:{fullname:a==null?void 0:a.fullname,user:a==null?void 0:a.user,email:a==null?void 0:a.email,password:"senha-qualquer"}}),{handleSubmit:r,formState:{errors:o}}=n;x.useEffect(()=>{const d=i(o);d&&e({componentName:"modal_error_message",components:t.jsx(b,{message:d,type:"WARNING",componentName:"modal_error_message"})})},[o]);const i=d=>{if(typeof d=="object"&&Ma!==null)for(let p in d){if(p==="message")return d[p];{const f=i(d[p]);if(f!==void 0)return f}}},c=async d=>{if(a)if((a==null?void 0:a.user)===d.user||await Ta(d.user)){const p=await Ia(a==null?void 0:a.id,d);(p==null?void 0:p.status)===200&&(s(p.data),e({componentName:"modal_user_success",components:t.jsx(b,{componentName:"modal_user_success",message:"Perfil atualizado com sucesso"})}))}else e({componentName:"modal_error_user",components:t.jsx(b,{componentName:"modal_error_user",message:"Usuário informado não está disponível!",type:"WARNING"})})},l=()=>{e({componentName:"modal_show_password",components:t.jsx(D,{children:t.jsx(Me,{...n,children:t.jsx(Tn,{})})})})},m=()=>{e({componentName:"modal_show_email",components:t.jsx(b,{componentName:"modal_show_email",message:"Ainda não é possível atualizar o e-mail, para mais informações entre em contato com o suporte.",type:"WARNING"})})};return t.jsx(W,{title:"Configurações",children:t.jsx(Me,{...n,children:t.jsxs("form",{onSubmit:r(c),className:"w-full md:w-2/3 mx-auto p-4 px-8 flex flex-col gap-6",children:[t.jsxs(A.Container,{className:"w-full flex flex-col md:flex-row items-center gap-4",children:[t.jsx(H,{name:"fullname",title:"Nome completo"}),t.jsx(H,{name:"user",title:"Usuário"})]}),t.jsxs(A.Container,{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[t.jsx(A.Container,{children:t.jsx(H,{type:"email",name:"email",title:"Informe seu e-mail",disabled:!0})}),t.jsxs(k,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:m,children:["Alterar e-mail",t.jsx(Z,{})]})]}),t.jsxs(A.Container,{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[t.jsx(A.Container,{children:t.jsx(H,{type:"password",name:"password",title:"Sua senha",disabled:!0})}),t.jsxs(k,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:l,children:["Alterar senha",t.jsx(Z,{})]})]}),t.jsxs(k,{customClass:"flex gap-2 mt-8",children:["Salvar ",t.jsx(st,{})]})]})})})}function Pn({}){var d;const{client:e}=x.useContext(M),[a,s]=V(),n=["nome","e-mail","Telefone"],[r,o]=x.useState([[]]),i=a.get(Fe),c=(d=e==null?void 0:e.plan_management.project)==null?void 0:d.map(p=>({id:p.project_name.replaceAll(" ","_"),value:p.project_name,text:p.project_name}));x.useEffect(()=>{const p=a.get("filter_time");var f=(e==null?void 0:e.plan_management.project)||[];i&&(f=f.filter(g=>g.project_name.replaceAll(" ","_")===i&&g));const h=f.flatMap(g=>g.message_manager.map(y=>{var v,C,S,P;let _=(v=y.lead_collected[y.lead_collected.length-1])==null?void 0:v.time,w=(C=y.lead_collected.sort((I,R)=>L(R.time).dateTransformNumber-L(I.time).dateTransformNumber).find(I=>!!I.name))==null?void 0:C.name,j=(S=y.lead_collected.sort((I,R)=>L(R.time).dateTransformNumber-L(I.time).dateTransformNumber).find(I=>!!I.email))==null?void 0:S.email,N=(P=y.lead_collected.sort((I,R)=>L(R.time).dateTransformNumber-L(I.time).dateTransformNumber).find(I=>!!I.cell_phone))==null?void 0:P.cell_phone;return j||N?!p||q(_)<=Number(p)?[w||"-",j||"-",N||"-"]:[]:[]})).filter(g=>g.length>0);o(h)},[a]);const l=p=>{a.set("project",p.replaceAll(" ","_")),s(a)},m=()=>{a.delete("project"),s(a)};return t.jsxs(W,{title:"Leads coletados",className:"flex items-center",children:[t.jsxs("div",{className:"w-[90%] flex flex-col-reverse md:flex-row md:justify-end gap-2 md:gap-8 md:h-[40px] px-4 md:px-0",children:[t.jsx(T,{tip:"Selecione um chat",children:t.jsx(De,{name:"select_chat",title:"Selecione um chat",options:c||[],optionsDefault:i?Array.of(i):null,onSelected:l,onDelete:m})}),t.jsx(T,{tip:"Selecione uma data  como filtro",children:t.jsx(Ve,{})}),t.jsx(T,{tip:"Atualize seus chats",positionX:"LEFT",children:t.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",children:t.jsx(Be,{className:"text-nxl"})})})]}),t.jsx("div",{className:"w-[90%]",children:t.jsx(vt,{titleColumn:n,rows:r})})]})}function Rn({category_name:e}){const{client:a}=x.useContext(M),{clearModal:s}=x.useContext(E),n=Q(),r=({currentTarget:o})=>{if(!a){console.error("Unable to select offer because the client is missing");return}s(null,{clearAll:!0}),n(`/${o.dataset.source}/${a.plan_management.id}/${e||null}`)};return t.jsxs("div",{className:"flex flex-col items-center p-4",children:[t.jsx(G,{children:"Escolha o tipo de oferta"}),t.jsx(Y,{className:"opacity-70",children:"Aqui você deve escolher qual o tipo de oferta você está cadastrando"}),t.jsxs("div",{className:"flex w-4/5 justify-between gap-4 my-6",children:[t.jsxs("div",{"data-source":"create-product",className:"flex flex-col justify-center items-center gap-2 max-w-[250px] border border-primary-100 rounded-md cursor-pointer hover:scale-105 transition-transform",onClick:r,children:[t.jsx("img",{src:"https://i.ibb.co/0GHgsZV/Screenshot-from-2024-08-01-17-30-39-removebg-preview-1.png",alt:"Imagem representando um porduto fisico",className:"w-20 h-20 object-contain"}),t.jsx(G,{className:"md:text-base font-bold",children:"Físico"}),t.jsx(Y,{className:"md:text-sm opacity-50",children:"Um produto físico é um objeto tangível que é fabricado e posteriormente entregue ao cliente final para que o possua fisicamente."})]}),t.jsxs("div",{"data-source":"create-service",className:"flex flex-col justify-center items-center gap-2 max-w-[250px] border border-primary-100 rounded-md cursor-pointer hover:scale-105 transition-transform",onClick:r,children:[t.jsx("img",{src:"https://i.ibb.co/TLv6Pzx/Screenshot-from-2024-08-01-17-31-33-removebg-preview-1.png",alt:"Imagem representando um serviço online ou presencial",className:"w-20 h-20 object-contain"}),t.jsx(G,{className:"md:text-base font-bold",children:"Serviço"}),t.jsx(Y,{className:"md:text-sm opacity-50",children:"Um serviço é uma atividade realizada para atender a uma necessidade específica do cliente, sendo consumido no momento da sua prestação."})]})]})]})}function Dn({}){const{setModalContent:e}=x.useContext(E),a=X(),s=({category_name:n})=>{e({componentName:"modal_display_select_offer",components:t.jsx(D,{children:t.jsx(Rn,{category_name:n})})})};return t.jsxs("form",{onSubmit:a.handleSubmit(s),className:"flex flex-col justify-center items-center gap-2 p-4",children:[t.jsx(G,{children:"Crie sua categoria"}),t.jsx(Y,{className:"max-w-[400px] opacity-70 md:text-base",children:"Cadastre a categoria do seu produto, antes de adicionar produtos nela"}),t.jsx("div",{className:"my-4 w-full",children:t.jsx(H,{name:"category_name",title:"De um nome para sua categoria",formContext:a})}),t.jsx(k,{children:"Criar categoria"}),t.jsx(k,{customClass:"bg-transparent underline cursor-pointer opacity-70 mt-4",children:"Meu produto não tem categoria"})]})}function At({}){const{setModalContent:e}=x.useContext(E),a=()=>{e({componentName:"modal_show_form",components:t.jsx(D,{children:t.jsx(Dn,{})})})};return t.jsxs(k,{effectNeon:!0,onClick:a,customClass:"",children:[t.jsx(at,{})," Adicionar categoria"]})}function Ln({}){return t.jsxs("div",{className:"w-3/4 flex flex-col items-center gap-4 terceiro-teste",children:[t.jsx(G,{children:"Cadastre seus produtos aqui"}),t.jsx(Y,{children:"É muito simples e fácil, basta criar um categoria e logo em seguida adicionar seus produtos"}),t.jsx(At,{})]})}function Bn({product:e,setProducts:a}){var l;const{client:s}=x.useContext(M),{setModalContent:n,clearModal:r}=x.useContext(E);if(!s){console.error("client is missing!");return}const o=X({resolver:ze(ka),defaultValues:{...e,images:(l=e.images)==null?void 0:l.map(m=>m.id)}}),i=async m=>{if(!e.id){window.location.reload();return}const d=await Ba(e.id,m);if(!d){n({componentName:"modal_failed_update_product",components:t.jsx(b,{componentName:"modal_failed_update_product",message:"Falha ao tentar atualizar o produto, tente entrar em contato com suporte.",type:"WARNING",functionAfterComplete:()=>r(null,{clearAll:!0})})});return}a(p=>p&&[...p.filter(u=>u.id!==e.id),d]),n({componentName:"modal_success_update_product",components:t.jsx(b,{componentName:"modal_success_update_product",message:"Produto atualizado com sucesso!",functionAfterComplete:()=>r(null,{clearAll:!0})})})},c=async()=>{if(!e.id){window.location.reload();return}if(!await nt(e.id)){n({componentName:"modal_failed_delete_product",components:t.jsx(b,{componentName:"modal_failed_delete_product",message:"Falha ao tentar deletar o produto, tente entrar em contato com suporte",type:"WARNING"})});return}a(d=>d.filter(p=>p.id!==e.id)),n({componentName:"modal_success_delete_product",components:t.jsx(b,{componentName:"modal_success_delete_product",message:"Produto deletado com sucesso!",functionAfterComplete:()=>r(null,{clearAll:!0})})})};return t.jsxs(A.EditForm,{form:o,onSubmit:i,onDelete:c,children:[t.jsx(A.EditStep,{titleStep:"Informações basicas",index:0,children:t.jsx(Pa,{client_id:s.id,product:e})}),t.jsx(A.EditStep,{index:1,titleStep:"Métodos de pagamentos e condições",children:t.jsx(Ra,{})}),t.jsx(A.EditStep,{index:2,titleStep:"Garantia do produto",children:t.jsx(Da,{})}),t.jsx(A.EditStep,{index:3,titleStep:"Informações avançadas",children:t.jsx(La,{})})]})}function Fn({items:e}){var f;const{setModalContent:a,clearModal:s}=x.useContext(E),{client:n}=x.useContext(M),r=x.useRef(null),[o,i]=x.useState(e),c=Q(),l=()=>{if(!n){console.error("Unable to select offer because the client is missing");return}c(`/create-product/${n.plan_management.id}/${e[0].category.name}`)},m=async u=>{if(!n){console.error("Client id is missing!");return}const h=await Fa({...u,product_name:`Copiá (${o.filter(g=>g.product_name.includes("Copiá")).length+1})`,plan_management_id:n==null?void 0:n.plan_management.id,category:{name:u.category.name},images:u.images.map(g=>g.id)});h&&i(g=>g?[...g,h]:[h])},d=async u=>{a({componentName:"modal_confirm_delete_product",components:t.jsx(D,{children:t.jsx(tt,{title:"Deseja realmente excluir esse produto?",confirmFunction:()=>h(),cancelFuntion:()=>s("modal_confirm_delete_product")})})});async function h(){const{id:g}=u;if(!g){window.location.reload();return}if(!await nt(g)){a({componentName:"modal_failed_delete_product",components:t.jsx(b,{componentName:"modal_failed_delete_product",message:"Falha ao tentar deletar o produto, tente entrar em contato com suporte",type:"WARNING"})});return}i(_=>_.filter(w=>w.id!==g)),a({componentName:"modal_success_delete_product",components:t.jsx(b,{componentName:"modal_success_delete_product",message:"Produto deletado com sucesso!"})}),s("modal_confirm_delete_product")}},p=u=>{a({componentName:"modal_edit_product",components:t.jsx(D,{children:t.jsx(Bn,{product:u,setProducts:i})})})};return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{"data-display":!!((f=e[0].category)!=null&&f.name),className:"w-full flex justify-between items-center bg-primary-100 dark:bg-primary-200 px-4",children:t.jsx(G,{className:"font-bold text-light",children:e[0].category.name==="null"?"Sem categoria":e[0].category.name})}),t.jsxs("div",{ref:r,className:"w-full flex gap-4 justify-start flex-wrap items-center bg-primary-50 dark:bg-primary-300 p-4",children:[o.map(u=>{var h;return t.jsxs("div",{className:"group w-20 h-20 flex items-center gap-4 relative hover:scale-105 cursor-pointer transition-transform",children:[t.jsxs("div",{className:"hidden group-hover:flex gap-1 absolute right-0 top-0 bg-dark/80 p-1 ",children:[t.jsx(ot,{className:"hover:scale-110 transition-transform fill-white",onClick:()=>m(u)}),t.jsx(rt,{className:"hover:scale-110 transition-transform fill-red-400",onClick:()=>d(u)})]}),t.jsx("img",{src:((h=u==null?void 0:u.image_main)==null?void 0:h.url)||"https://via.placeholder.com/100",className:"w-full h-full object-cover",onClick:()=>p(u)}),t.jsx("div",{className:"w-full absolute bottom-0",children:t.jsx(Y,{className:"w-full bg-dark/80 text-light text-sm overflow-hidden whitespace-nowrap text-ellipsis px-1",children:u.product_name})})]},u.id)}),t.jsx("div",{className:"w-20 h-20 cursor-pointer border border-white rounded-md grid place-content-center opacity-70 hover:opacity-100 bg-primary-100 dark:bg-primary-200",onClick:l,children:t.jsx(Re,{className:"size-8 fill-light"})})]})]})}function zn({service:e,setServices:a}){var l;const{client:s}=x.useContext(M),{setModalContent:n,clearModal:r}=x.useContext(E);if(!s){console.error("client is missing!");return}const o=X({resolver:ze(za),defaultValues:{...e,images:(l=e.images)==null?void 0:l.map(m=>m.id)}}),i=async m=>{if(!e.id){window.location.reload();return}const d=await qa(e.id,m);if(!d){n({componentName:"modal_failed_update_service",components:t.jsx(b,{componentName:"modal_failed_update_service",message:"Falha ao tentar atualizar o serviço, tente entrar em contato com suporte.",type:"WARNING",functionAfterComplete:()=>r(null,{clearAll:!0})})});return}a(p=>p&&[...p.filter(u=>u.id!==e.id),d]),n({componentName:"modal_success_update_service",components:t.jsx(b,{componentName:"modal_success_update_service",message:"Serviço atualizado com sucesso!",functionAfterComplete:()=>r(null,{clearAll:!0})})})},c=async()=>{if(!e.id){window.location.reload();return}if(!await it(e.id)){n({componentName:"modal_failed_delete_product",components:t.jsx(b,{componentName:"modal_failed_delete_product",message:"Falha ao tentar deletar o produto, tente entrar em contato com suporte",type:"WARNING"})});return}a(d=>d.filter(p=>p.id!==e.id)),n({componentName:"modal_success_delete_product",components:t.jsx(b,{componentName:"modal_success_delete_product",message:"Produto deletado com sucesso!",functionAfterComplete:()=>r(null,{clearAll:!0})})})};return t.jsxs(A.EditForm,{form:o,onSubmit:i,onDelete:c,children:[t.jsx(A.EditStep,{titleStep:"Informações basicas",index:0,children:t.jsx(Ua,{client_id:s.id,service:e})}),t.jsx(A.EditStep,{index:1,titleStep:"Métodos de pagamentos e condições",children:t.jsx(Oa,{})}),t.jsx(A.EditStep,{index:2,titleStep:"Informações avançadas",children:t.jsx($a,{})})]})}function Un({items:e}){var p;const{setModalContent:a}=x.useContext(E),{client:s}=x.useContext(M),n=x.useRef(null),[r,o]=x.useState(e),i=Q(),c=()=>{if(!s){console.error("Unable to select offer because the client is missing");return}i(`/create-service/${s.plan_management.id}/${e[0].category.name}`)},l=async f=>{if(!s){console.error("Client id is missing!");return}const u=await Ga({...f,service_name:`Copiá (${r.filter(h=>h.service_name.includes("Copiá")).length+1})`,plan_management_id:s==null?void 0:s.plan_management.id,category:{name:f.category.name},images:f.images.map(h=>h.id)});u&&o(h=>h?[...h,u]:[u])},m=async f=>{const{id:u}=f;if(!u){window.location.reload();return}if(!await it(u)){a({componentName:"modal_failed_delete_product",components:t.jsx(b,{componentName:"modal_failed_delete_product",message:"Falha ao tentar deletar o serviço, tente entrar em contato com suporte",type:"WARNING"})});return}o(g=>g.filter(y=>y.id!==u)),a({componentName:"modal_success_delete_product",components:t.jsx(b,{componentName:"modal_success_delete_product",message:"Serviço deletado com sucesso!"})})},d=f=>{a({componentName:"modal_edit_product",components:t.jsx(D,{children:t.jsx(zn,{service:f,setServices:o})})})};return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{"data-display":!!((p=e[0].category)!=null&&p.name),className:"w-full flex justify-between items-center bg-primary-100 dark:bg-primary-200 px-4",children:t.jsx(G,{className:"font-bold text-light",children:e[0].category.name==="null"?"Sem categoria":e[0].category.name})}),t.jsxs("div",{ref:n,className:"w-full flex gap-4 justify-start flex-wrap items-center bg-primary-50 dark:bg-primary-300 p-4",children:[r.map(f=>{var u;return t.jsxs("div",{className:"group w-20 h-20 flex items-center gap-4 relative hover:scale-105 cursor-pointer transition-transform",children:[t.jsxs("div",{className:"hidden group-hover:flex gap-1 absolute right-0 top-0 bg-dark/80 p-1 ",children:[t.jsx(ot,{className:"hover:scale-110 transition-transform fill-white",onClick:()=>l(f)}),t.jsx(rt,{className:"hover:scale-110 transition-transform fill-red-400",onClick:()=>m(f)})]}),t.jsx("img",{src:((u=f==null?void 0:f.image_main)==null?void 0:u.url)||"https://via.placeholder.com/100",className:"w-full h-full object-cover",onClick:()=>d(f)}),t.jsx("div",{className:"w-full absolute bottom-0",children:t.jsx(T,{tip:f.service_name.substring(0,39),positionY:"BOTTOM",children:t.jsx(Y,{className:"w-full bg-dark/80 text-light text-sm overflow-hidden whitespace-nowrap text-ellipsis px-1",children:f.service_name})})})]},f.id)}),t.jsx("div",{className:"w-20 h-20 cursor-pointer border border-white rounded-md grid place-content-center opacity-70 hover:opacity-100 bg-primary-100 dark:bg-primary-200",onClick:c,children:t.jsx(Re,{className:"size-8 fill-light"})})]})]})}function On({offers:e}){const[a,s]=x.useState(!!e.products.length),n=e.products.reduce((i,c)=>{const l=i.find(m=>{var d;return((d=m[0])==null?void 0:d.category.name)===c.category.name});return l?l.push(c):i.push([c]),i},[]),r=e.services.reduce((i,c)=>{const l=i.find(m=>{var d;return((d=m[0])==null?void 0:d.category.name)===c.category.name});return l?l.push(c):i.push([c]),i},[]),o=({currentTarget:i})=>{i.id==="product"?s(!0):s(!1)};return t.jsxs("div",{className:"w-full space-y-4",children:[t.jsx("div",{className:"w-full flex justify-end",children:t.jsx(At,{})}),t.jsxs("div",{children:[t.jsxs("div",{"data-display":!!(n.length&&r.length),className:"w-full flex justify-start data-[display=false]:hidden",children:[t.jsx(G,{id:"product","data-active":a,className:"w-1/2 text-left data-[active=true]:bg-primary-100 dark:data-[active=true]:bg-primary-200 bg-primary-50 dark:bg-primary-300 text-light border border-primary-100 dark:border-primary-200 cursor-pointer p-2",onClick:o,children:"Produto(s)"}),t.jsx(G,{id:"service","data-active":!a,className:"w-1/2 text-left data-[active=true]:bg-primary-100 dark:data-[active=true]:bg-primary-200 bg-primary-50 dark:bg-primary-300 text-light border border-primary-100 dark:border-primary-200 cursor-pointer p-2",onClick:o,children:"Serviço(s)"})]}),t.jsx("div",{"data-display":a,className:"w-full data-[display=false]:hidden",children:n.map(i=>t.jsx(Fn,{items:i},i[0].id))}),t.jsx("div",{"data-display":!a,className:"w-full data-[display=false]:hidden",children:r.map(i=>t.jsx(Un,{items:i},i[0].id))})]})]})}async function $n(e){const a=await z.get(`${U}/products/${e}`).catch(n=>console.log(n)),s=await z.get(`${U}/services/${e}`).catch(n=>console.log(n));if(!(a!=null&&a.data)||!(s!=null&&s.data)){console.error("Unable to find the products and services.");return}return{services:s.data,products:a.data}}function qn({}){const{client:e}=x.useContext(M),[a,s]=x.useState({products:[],services:[]});return x.useEffect(()=>{(async()=>{if(!(e!=null&&e.plan_management))return;const n=await $n(e==null?void 0:e.plan_management.id);n&&s(n)})()},[]),t.jsx(W,{title:"Produtos",children:t.jsx("div",{className:"p-4 w-full flex flex-col justify-center items-center gap-4",children:a.products.length||a.services.length?t.jsx(On,{offers:a}):t.jsx(Ln,{})})})}const Gn=[{tab:"my_chats",element:t.jsx(tn,{})},{tab:"metrics",element:t.jsx(pn,{})},{tab:"artificial_intelligence",element:t.jsx(xn,{})},{tab:"products",element:t.jsx(qn,{})},{tab:"records",element:t.jsx(Xe,{})},{tab:"conversations",element:t.jsx(Xe,{})},{tab:"leads",element:t.jsx(Pn,{})},{tab:"payment",element:t.jsx(Mn,{})},{tab:"config",element:t.jsx(kn,{})}];function Vn(){const[e]=V(),a=e.get("tab")||"my_chats",s=()=>{const n=Gn.find(r=>r.tab===a);return n==null?void 0:n.element};return t.jsx("div",{className:"w-full px-2 md:px-8",children:s()})}function Kn(){return t.jsxs("div",{className:"w-full min-h-screen md:w-[90%] flex-grow flex flex-col items-center bg-gradient-to-br from-primary-100 from-[10%] to-light to-[20%] dark:to-dark",children:[t.jsx(es,{}),t.jsx(Vn,{})]})}export{Kn as default};
