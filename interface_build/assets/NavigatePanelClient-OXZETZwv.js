import{r as f,C as j,j as e,au as L,at as k,M,T as v,av as _,P as q,u as I,S as R,aw as P,y as E,ax as F,ay as z,az as D,aA as U,aB as A,aC as T,aD as B,aE as G}from"./index-C40mfwFP.js";import{m as h}from"./messagesEventManager-Ambd-xXe.js";function $({menuIsOpen:a}){const{client:r}=f.useContext(j),t=f.useRef(null),d=async l=>{var n,o,u,i;const s=l.target.files;if(s.length&&s[0].size<4e6){const c=new FileReader;c.onload=x=>{var p,g,y,b,N,w,C;if(t.current){const S=t.current.querySelector("img");S&&((p=x.target)!=null&&p.result)&&(S.src=x.target.result.toString())}(g=t.current)==null||g.classList.add("flex"),(y=t.current)==null||y.classList.remove("hidden"),(N=(b=t.current)==null?void 0:b.querySelector("div#loading"))==null||N.classList.add("flex"),(C=(w=t.current)==null?void 0:w.querySelector("div#loading"))==null||C.classList.remove("hidden")},c.readAsDataURL(s[0]);const m=await L(s[0]);m!=null&&m.data&&r&&(await k({client_id:r==null?void 0:r.id,logo:m.data.url}),(o=(n=t.current)==null?void 0:n.querySelector("div#loading"))==null||o.classList.remove("flex"),(i=(u=t.current)==null?void 0:u.querySelector("div#loading"))==null||i.classList.add("hidden"))}};return e.jsx("div",{"data-menuisopen":a,className:"w-[40px] h-[40px] data-[menuisopen=true]:w-[100px] data-[menuisopen=true]:h-[100px] rounded-full overflow-hidden cursor-pointer border-4 border-primary-100 dark:border-light",children:e.jsxs("label",{className:"w-full h-full relative cursor-pointer",ref:t,onChange:d,children:[e.jsx("input",{type:"file",className:"hidden",accept:".png, .jpg, .jpeg, .webp"}),e.jsx("img",{src:(r==null?void 0:r.logo)||"https://via.placeholder.com/100",alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{id:"loading",className:"w-full h-full bg-zinc-800/50 absolute top-0 left-0 justify-center items-center hidden",children:e.jsx("div",{className:"w-[40px] h-[40px] border-2 border-t-primary-300 rounded-full animate-spin"})})]})})}function K(){const{client:a}=f.useContext(j),{setModalContent:r}=f.useContext(M),t=f.useRef(null),d=({currentTarget:s})=>{var i,c;s.dataset.overlay=!1,s.style.display=!1;const n=(i=t.current)==null?void 0:i.querySelector("input"),o=t.current,u=(c=t.current)==null?void 0:c.querySelector("div[data-save]");n&&o&&u&&(o.classList.add("border"),n.classList.remove("disabled"),u.dataset.save=!0)},l=async()=>{var i,c,m;const s=(i=t.current)==null?void 0:i.querySelector("input"),n=t.current,o=(c=t.current)==null?void 0:c.querySelector("div[data-save]"),u=(m=t.current)==null?void 0:m.querySelector("div[data-overlay]");if(a){const x=s==null?void 0:s.value.split(" "),[p,g]=x||[];p&&g?(await k({client_id:a==null?void 0:a.id,fullname:s==null?void 0:s.value}),s&&n&&o&&(n.classList.remove("border"),s.classList.add("disabled"),o.dataset.save=!1,u.dataset.overlay=!0,s.blur())):r({componentName:"modal_error_name",components:e.jsx(q,{message:"Digite seu nome e sobrenome",type:"WARNING",componentName:"modal_error_name"})})}};return e.jsx(v,{tip:"2 cliques para editar seu nome",children:e.jsxs("div",{className:"w-full px-2 flex justify-center gap-2 items-center rounded-lg relative",ref:t,children:[e.jsx("div",{className:"w-full h-full absolute data-[overlay=false]:hidden",onDoubleClick:d,"data-testid":"test-display","data-overlay":!0}),e.jsx("input",{type:"text",className:"text-xl bg-transparent text-center font-bold cursor-default whitespace-nowrap text-ellipsis overflow-hidden",onKeyDown:s=>s.code==="Enter"&&l(),defaultValue:a==null?void 0:a.fullname}),e.jsx("div",{"data-save":!1,onClick:l,className:"bg-light rounded-full justify-center items-center hidden data-[save=true]:flex",children:e.jsx(_,{className:"fill-green-500 text-2xl cursor-pointer","data-testid":"button-save"})})]})})}const V=({menuIsOpen:a})=>{const{client:r}=f.useContext(j),t=I(),d=()=>{localStorage.removeItem("token"),t("/login")},l=()=>{t("/panel?tab=5")};return r&&e.jsx("div",{className:"w-full min-h-[80px] flex flex-col gap-2 justify-center items-center relative",children:e.jsxs("div",{className:"w-4/5 flex flex-col justify-center items-center gap-2 border-b border-primary-100 dark:border-light/30 pb-8",children:[e.jsxs("div",{className:"w-full flex justify-center gap-2 items-end",children:[e.jsx(v,{tip:"Edite seu perfil",children:e.jsx(R,{"data-menuisopen":a,className:"text-3xl cursor-pointer hover:animate-spin data-[menuisopen=false]:hidden",onClick:l})}),e.jsx($,{menuIsOpen:a}),e.jsx(v,{tip:"Sair do seu painel",children:e.jsx(P,{"data-menuisopen":a,className:"text-3xl cursor-pointer -scale-x-100 hover:fill-red-500 transition-colors duration-200 data-[menuisopen=false]:hidden",onClick:d})})]}),e.jsxs("div",{className:`w-full flex flex-col ${a?"block":"hidden"}`,children:[e.jsx(K,{}),e.jsx("h3",{"data-ismessages":h(r.plan_management).maxMessages,className:"flex gap-1 justify-center items-center text-primary-200 dark:text-light font-bold data-[ismessages='0']:hidden",children:h(r.plan_management).reminingMessages+" / "+h(r.plan_management).maxMessages})]})]})})},W=[{name:"Meus chats",Icon:F},{name:"MÃ©tricas",Icon:z},{name:"Fonte de dados",Icon:D},{name:"Registros",Icon:U},{name:"Assinatura",Icon:A}];function H({menuIsOpen:a}){const r=I(),[t]=E(),d=l=>{r(`/panel?tab=${l}`)};return e.jsx("ul",{className:"w-full flex flex-col items-end",children:W.map((l,s)=>e.jsx("li",{"data-tab":Number(t.get("tab"))==s,className:"w-full py-3 flex gap-2 justify-center items-center text-center cursor-pointer font-bold text-xl hover:text-primary-300 hover:dark:text-light hover:bg-primary-100 hover:dark:bg-dark data-[tab=true]:dark:bg-dark transition-colors duration-300 group",onClick:()=>d(s),children:e.jsxs("div",{"data-menuisopen":a,className:"w-full data-[menuisopen=true]:w-4/5 flex justify-center data-[menuisopen=true]:justify-start items-center gap-2",children:[e.jsx(l.Icon,{className:"group-hover:fill-green_color text-xl transition-colors duration-100"}),e.jsx("p",{className:`group-hover:text-green_color transition-colors duration-100 whitespace-nowrap text-ellipsis ${a?"block":"hidden"}`,children:l.name})]})},l.name))})}const J=({menuIsOpen:a,setMenuIsOpen:r})=>e.jsx("div",{"data-menuisopen":a,className:"w-full absolute bottom-6 flex data-[menuisopen=true]:justify-end justify-center",children:a?e.jsx(T,{className:"text-4xl fill-zinc-100 cursor-pointer","data-control-arrow":"left",onClick:()=>r(!1)}):e.jsx(B,{className:"text-4xl fill-zinc-100 cursor-pointer","data-control-arrow":"right",onClick:()=>r(!0)})});function Q(){return e.jsx("h2",{className:"w-full flex justify-center items-center p-4",children:e.jsx("img",{src:G,alt:"Logo da empresa",className:"w-[120px]"})})}function Z(){const[a,r]=f.useState(!0);return e.jsxs("main",{"data-menuisopen":a,className:"w-[280px] data-[menuisopen=false]:w-[70px] relative h-full bg-gradient-to-b from-primary-100 via-light to-light dark:to-primary-300 dark:via-primary-300",children:[e.jsx(Q,{}),e.jsxs("nav",{className:"w-full py-4 relative",children:[e.jsx(V,{menuIsOpen:a}),e.jsx(H,{menuIsOpen:a})]}),e.jsx(J,{menuIsOpen:a,setMenuIsOpen:r})]})}export{Z as default};
