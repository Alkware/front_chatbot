import{r as h,C as y,H as b,aE as l,j as e,aF as z,aD as w,M as S,T as j,aG as I,l as R,u as T,Z as F,aH as D,P as k,W as P,aI as q,aJ as V,aK as B,aL as O,aM as H,aN as G,aO as Z,aP as K,aQ as W,aR as J,aS as Q,h as X,aT as Y}from"./index-PlygWcc3.js";import{m as v}from"./messagesEventManager-nPTWdocl.js";function $(){const{client:a}=h.useContext(y),r=h.useRef(null),[t]=b(),d=t.get(l.URL_NAME)===l.DEFAULT_VALUES.DEFAULT,m=async s=>{var i,n,c,u;const o=s.target.files;if(o.length&&o[0].size<4e6){const g=new FileReader;g.onload=f=>{var x,N,L,E,_,U,A;if(r.current){const C=r.current.querySelector("img");C&&((x=f.target)!=null&&x.result)&&(C.src=f.target.result.toString())}(N=r.current)==null||N.classList.add("flex"),(L=r.current)==null||L.classList.remove("hidden"),(_=(E=r.current)==null?void 0:E.querySelector("div#loading"))==null||_.classList.add("flex"),(A=(U=r.current)==null?void 0:U.querySelector("div#loading"))==null||A.classList.remove("hidden")},g.readAsDataURL(o[0]);const p=await z(o[0]);p!=null&&p.data&&a&&(await w({client_id:a==null?void 0:a.id,logo:p.data.url}),(n=(i=r.current)==null?void 0:i.querySelector("div#loading"))==null||n.classList.remove("flex"),(u=(c=r.current)==null?void 0:c.querySelector("div#loading"))==null||u.classList.add("hidden"))}};return e.jsx("div",{"data-ismenuresized":d,className:"w-[100px] h-[100px] md:w-[40px] md:h-[40px] md:data-[ismenuresized=true]:w-[80px] md:data-[ismenuresized=true]:h-[80px] rounded-full overflow-hidden cursor-pointer border-4 border-primary-100 dark:border-light",children:e.jsxs("label",{className:"w-full h-full relative cursor-pointer",ref:r,onChange:m,children:[e.jsx("input",{type:"file",className:"hidden",accept:".png, .jpg, .jpeg, .webp"}),e.jsx("img",{src:(a==null?void 0:a.logo)||"https://via.placeholder.com/100",alt:"",className:"w-full h-full object-contain"}),e.jsx("div",{id:"loading",className:"w-full h-full bg-zinc-800/50 absolute top-0 left-0 justify-center items-center hidden",children:e.jsx("div",{className:"w-[40px] h-[40px] border-2 border-t-primary-300 rounded-full animate-spin"})})]})})}function ee(){const{client:a}=h.useContext(y),{setModalContent:r}=h.useContext(S),t=h.useRef(null),d=({currentTarget:s})=>{var c,u;s.dataset.overlay=!1,s.style.display=!1;const o=(c=t.current)==null?void 0:c.querySelector("input"),i=t.current,n=(u=t.current)==null?void 0:u.querySelector("div[data-save]");o&&i&&n&&(i.classList.add("border"),o.classList.remove("disabled"),n.dataset.save=!0)},m=async()=>{var c,u,g;const s=(c=t.current)==null?void 0:c.querySelector("input"),o=t.current,i=(u=t.current)==null?void 0:u.querySelector("div[data-save]"),n=(g=t.current)==null?void 0:g.querySelector("div[data-overlay]");if(a){const p=s==null?void 0:s.value.split(" "),[f,x]=p||[];f&&x?(await w({client_id:a==null?void 0:a.id,fullname:s==null?void 0:s.value}),s&&o&&i&&(o.classList.remove("border"),s.classList.add("disabled"),i.dataset.save=!1,n.dataset.overlay=!0,s.blur())):r({componentName:"modal_error_name",components:e.jsx(R,{message:"Digite seu nome e sobrenome",type:"WARNING",componentName:"modal_error_name"})})}};return e.jsx(j,{tip:"2 cliques para editar seu nome",children:e.jsxs("div",{className:"w-full px-2 flex justify-center gap-2 items-center rounded-lg relative",ref:t,children:[e.jsx("div",{className:"w-full h-full absolute data-[overlay=false]:hidden",onDoubleClick:d,"data-testid":"test-display","data-overlay":!0}),e.jsx("input",{type:"text",className:"text-xl bg-transparent text-primary-100 dark:text-light text-center font-bold cursor-default whitespace-nowrap text-ellipsis overflow-hidden",onKeyDown:s=>s.code==="Enter"&&m(),defaultValue:a==null?void 0:a.fullname}),e.jsx("div",{"data-save":!1,onClick:m,className:"bg-light rounded-full justify-center items-center hidden data-[save=true]:flex",children:e.jsx(I,{className:"fill-green-500 text-2xl cursor-pointer","data-testid":"button-save"})})]})})}const ae=({})=>{const{setModalContent:a,clearModal:r}=h.useContext(S),{client:t}=h.useContext(y),d=T(),[m]=b(),s=m.get(l.URL_NAME)===l.DEFAULT_VALUES.DEFAULT,o=()=>{function n(){localStorage.removeItem("token"),r("modal_confirm_exit_panel"),d("/login")}a({componentName:"modal_confirm_exit_panel",components:e.jsx(k,{children:e.jsx(P,{title:"Tem certeza que deseja sair do painel?",confirmFunction:n,cancelFuntion:()=>r("modal_confirm_exit_panel")})})})},i=()=>{d("/panel?tab=6")};return t&&e.jsx("div",{className:"w-full flex flex-col gap-2 justify-center items-center relative",children:e.jsxs("div",{className:"w-4/5 pb-2 flex flex-col justify-center items-center gap-2 border-b border-primary-100 dark:border-light/30",children:[e.jsxs("div",{className:"w-full flex justify-center gap-2 items-end",children:[e.jsx(j,{tip:"Edite seu perfil",children:e.jsx(F,{"data-ismenuresized":s,className:"text-2xl cursor-pointer hover:animate-spin md:data-[ismenuresized=false]:hidden fill-primary-100 dark:fill-light",onClick:i})}),e.jsx($,{}),e.jsx(j,{tip:"Sair do seu painel",children:e.jsx(D,{"data-ismenuresized":s,className:"text-2xl cursor-pointer -scale-x-100 fill-primary-100 dark:fill-light hover:fill-red-500 transition-colors duration-200 md:data-[ismenuresized=false]:hidden",onClick:o})})]}),e.jsxs("div",{"data-ismenuresized":s,className:"w-full flex flex-col md:data-[ismenuresized=false]:hidden",children:[e.jsx(ee,{}),e.jsx("h3",{"data-ismessages":v(t.plan_management).maxMessages,className:"flex gap-1 justify-center items-center text-primary-100 dark:text-light font-bold data-[ismessages='0']:hidden",children:v(t.plan_management).totalMessages+" / "+v(t.plan_management).maxMessages}),e.jsxs("h3",{"data-ismessages":v(t.plan_management).maxBonus,className:"flex gap-1 justify-center items-center bg-primary-300 p-1 rounded-lg border border-primary-100 text-primary-100 dark:text-light font-bold data-[ismessages='0']:hidden",children:["Bônus",e.jsx("span",{children:v(t.plan_management).reminingMessagesBonus+" / "+v(t.plan_management).maxBonus})]})]})]})})},M=[{tab:"my_chats",name:"Meus chats",Icon:V},{tab:"metrics",name:"Métricas",Icon:B},{tab:"database",name:"Fonte de dados",Icon:O},{tab:"records",name:"Registros",Icon:H,topics:[{tab:"conversations",name:"Conversas",Icon:G},{tab:"leads",name:"Leads",Icon:Z}]},{tab:"payment",name:"Assinatura",Icon:K},{tab:"help_center",name:"Central de ajuda",Icon:W}];function se(){const[a,r]=b(),t=h.useRef(null),d=a.get(l.URL_NAME)===l.DEFAULT_VALUES.DEFAULT,m=s=>{var p;const o=s.currentTarget,i=o.dataset.tab,n=(p=t.current)==null?void 0:p.querySelectorAll("div[data-container='topic']");if(!i)return;const c=M.find(f=>f.tab===i);c!=null&&c.topics?u(i):(g(i),!(o.dataset.container==="sub_topic")&&u(i));function u(f){n==null||n.forEach(x=>{x.classList.remove("hidden"),x.classList.add("hidden")}),n==null||n.forEach(x=>{x.dataset.tab===f&&x.classList.toggle("hidden")})}function g(f){a.set("tab",f),r(a)}};return e.jsx("ul",{ref:t,className:"w-full",children:M.map((s,o)=>{var i;return e.jsxs("li",{"data-tab":Number(a.get("tab"))==o,"data-ismenuresize":d,className:"w-full flex flex-col justify-center items-end cursor-pointer text-xl",children:[e.jsxs("div",{"data-tab":s.tab,"data-ismenuresize":d,className:"w-full p-2 pl-2 flex gap-2 items-center justify-between data-[ismenuresize=false]:justify-center group",onClick:m,children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(s.Icon,{className:"group-hover:fill-primary-100 text-primary-100 dark:text-light text-xl transition-colors duration-100"}),e.jsx("h2",{className:"group-data-[ismenuresize=false]:hidden group-hover:text-primary-100",children:s.name})]}),e.jsx(q,{"data-hastopic":!!((i=s==null?void 0:s.topics)!=null&&i.length),className:"group-data-[ismenuresize=false]:hidden data-[hastopic=false]:hidden self-center"})]}),e.jsx("div",{"data-container":"topic","data-tab":s.tab,className:"w-[90%] flex-col hidden",children:s.topics&&s.topics.map(n=>e.jsxs("div",{"data-container":"sub_topic","data-tab":n.tab,"data-ismenuresize":d,className:"w-full flex items-center gap-2 group data-[ismenuresize=false]:hidden",onClick:m,children:[e.jsx(n.Icon,{className:"group-hover:fill-primary-100 text-primary-100 dark:text-light text-base transition-colors duration-100"}),e.jsx("h2",{className:"text-base group-hover:text-primary-100",children:n.name})]},n.tab))})]},s.name)})})}const te=()=>{const[a,r]=b(),t=a.get(l.URL_NAME)===l.DEFAULT_VALUES.DEFAULT,d=()=>{const m=a.get(l.URL_NAME);t||(a.append(l.URL_NAME,l.DEFAULT_VALUES.DEFAULT),r(a)),m===l.DEFAULT_VALUES.DEFAULT?a.set(l.URL_NAME,l.DEFAULT_VALUES.RESIZED):a.set(l.URL_NAME,l.DEFAULT_VALUES.DEFAULT),r(a)};return e.jsx("div",{"data-ismenuresize":t,className:"hidden md:flex w-full data-[ismenuresize=true]:justify-end justify-center",children:t?e.jsx(J,{className:"text-4xl fill-primary-100 dark:fill-zinc-100 cursor-pointer","data-control-arrow":"left",onClick:d}):e.jsx(Q,{className:"text-4xl fill-primary-100 dark:fill-zinc-100 cursor-pointer","data-control-arrow":"right",onClick:d})})};function ie(){const[a]=b(),r="menu_mobile",t=a.get(l.URL_NAME)===l.DEFAULT_VALUES.DEFAULT,d=a.get(r)==="open";return e.jsx("div",{"data-isresizemenu":t,"data-isopenmobilemenu":d,className:"w-full md:w-[250px] fixed z-[999] md:relative md:data-[isresizemenu=false]:w-[70px] bg-primary-100 rounded-b-md md:rounded-none",children:e.jsxs("div",{"data-isopenmobilemenu":d,className:"flex flex-col min-h-screen py-4 md:py-0 data-[isopenmobilemenu='false']:hidden md:data-[isopenmobilemenu='false']:flex bg-gradient-to-b from-primary-100 via-light to-light dark:to-primary-300 dark:via-primary-300",children:[e.jsx(X,{urlParamName:r,className:"md:hidden"}),e.jsx(Y,{}),e.jsxs("nav",{className:"w-full h-full py-0 my-4 relative",children:[e.jsx(ae,{}),e.jsx(se,{})]}),e.jsx(te,{})]})})}export{ie as default};
