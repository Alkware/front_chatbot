import{r as reactExports,M as ModalContext,j as jsxRuntimeExports,B as Button,d as axios,A as API_URL,C as ClientContext,F as FaBell,e as MdLogout,f as MdNotifications,g as MdNotificationImportant,c as PopUp,P as PopOver,T as TipContainer,h as FaSun,i as FaMoon,k as MenuHambuguer,m as IoCaretDownOutline,n as updateTutorialClient,a as useNavigate,o as IoAddOutline,p as MdAdd,t as twMerge,q as FaDownload,s as FaCopy,v as FaArrowUpRightFromSquare,w as i,x as n,y as appendErrors,z as useFormContext,D as FaArrowLeft,E as FaArrowRight,G as FaCircleNotch,H as FaLock,J as useFieldArray,R as Root,K as MdDelete,L as useSearchParams,N as ICON_NAME_URL,O as useForm,Q as chatSchema,S as CTA_NAME_URL,U as getPlanManagementById,V as CallToActionFormChat,W as CHAT_ICONS_MODELS,X as checkSlugIsAvailable,Y as updateProject,Z as deleteProject,$ as FaLink,a0 as FaGear,a1 as ToggleComponent,a2 as FaChartColumn,a3 as updateIsOnlineProject,a4 as MAX_CONTAINER_TO_CREATE_CHAT,a5 as Select,a6 as createLog,a7 as MdStar,a8 as FaArrowRotateLeft,a9 as FaBorderAll,aa as BsStars,ab as getClientById,ac as FaPlus,ad as MdClose,ae as FormProvider,af as TextArea,I as Input,ag as MdSave,ah as DATABASE_NAME_TO_SAVE_LOCALSTORAGE,ai as PREVIEW_IMAGE,aj as FaCircleInfo,ak as FaInfo,al as FaBook,am as FaSuitcase,an as OpeningHours,ao as FaFaceGrinBeam,ap as databaseSchema,aq as saveImage,ar as MAX_CONTAINER_TO_CREATE_DATABASE,as as FaDatabase,at as MdEdit,au as FaCheckCircle,av as FaCircleQuestion,aw as FILTER_BY_PROJECT_NAME_URL,ax as TAB_NAME_URL,ay as FILTER_BY_TIME_NAME_URL,az as FaArrowCircleLeft,aA as FaArrowCircleRight,aB as InputPassword,aC as FaSave,aD as changePasswordClient,aE as z,aF as t,aG as objectType,aH as checkUserIsAvailable,u as updateClient}from"./index-jDdyFPtE.js";import{C as Confirm,m as messagesEventManager}from"./messagesEventManager-RvmJBvzC.js";import{c as convertDateInHour}from"./Panel-o2be8GTZ.js";const months=[{short:"Jan",complete:"Janeiro"},{short:"Fev",complete:"Fevereiro"},{short:"Mar",complete:"Março"},{short:"Abr",complete:"Abril"},{short:"Mai",complete:"Maio"},{short:"Jun",complete:"Junho"},{short:"Jul",complete:"Julho"},{short:"Ago",complete:"Agosto"},{short:"Set",complete:"Setembro"},{short:"Out",complete:"Outubro"},{short:"Nov",complete:"Novembro"},{short:"Dez",complete:"Dezembro"}];function formatDate(e=new Date){const s=new Date(e);s.toLocaleTimeString("pt-BR",{hour12:!1});const a=s.getTimezoneOffset(),o=s.getMonth(),l=s.getUTCHours()-a/60,r=s.toLocaleDateString(),c=`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}`,u=`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`,m=`${s.getDay()} de ${months[o].short} - ${u}`,d=+`${s.getFullYear()}${(o+1).toString().padStart(2,"0")}${s.getDate().toString().padStart(2,"0")}${s.getHours().toString().padStart(2,"0")}${s.getMinutes().toString().padStart(2,"0")}${s.getMilliseconds()}`;return{currentHour:l,fullDate:r,fullHour:c,shortHour:u,dateFormat_A:m,fullDateWithHour:`${r} - ${c}`,dateTransformNumber:d}}function DisplayNotification({notification,setDisplayNotification}){const{clearModal}=reactExports.useContext(ModalContext),handleClickAction=()=>{eval(notification.notification.code),setDisplayNotification(!1)};return jsxRuntimeExports.jsxs("div",{className:"w-screen flex flex-col justify-start md:justify-center items-center min-h-screen md:min-h-0 md:min-w-[500px] md:max-w-[80vw] gap-4 relative p-4",children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-2xl text-center font-bold py-6",children:notification.notification.title}),jsxRuntimeExports.jsx("p",{dangerouslySetInnerHTML:{__html:notification.notification.describe},className:"max-h-[70vh] overflow-auto"}),jsxRuntimeExports.jsxs("div",{className:"flex p-4 gap-8 items-center ",children:[jsxRuntimeExports.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:()=>clearModal(null,{clearLast:!0}),children:"Fechar"}),!!notification.notification.code&&jsxRuntimeExports.jsx(Button,{onClick:handleClickAction,children:notification.notification.cta_text})]})]})}async function updateReadNotification(e){return await axios.post(`${API_URL}/notification/${e}/read`).catch(a=>console.warn(a))}async function updateReadAllNotifications(e){return await axios.post(`${API_URL}/notification/${e}/all_read`).catch(a=>console.warn(a))}function Notification(){const{client:e}=reactExports.useContext(ClientContext),{setModalContent:s}=reactExports.useContext(ModalContext),[a,o]=reactExports.useState(),[l,r]=reactExports.useState(),c=l==null?void 0:l.filter(d=>!d.read);reactExports.useEffect(()=>{var x;const d=(x=e==null?void 0:e.notification_client)==null?void 0:x.sort((h,p)=>!h.read&&p.read?-1:h.read&&!p.read?1:0);r(d)},[]);const u=async d=>{const x=await updateReadNotification(d.id);(x==null?void 0:x.status)===200&&(r(h=>{if(h){const p=h.filter(g=>g.id!==d.id),f=h.find(g=>g.id===d.id);if(f)return f.read=!0,p.push(f),p}}),s({componentName:"modal_display_notification",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(DisplayNotification,{notification:d,setDisplayNotification:o})})}))},m=async()=>{if(!e)return;await updateReadAllNotifications(e.id)?r(x=>{if(x)return x.map(h=>(h.read=!0,h))}):s({componentName:"modal_failed_marked_read_notification",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_failed_marked_read_notification",type:"WARNING",message:"Não foi possível marcar todas as notificações como lida, por favor tente mais tarde!"})})};return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:()=>o(d=>!d),children:[jsxRuntimeExports.jsx("span",{"data-isnotification":!!(c!=null&&c.length),className:"w-[20px] h-[20px] data-[isnotification=false]:hidden flex justify-center items-center text-xs bg-red-800 border border-primary-300 rounded-full absolute -top-[10px] -right-[10px]",children:c==null?void 0:c.length}),jsxRuntimeExports.jsx(FaBell,{className:"text-2xl fill-light cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{"data-display":!!a,className:"w-full h-screen md:h-auto md:min-w-[400px] data-[display=false]:hidden flex flex-col fixed md:absolute z-50 md:rounded-md bg-primary-100 p-4 top-0 md:top-auto right-0 md:translate-x-[122px] md:my-2",children:[jsxRuntimeExports.jsx(MdLogout,{className:" text-4xl absolute top-2 right-3  md:hidden",onClick:()=>o(d=>!d)}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center border-b border-white/30 my-8 md:my-0",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-light",children:"Notificações"}),jsxRuntimeExports.jsx(Button,{onClick:m,children:"Marcar todas como lida"})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col  md:max-h-[300px] overflow-auto",children:l!=null&&l.length?l==null?void 0:l.map(d=>jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center min-h-[60px] border-b border-white/30 hover:bg-primary-200/50 transition-colors cursor-pointer",onClick:()=>u(d),children:[jsxRuntimeExports.jsx("div",{className:"min-w-1/3",children:d.read?jsxRuntimeExports.jsx(MdNotifications,{className:"text-2xl fill-zinc-300"}):jsxRuntimeExports.jsx(MdNotificationImportant,{className:"text-2xl fill-orange-400"})}),jsxRuntimeExports.jsxs("div",{"data-isread":!!d.read,className:"flex flex-col data-[isread=true]:opacity-60 text-light",children:[jsxRuntimeExports.jsx("h2",{className:"font-medium text-lg",children:d.notification.title}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-end px-2",children:[jsxRuntimeExports.jsx("p",{className:"w-2/3 line-clamp-1 opacity-90",dangerouslySetInnerHTML:{__html:d.notification.describe}}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-70",children:formatDate(d.notification.created_at).dateFormat_A})]})]})]},d.id)):jsxRuntimeExports.jsx("h2",{className:"w-full text-center py-4",children:"Você ainda não recebeu nenhuma notificação!"})})]})]})}function MenuIconsHeaderPanel(){reactExports.useEffect(()=>{const s=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",s)},[]);const e=()=>{const s=localStorage.theme==="dark";document.documentElement.classList.toggle("dark",!s);const a=s?"light":"dark";localStorage.theme=a};return jsxRuntimeExports.jsxs("div",{className:"flex gap-3 px-8",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Notificações",positionY:"BOTTOM",positionX:"LEFT",children:jsxRuntimeExports.jsx(Notification,{})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Escolha entre thema light ou dark",positionY:"BOTTOM",positionX:"LEFT",children:jsxRuntimeExports.jsxs("div",{className:"bg-primary-100 border border-light/50 rounded-full p-1",onClick:e,children:[jsxRuntimeExports.jsx(FaSun,{className:"text-2xl fill-light cursor-pointer hidden dark:block"}),jsxRuntimeExports.jsx(FaMoon,{className:"text-2xl fill-light cursor-pointer block dark:hidden"})]})})]})}function PanelHeader(){return jsxRuntimeExports.jsxs("header",{className:"w-full h-[8%] px-0 md:px-20 min-h-[70px] col-span-8 row-span-1 flex justify-between md:justify-end items-center md:bg-transparent",children:[jsxRuntimeExports.jsx(MenuHambuguer,{urlParamName:"menu_mobile",className:"md:hidden"}),jsxRuntimeExports.jsx(MenuIconsHeaderPanel,{})]})}function TutoralContainer({children:e,title:s,text:a,positionY:o="BOTTOM",positionX:l="CENTER",hidden:r}){const c=reactExports.useRef(null),{client:u,setClient:m}=reactExports.useContext(ClientContext),d=async()=>{if(u){const x=await updateTutorialClient(u.id,!1);m(x)}};return u&&jsxRuntimeExports.jsxs("div",{className:"flex items-center relative group",children:[jsxRuntimeExports.jsx("div",{"data-active":u.tutorial,"data-hidden":r,className:"data-[hidden=true]:hidden data-[active=false]:hidden w-screen h-screen backdrop-blur-sm fixed top-0 left-0 z-40"}),jsxRuntimeExports.jsxs("div",{"data-active":u.tutorial,ref:c,"data-positiony":o,"data-positionx":l,"data-hidden":r,className:`max-w-[70vw] border border-light/40 bg-primary-100 p-1 rounded-xl absolute z-40 
                    data-[positiony=TOP]:-top-full data-[positiony=TOP]:-translate-y-3 data-[positiony=BOTTOM]:-bottom-full data-[positiony=BOTTOM]:translate-y-[90%]
                    data-[positionx=RIGHT]:left-4/5 data-[positionx=CENTER]:left-1/2 data-[positionx=CENTER]:-translate-x-1/2 data-[positionx=LEFT]:right-0
                    text-center transition-opacity data-[hidden=true]:hidden data-[active=false]:hidden`,children:[jsxRuntimeExports.jsxs("div",{className:"bg-primary-100 rounded-md flex flex-col justify-center items-center px-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-center py-2 font-bold text-xl text-light",children:s}),jsxRuntimeExports.jsx("p",{className:"w-[70vw] md:w-[400px] px-4 text-center text-light text-lg",dangerouslySetInnerHTML:{__html:a}}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mt-8 text-light text-base",children:jsxRuntimeExports.jsx("span",{className:"underline opacity-70 cursor-pointer",onClick:d,children:"Pular tutorial"})})]}),jsxRuntimeExports.jsx(IoCaretDownOutline,{"data-positiony":o,"data-positionx":l,className:`border-light/40 fill-primary-100 absolute 
                        data-[positiony='BOTTOM']:top-0 data-[positiony='BOTTOM']:-translate-y-[78%] data-[positiony='BOTTOM']:rotate-180
                        data-[positionx='LEFT']:right-2 data-[positionx='CENTER']:left-1/2 data-[positionx=CENTER]:-translate-x-1/2
                        `})]}),jsxRuntimeExports.jsx("div",{"data-hidden":r,className:"z-40 data-[hidden=true]:z-0",children:e})]})}function ButtonCreateChat({plan_management_id:e,projects:s,index:a}){const{client:o}=reactExports.useContext(ClientContext),{setModalContent:l,clearModal:r}=reactExports.useContext(ModalContext),c=useNavigate(),u=()=>{if(o!=null&&o.plan_management)if(o!=null&&o.plan_management.prompt.length){const m=Number(o.plan_management.plan.max_projects.default),d=o.plan_management.project.length;o.plan_management.status!=="DISABLED"?m>d?c(`/create-chat/${e}`):l({componentName:"modal_reached_max_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Você atingiu o número maximo de chats por plano.",componentName:"modal_reached_max_plan"})}):l({componentName:"modal_plan_is_desabled",components:jsxRuntimeExports.jsx(PopOver,{message:"O plano da sua conta está desabilitado.",componentName:"modal_plan_is_desabled",functionAfterComplete:()=>c("/panel?tab=4")})})}else l({componentName:"modal_create_database",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl text-center",children:["Para criar um novo chat, antes é necessário ",jsxRuntimeExports.jsx("br",{}),"  criar uma fonte de dados."]}),jsxRuntimeExports.jsxs("h2",{className:"text-lg text-center opacity-80",children:["Nossa inteligência artifical vai analisar seus dados e ",jsxRuntimeExports.jsx("br",{})," responder as dúvidas do usuário ",jsxRuntimeExports.jsx("br",{}),"conforme as informações passadas na fonte de dados."]}),jsxRuntimeExports.jsxs(Button,{customClass:"my-4",onClick:()=>{c("/panel?tab=database"),r("modal_create_database")},children:[jsxRuntimeExports.jsx(MdAdd,{}),"Criar fonte de dados"]})]})})});else l({componentName:"modal_without_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan",functionAfterComplete:()=>c("/panel?tab=4")})})};return jsxRuntimeExports.jsx("div",{onClick:u,className:"w-4/5 xs:w-1/2 md:w-1/4 min-w-[200px] min-h-[200px] cursor-pointer flex justify-center items-center",children:jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos criar seu primeiro chat",text:'Clique em <span class="text-3xl font-medium mx-1">+</span> para criar seu primeiro chat de forma simples e fácil',positionX:window.innerWidth>=800?"RIGHT":"CENTER",hidden:a!==0||s.length!==0,children:jsxRuntimeExports.jsx(TipContainer,{tip:"Crie um novo chat",children:jsxRuntimeExports.jsx(IoAddOutline,{className:"text-6xl text-light dark:text-primary-100"})})})})}function Container({children:e,title:s,className:a}){return jsxRuntimeExports.jsxs("div",{className:twMerge("w-full md:min-h-[70vh] flex flex-col gap-4 justify-start items-start bg-light dark:bg-dark rounded-xl border border-primary-100 dark:border-primary-300 relative ",a),children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-primary-100 dark:text-light text-2xl font-semibold uppercase p-4 px-8",children:s}),e]})}var browser={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function e(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};utils$1.getSymbolTotalCodewords=function e(s){return CODEWORDS_COUNT[s]};utils$1.getBCHDigit=function(e){let s=0;for(;e!==0;)s++,e>>>=1;return s};utils$1.setToSJISFunction=function e(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=s};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function e(s){return toSJISFunction(s)};var errorCorrectionLevel={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function s(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+a)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,l){if(e.isValid(o))return o;try{return s(o)}catch{return l}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(e){const s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)===1},put:function(e,s){for(let a=0;a<s;a++)this.putBit((e>>>s-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,s,a,o){const l=e*this.size+s;this.data[l]=a,o&&(this.reservedBit[l]=!0)};BitMatrix$1.prototype.get=function(e,s){return this.data[e*this.size+s]};BitMatrix$1.prototype.xor=function(e,s,a){this.data[e*this.size+s]^=a};BitMatrix$1.prototype.isReserved=function(e,s){return this.reservedBit[e*this.size+s]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(e){const s=utils$1.getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const l=Math.floor(o/7)+2,r=s(o),c=r===145?26:Math.ceil((r-13)/(2*l-2))*2,u=[r-7];for(let m=1;m<l-1;m++)u[m]=u[m-1]-c;return u.push(6),u.reverse()},e.getPositions=function(o){const l=[],r=e.getRowColCoords(o),c=r.length;for(let u=0;u<c;u++)for(let m=0;m<c;m++)u===0&&m===0||u===0&&m===c-1||u===c-1&&m===0||l.push([r[u],r[m]]);return l}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function e(s){const a=getSymbolSize(s);return[[0,0],[a-FINDER_PATTERN_SIZE,0],[0,a-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};e.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},e.from=function(l){return e.isValid(l)?parseInt(l,10):void 0},e.getPenaltyN1=function(l){const r=l.size;let c=0,u=0,m=0,d=null,x=null;for(let h=0;h<r;h++){u=m=0,d=x=null;for(let p=0;p<r;p++){let f=l.get(h,p);f===d?u++:(u>=5&&(c+=s.N1+(u-5)),d=f,u=1),f=l.get(p,h),f===x?m++:(m>=5&&(c+=s.N1+(m-5)),x=f,m=1)}u>=5&&(c+=s.N1+(u-5)),m>=5&&(c+=s.N1+(m-5))}return c},e.getPenaltyN2=function(l){const r=l.size;let c=0;for(let u=0;u<r-1;u++)for(let m=0;m<r-1;m++){const d=l.get(u,m)+l.get(u,m+1)+l.get(u+1,m)+l.get(u+1,m+1);(d===4||d===0)&&c++}return c*s.N2},e.getPenaltyN3=function(l){const r=l.size;let c=0,u=0,m=0;for(let d=0;d<r;d++){u=m=0;for(let x=0;x<r;x++)u=u<<1&2047|l.get(d,x),x>=10&&(u===1488||u===93)&&c++,m=m<<1&2047|l.get(x,d),x>=10&&(m===1488||m===93)&&c++}return c*s.N3},e.getPenaltyN4=function(l){let r=0;const c=l.data.length;for(let m=0;m<c;m++)r+=l.data[m];return Math.abs(Math.ceil(r*100/c/5)-10)*s.N4};function a(o,l,r){switch(o){case e.Patterns.PATTERN000:return(l+r)%2===0;case e.Patterns.PATTERN001:return l%2===0;case e.Patterns.PATTERN010:return r%3===0;case e.Patterns.PATTERN011:return(l+r)%3===0;case e.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(r/3))%2===0;case e.Patterns.PATTERN101:return l*r%2+l*r%3===0;case e.Patterns.PATTERN110:return(l*r%2+l*r%3)%2===0;case e.Patterns.PATTERN111:return(l*r%3+(l+r)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(l,r){const c=r.size;for(let u=0;u<c;u++)for(let m=0;m<c;m++)r.isReserved(m,u)||r.xor(m,u,a(l,m,u))},e.getBestMask=function(l,r){const c=Object.keys(e.Patterns).length;let u=0,m=1/0;for(let d=0;d<c;d++){r(d),e.applyMask(d,l);const x=e.getPenaltyN1(l)+e.getPenaltyN2(l)+e.getPenaltyN3(l)+e.getPenaltyN4(l);e.applyMask(d,l),x<m&&(m=x,u=d)}return u}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function e(s,a){switch(a){case ECLevel$1.L:return EC_BLOCKS_TABLE[(s-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(s-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(s-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(s-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function e(s,a){switch(a){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(s-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(s-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(s-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(s-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function e(){let s=1;for(let a=0;a<255;a++)EXP_TABLE[a]=s,LOG_TABLE[s]=a,s<<=1,s&256&&(s^=285);for(let a=255;a<512;a++)EXP_TABLE[a]=EXP_TABLE[a-255]})();galoisField.log=function e(s){if(s<1)throw new Error("log("+s+")");return LOG_TABLE[s]};galoisField.exp=function e(s){return EXP_TABLE[s]};galoisField.mul=function e(s,a){return s===0||a===0?0:EXP_TABLE[LOG_TABLE[s]+LOG_TABLE[a]]};(function(e){const s=galoisField;e.mul=function(o,l){const r=new Uint8Array(o.length+l.length-1);for(let c=0;c<o.length;c++)for(let u=0;u<l.length;u++)r[c+u]^=s.mul(o[c],l[u]);return r},e.mod=function(o,l){let r=new Uint8Array(o);for(;r.length-l.length>=0;){const c=r[0];for(let m=0;m<l.length;m++)r[m]^=s.mul(l[m],c);let u=0;for(;u<r.length&&r[u]===0;)u++;r=r.slice(u)}return r},e.generateECPolynomial=function(o){let l=new Uint8Array([1]);for(let r=0;r<o;r++)l=e.mul(l,new Uint8Array([1,s.exp(r)]));return l}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function e(s){this.degree=s,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function e(s){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(s.length+this.degree);a.set(s);const o=Polynomial.mod(a,this.genPoly),l=this.degree-o.length;if(l>0){const r=new Uint8Array(this.degree);return r.set(o,l),r}return o};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function e(s){return!isNaN(s)&&s>=1&&s<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function e(s){return TEST_KANJI.test(s)};regex.testNumeric=function e(s){return TEST_NUMERIC.test(s)};regex.testAlphanumeric=function e(s){return TEST_ALPHANUMERIC.test(s)};(function(e){const s=versionCheck,a=regex;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(r,c){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!s.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?r.ccBits[0]:c<27?r.ccBits[1]:r.ccBits[2]},e.getBestModeForData=function(r){return a.testNumeric(r)?e.NUMERIC:a.testAlphanumeric(r)?e.ALPHANUMERIC:a.testKanji(r)?e.KANJI:e.BYTE},e.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},e.isValid=function(r){return r&&r.bit&&r.ccBits};function o(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+l)}}e.from=function(r,c){if(e.isValid(r))return r;try{return o(r)}catch{return c}}})(mode);(function(e){const s=utils$1,a=errorCorrectionCode,o=errorCorrectionLevel,l=mode,r=versionCheck,c=7973,u=s.getBCHDigit(c);function m(p,f,g){for(let j=1;j<=40;j++)if(f<=e.getCapacity(j,g,p))return j}function d(p,f){return l.getCharCountIndicator(p,f)+4}function x(p,f){let g=0;return p.forEach(function(j){const R=d(j.mode,f);g+=R+j.getBitsLength()}),g}function h(p,f){for(let g=1;g<=40;g++)if(x(p,g)<=e.getCapacity(g,f,l.MIXED))return g}e.from=function(f,g){return r.isValid(f)?parseInt(f,10):g},e.getCapacity=function(f,g,j){if(!r.isValid(f))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=l.BYTE);const R=s.getSymbolTotalCodewords(f),_=a.getTotalCodewordsCount(f,g),N=(R-_)*8;if(j===l.MIXED)return N;const y=N-d(j,f);switch(j){case l.NUMERIC:return Math.floor(y/10*3);case l.ALPHANUMERIC:return Math.floor(y/11*2);case l.KANJI:return Math.floor(y/13);case l.BYTE:default:return Math.floor(y/8)}},e.getBestVersionForData=function(f,g){let j;const R=o.from(g,o.M);if(Array.isArray(f)){if(f.length>1)return h(f,R);if(f.length===0)return 1;j=f[0]}else j=f;return m(j.mode,j.getLength(),R)},e.getEncodedBits=function(f){if(!r.isValid(f)||f<7)throw new Error("Invalid QR Code version");let g=f<<12;for(;s.getBCHDigit(g)-u>=0;)g^=c<<s.getBCHDigit(g)-u;return f<<12|g}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function e(s,a){const o=s.bit<<3|a;let l=o<<10;for(;Utils$3.getBCHDigit(l)-G15_BCH>=0;)l^=G15<<Utils$3.getBCHDigit(l)-G15_BCH;return(o<<10|l)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function e(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};NumericData.prototype.getLength=function e(){return this.data.length};NumericData.prototype.getBitsLength=function e(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function e(s){let a,o,l;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),l=parseInt(o,10),s.put(l,10);const r=this.data.length-a;r>0&&(o=this.data.substr(a),l=parseInt(o,10),s.put(l,r*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function e(s){return 11*Math.floor(s/2)+6*(s%2)};AlphanumericData.prototype.getLength=function e(){return this.data.length};AlphanumericData.prototype.getBitsLength=function e(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function e(s){let a;for(a=0;a+2<=this.data.length;a+=2){let o=ALPHA_NUM_CHARS.indexOf(this.data[a])*45;o+=ALPHA_NUM_CHARS.indexOf(this.data[a+1]),s.put(o,11)}this.data.length%2&&s.put(ALPHA_NUM_CHARS.indexOf(this.data[a]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function e(s){for(var a=[],o=s.length,l=0;l<o;l++){var r=s.charCodeAt(l);if(r>=55296&&r<=56319&&o>l+1){var c=s.charCodeAt(l+1);c>=56320&&c<=57343&&(r=(r-55296)*1024+c-56320+65536,l+=1)}if(r<128){a.push(r);continue}if(r<2048){a.push(r>>6|192),a.push(r&63|128);continue}if(r<55296||r>=57344&&r<65536){a.push(r>>12|224),a.push(r>>6&63|128),a.push(r&63|128);continue}if(r>=65536&&r<=1114111){a.push(r>>18|240),a.push(r>>12&63|128),a.push(r>>6&63|128),a.push(r&63|128);continue}a.push(239,191,189)}return new Uint8Array(a).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,typeof e=="string"&&(e=encodeUtf8(e)),this.data=new Uint8Array(e)}ByteData.getBitsLength=function e(s){return s*8};ByteData.prototype.getLength=function e(){return this.data.length};ByteData.prototype.getBitsLength=function e(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(e){for(let s=0,a=this.data.length;s<a;s++)e.put(this.data[s],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function e(s){return s*13};KanjiData.prototype.getLength=function e(){return this.data.length};KanjiData.prototype.getBitsLength=function e(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(e){let s;for(s=0;s<this.data.length;s++){let a=Utils$2.toSJIS(this.data[s]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),e.put(a,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(e){var s={single_source_shortest_paths:function(a,o,l){var r={},c={};c[o]=0;var u=s.PriorityQueue.make();u.push(o,0);for(var m,d,x,h,p,f,g,j,R;!u.empty();){m=u.pop(),d=m.value,h=m.cost,p=a[d]||{};for(x in p)p.hasOwnProperty(x)&&(f=p[x],g=h+f,j=c[x],R=typeof c[x]>"u",(R||j>g)&&(c[x]=g,u.push(x,g),r[x]=d))}if(typeof l<"u"&&typeof c[l]>"u"){var _=["Could not find a path from ",o," to ",l,"."].join("");throw new Error(_)}return r},extract_shortest_path_from_predecessor_list:function(a,o){for(var l=[],r=o;r;)l.push(r),a[r],r=a[r];return l.reverse(),l},find_path:function(a,o,l){var r=s.single_source_shortest_paths(a,o,l);return s.extract_shortest_path_from_predecessor_list(r,l)},PriorityQueue:{make:function(a){var o=s.PriorityQueue,l={},r;a=a||{};for(r in o)o.hasOwnProperty(r)&&(l[r]=o[r]);return l.queue=[],l.sorter=a.sorter||o.default_sorter,l},default_sorter:function(a,o){return a.cost-o.cost},push:function(a,o){var l={value:a,cost:o};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=s})(dijkstra);var dijkstraExports=dijkstra.exports;(function(e){const s=mode,a=numericData,o=alphanumericData,l=byteData,r=kanjiData,c=regex,u=utils$1,m=dijkstraExports;function d(_){return unescape(encodeURIComponent(_)).length}function x(_,N,y){const E=[];let C;for(;(C=_.exec(y))!==null;)E.push({data:C[0],index:C.index,mode:N,length:C[0].length});return E}function h(_){const N=x(c.NUMERIC,s.NUMERIC,_),y=x(c.ALPHANUMERIC,s.ALPHANUMERIC,_);let E,C;return u.isKanjiModeEnabled()?(E=x(c.BYTE,s.BYTE,_),C=x(c.KANJI,s.KANJI,_)):(E=x(c.BYTE_KANJI,s.BYTE,_),C=[]),N.concat(y,E,C).sort(function(v,A){return v.index-A.index}).map(function(v){return{data:v.data,mode:v.mode,length:v.length}})}function p(_,N){switch(N){case s.NUMERIC:return a.getBitsLength(_);case s.ALPHANUMERIC:return o.getBitsLength(_);case s.KANJI:return r.getBitsLength(_);case s.BYTE:return l.getBitsLength(_)}}function f(_){return _.reduce(function(N,y){const E=N.length-1>=0?N[N.length-1]:null;return E&&E.mode===y.mode?(N[N.length-1].data+=y.data,N):(N.push(y),N)},[])}function g(_){const N=[];for(let y=0;y<_.length;y++){const E=_[y];switch(E.mode){case s.NUMERIC:N.push([E,{data:E.data,mode:s.ALPHANUMERIC,length:E.length},{data:E.data,mode:s.BYTE,length:E.length}]);break;case s.ALPHANUMERIC:N.push([E,{data:E.data,mode:s.BYTE,length:E.length}]);break;case s.KANJI:N.push([E,{data:E.data,mode:s.BYTE,length:d(E.data)}]);break;case s.BYTE:N.push([{data:E.data,mode:s.BYTE,length:d(E.data)}])}}return N}function j(_,N){const y={},E={start:{}};let C=["start"];for(let w=0;w<_.length;w++){const v=_[w],A=[];for(let b=0;b<v.length;b++){const S=v[b],M=""+w+b;A.push(M),y[M]={node:S,lastCount:0},E[M]={};for(let P=0;P<C.length;P++){const T=C[P];y[T]&&y[T].node.mode===S.mode?(E[T][M]=p(y[T].lastCount+S.length,S.mode)-p(y[T].lastCount,S.mode),y[T].lastCount+=S.length):(y[T]&&(y[T].lastCount=S.length),E[T][M]=p(S.length,S.mode)+4+s.getCharCountIndicator(S.mode,N))}}C=A}for(let w=0;w<C.length;w++)E[C[w]].end=0;return{map:E,table:y}}function R(_,N){let y;const E=s.getBestModeForData(_);if(y=s.from(N,E),y!==s.BYTE&&y.bit<E.bit)throw new Error('"'+_+'" cannot be encoded with mode '+s.toString(y)+`.
 Suggested mode is: `+s.toString(E));switch(y===s.KANJI&&!u.isKanjiModeEnabled()&&(y=s.BYTE),y){case s.NUMERIC:return new a(_);case s.ALPHANUMERIC:return new o(_);case s.KANJI:return new r(_);case s.BYTE:return new l(_)}}e.fromArray=function(N){return N.reduce(function(y,E){return typeof E=="string"?y.push(R(E,null)):E.data&&y.push(R(E.data,E.mode)),y},[])},e.fromString=function(N,y){const E=h(N,u.isKanjiModeEnabled()),C=g(E),w=j(C,y),v=m.find_path(w.map,"start","end"),A=[];for(let b=1;b<v.length-1;b++)A.push(w.table[v[b]].node);return e.fromArray(f(A))},e.rawSplit=function(N){return e.fromArray(h(N,u.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,s){const a=e.size,o=FinderPattern.getPositions(s);for(let l=0;l<o.length;l++){const r=o[l][0],c=o[l][1];for(let u=-1;u<=7;u++)if(!(r+u<=-1||a<=r+u))for(let m=-1;m<=7;m++)c+m<=-1||a<=c+m||(u>=0&&u<=6&&(m===0||m===6)||m>=0&&m<=6&&(u===0||u===6)||u>=2&&u<=4&&m>=2&&m<=4?e.set(r+u,c+m,!0,!0):e.set(r+u,c+m,!1,!0))}}function setupTimingPattern(e){const s=e.size;for(let a=8;a<s-8;a++){const o=a%2===0;e.set(a,6,o,!0),e.set(6,a,o,!0)}}function setupAlignmentPattern(e,s){const a=AlignmentPattern.getPositions(s);for(let o=0;o<a.length;o++){const l=a[o][0],r=a[o][1];for(let c=-2;c<=2;c++)for(let u=-2;u<=2;u++)c===-2||c===2||u===-2||u===2||c===0&&u===0?e.set(l+c,r+u,!0,!0):e.set(l+c,r+u,!1,!0)}}function setupVersionInfo(e,s){const a=e.size,o=Version.getEncodedBits(s);let l,r,c;for(let u=0;u<18;u++)l=Math.floor(u/3),r=u%3+a-8-3,c=(o>>u&1)===1,e.set(l,r,c,!0),e.set(r,l,c,!0)}function setupFormatInfo(e,s,a){const o=e.size,l=FormatInfo.getEncodedBits(s,a);let r,c;for(r=0;r<15;r++)c=(l>>r&1)===1,r<6?e.set(r,8,c,!0):r<8?e.set(r+1,8,c,!0):e.set(o-15+r,8,c,!0),r<8?e.set(8,o-r-1,c,!0):r<9?e.set(8,15-r-1+1,c,!0):e.set(8,15-r-1,c,!0);e.set(o-8,8,1,!0)}function setupData(e,s){const a=e.size;let o=-1,l=a-1,r=7,c=0;for(let u=a-1;u>0;u-=2)for(u===6&&u--;;){for(let m=0;m<2;m++)if(!e.isReserved(l,u-m)){let d=!1;c<s.length&&(d=(s[c]>>>r&1)===1),e.set(l,u-m,d),r--,r===-1&&(c++,r=7)}if(l+=o,l<0||a<=l){l-=o,o=-o;break}}}function createData(e,s,a){const o=new BitBuffer;a.forEach(function(m){o.put(m.mode.bit,4),o.put(m.getLength(),Mode.getCharCountIndicator(m.mode,e)),m.write(o)});const l=Utils$1.getSymbolTotalCodewords(e),r=ECCode.getTotalCodewordsCount(e,s),c=(l-r)*8;for(o.getLengthInBits()+4<=c&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const u=(c-o.getLengthInBits())/8;for(let m=0;m<u;m++)o.put(m%2?17:236,8);return createCodewords(o,e,s)}function createCodewords(e,s,a){const o=Utils$1.getSymbolTotalCodewords(s),l=ECCode.getTotalCodewordsCount(s,a),r=o-l,c=ECCode.getBlocksCount(s,a),u=o%c,m=c-u,d=Math.floor(o/c),x=Math.floor(r/c),h=x+1,p=d-x,f=new ReedSolomonEncoder(p);let g=0;const j=new Array(c),R=new Array(c);let _=0;const N=new Uint8Array(e.buffer);for(let v=0;v<c;v++){const A=v<m?x:h;j[v]=N.slice(g,g+A),R[v]=f.encode(j[v]),g+=A,_=Math.max(_,A)}const y=new Uint8Array(o);let E=0,C,w;for(C=0;C<_;C++)for(w=0;w<c;w++)C<j[w].length&&(y[E++]=j[w][C]);for(C=0;C<p;C++)for(w=0;w<c;w++)y[E++]=R[w][C];return y}function createSymbol(e,s,a,o){let l;if(Array.isArray(e))l=Segments.fromArray(e);else if(typeof e=="string"){let d=s;if(!d){const x=Segments.rawSplit(e);d=Version.getBestVersionForData(x,a)}l=Segments.fromString(e,d||40)}else throw new Error("Invalid data");const r=Version.getBestVersionForData(l,a);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=r;else if(s<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const c=createData(s,a,l),u=Utils$1.getSymbolSize(s),m=new BitMatrix(u);return setupFinderPattern(m,s),setupTimingPattern(m),setupAlignmentPattern(m,s),setupFormatInfo(m,a,0),s>=7&&setupVersionInfo(m,s),setupData(m,c),isNaN(o)&&(o=MaskPattern.getBestMask(m,setupFormatInfo.bind(null,m,a))),MaskPattern.applyMask(o,m),setupFormatInfo(m,a,o),{modules:m,version:s,errorCorrectionLevel:a,maskPattern:o,segments:l}}qrcode.create=function e(s,a){if(typeof s>"u"||s==="")throw new Error("No input text");let o=ECLevel.M,l,r;return typeof a<"u"&&(o=ECLevel.from(a.errorCorrectionLevel,ECLevel.M),l=Version.from(a.version),r=MaskPattern.from(a.maskPattern),a.toSJISFunc&&Utils$1.setToSJISFunction(a.toSJISFunc)),createSymbol(s,l,o,r)};var canvas={},utils={};(function(e){function s(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let o=a.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+a);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(r){return[r,r]}))),o.length===6&&o.push("F","F");const l=parseInt(o.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const l=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,r=o.width&&o.width>=21?o.width:void 0,c=o.scale||4;return{width:r,scale:r?4:c,margin:l,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,l){return l.width&&l.width>=o+l.margin*2?l.width/(o+l.margin*2):l.scale},e.getImageWidth=function(o,l){const r=e.getScale(o,l);return Math.floor((o+l.margin*2)*r)},e.qrToImageData=function(o,l,r){const c=l.modules.size,u=l.modules.data,m=e.getScale(c,r),d=Math.floor((c+r.margin*2)*m),x=r.margin*m,h=[r.color.light,r.color.dark];for(let p=0;p<d;p++)for(let f=0;f<d;f++){let g=(p*d+f)*4,j=r.color.light;if(p>=x&&f>=x&&p<d-x&&f<d-x){const R=Math.floor((p-x)/m),_=Math.floor((f-x)/m);j=h[u[R*c+_]?1:0]}o[g++]=j.r,o[g++]=j.g,o[g++]=j.b,o[g]=j.a}}})(utils);(function(e){const s=utils;function a(l,r,c){l.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=c,r.width=c,r.style.height=c+"px",r.style.width=c+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(r,c,u){let m=u,d=c;typeof m>"u"&&(!c||!c.getContext)&&(m=c,c=void 0),c||(d=o()),m=s.getOptions(m);const x=s.getImageWidth(r.modules.size,m),h=d.getContext("2d"),p=h.createImageData(x,x);return s.qrToImageData(p.data,r,m),a(h,d,x),h.putImageData(p,0,0),d},e.renderToDataURL=function(r,c,u){let m=u;typeof m>"u"&&(!c||!c.getContext)&&(m=c,c=void 0),m||(m={});const d=e.render(r,c,m),x=m.type||"image/png",h=m.rendererOpts||{};return d.toDataURL(x,h.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(e,s){const a=e.a/255,o=s+'="'+e.hex+'"';return a<1?o+" "+s+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function svgCmd(e,s,a){let o=e+s;return typeof a<"u"&&(o+=" "+a),o}function qrToPath(e,s,a){let o="",l=0,r=!1,c=0;for(let u=0;u<e.length;u++){const m=Math.floor(u%s),d=Math.floor(u/s);!m&&!r&&(r=!0),e[u]?(c++,u>0&&m>0&&e[u-1]||(o+=r?svgCmd("M",m+a,.5+d+a):svgCmd("m",l,0),l=0,r=!1),m+1<s&&e[u+1]||(o+=svgCmd("h",c),c=0)):l++}return o}svgTag.render=function e(s,a,o){const l=Utils.getOptions(a),r=s.modules.size,c=s.modules.data,u=r+l.margin*2,m=l.color.light.a?"<path "+getColorAttrib(l.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",d="<path "+getColorAttrib(l.color.dark,"stroke")+' d="'+qrToPath(c,r,l.margin)+'"/>',x='viewBox="0 0 '+u+" "+u+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+x+' shape-rendering="crispEdges">'+m+d+`</svg>
`;return typeof o=="function"&&o(null,p),p};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(e,s,a,o,l){const r=[].slice.call(arguments,1),c=r.length,u=typeof r[c-1]=="function";if(!u&&!canPromise())throw new Error("Callback required as last argument");if(u){if(c<2)throw new Error("Too few arguments provided");c===2?(l=a,a=s,s=o=void 0):c===3&&(s.getContext&&typeof l>"u"?(l=o,o=void 0):(l=o,o=a,a=s,s=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(a=s,s=o=void 0):c===2&&!s.getContext&&(o=a,a=s,s=void 0),new Promise(function(m,d){try{const x=QRCode.create(a,o);m(e(x,s,o))}catch(x){d(x)}})}try{const m=QRCode.create(a,o);l(null,e(m,s,o))}catch(m){l(m)}}browser.create=QRCode.create;browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser.toString=renderCanvas.bind(null,function(e,s,a){return SvgRenderer.render(e,a)});function QrCode({text:e,width:s}){const a=reactExports.useRef(null),o=localStorage.theme==="dark"?"#000":"#7672f2",l=localStorage.theme==="dark"?"#7672f2":"#fff";reactExports.useEffect(()=>{a.current&&browser.toCanvas(a.current,e,{width:s,margin:1,color:{dark:o,light:l}},function(c){c&&console.error(c)})},[e,s]);const r=()=>{if(a.current){const c=a.current.toDataURL("image/png").replace("image/png","image/octet-stream"),u=document.createElement("a");u.download="qrcode.png",u.href=c,u.click()}};return jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-4/5 flex justify-center",children:jsxRuntimeExports.jsx("canvas",{ref:a})}),jsxRuntimeExports.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Baixar imagem",children:jsxRuntimeExports.jsx(FaDownload,{onClick:r,className:" text-2xl cursor-pointer"})})})]})}function ShareProject({slug:e}){const{setModalContent:s,clearModal:a}=reactExports.useContext(ModalContext),o=reactExports.useRef(null),l=reactExports.useRef(null),r=()=>{a(null,{clearAll:!0}),window.open(`https://chat.wipzee.com/${e}`)},c=()=>{try{const d=o.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var m=document.execCommand("copy");m&&s({componentName:"modal_copy_link",components:jsxRuntimeExports.jsx(PopOver,{message:"Link Copiado!",type:"INFORMATION",componentName:"modal_copy_link"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{s({componentName:"modal_failed_copy_link",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_link"})})}},u=()=>{try{const d=l.current;if(d){d.classList.toggle("disabled"),d.disabled=!1,d.select();var m=document.execCommand("copy");m&&s({componentName:"modal_copy_widget",components:jsxRuntimeExports.jsx(PopOver,{message:"Widget Copiado!",type:"INFORMATION",componentName:"modal_copy_widget"})}),d.classList.toggle("disabled"),d.disabled=!0}}catch{s({componentName:"modal_failed_copy_widget",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao copiar o link!",type:"ERROR",componentName:"modal_failed_copy_widget"})})}};return jsxRuntimeExports.jsxs("div",{className:"w-full h-screen md:h-auto flex flex-col gap-8 relative md:static p-4",children:[jsxRuntimeExports.jsx(MdLogout,{className:"text-4xl rotate-180 md:hidden absolute",onClick:()=>a(null,{clearLast:!0})}),jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col gap-2 mt-12 md:mt-0",children:[jsxRuntimeExports.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Link do seu chat"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between",children:[jsxRuntimeExports.jsx("input",{ref:o,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`https://chat.wipzee.com/${e}`}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Copie seu link",children:jsxRuntimeExports.jsx(FaCopy,{onClick:c,className:" text-2xl cursor-pointer"})}),jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos abrir seu chat",text:"Clique no icone acima para abrir seu chat em uma nova guia para testa-lo",positionX:"LEFT",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Abra seu chat",children:jsxRuntimeExports.jsx(FaArrowUpRightFromSquare,{onClick:r,className:" text-xl cursor-pointer"})})})]})]}),jsxRuntimeExports.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Esse será o link que você enviará aos usuários que irão acessar seu chat."})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"w-4/5 text-center uppercase",children:"Código do Widget"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between",children:[jsxRuntimeExports.jsx("input",{ref:l,className:"w-4/5 border border-light/20 p-2 rounded-xl disabled",disabled:!0,defaultValue:`<script src="https://widget.wipzee.com/${e}" defer><\/script>`}),jsxRuntimeExports.jsx("div",{className:"w-1/5 flex justify-center items-center gap-4",children:jsxRuntimeExports.jsx(FaCopy,{onClick:u,className:" text-2xl cursor-pointer"})})]}),jsxRuntimeExports.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Copie e cole esse código no head do html do seu site."})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"w-4/5 text-center uppercase",children:"QR CODE"}),jsxRuntimeExports.jsx(QrCode,{width:200,text:`https://chat.wipzee.com/${e}`}),jsxRuntimeExports.jsx("span",{className:"w-4/5 text-center opacity-60",children:"Use esse QR CODE para acessar seu site facilmente"})]})]})}const isZodError=e=>e.errors!=null,parseErrorSchema=(e,s)=>{const a={};for(;e.length;){const o=e[0],{code:l,message:r,path:c}=o,u=c.join(".");if(!a[u])if("unionErrors"in o){const m=o.unionErrors[0].errors[0];a[u]={message:m.message,type:m.code}}else a[u]={message:r,type:l};if("unionErrors"in o&&o.unionErrors.forEach(m=>m.errors.forEach(d=>e.push(d))),s){const m=a[u].types,d=m&&m[o.code];a[u]=appendErrors(u,s,a,l,d?[].concat(d,o.message):o.message)}e.shift()}return a},zodResolver=(e,s,a={})=>async(o,l,r)=>{try{const c=await e[a.mode==="sync"?"parse":"parseAsync"](o,s);return r.shouldUseNativeValidation&&i({},r),{errors:{},values:a.raw?o:c}}catch(c){if(isZodError(c))return{values:{},errors:n(parseErrorSchema(c.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw c}};function SimulatorSlugUrl(){const{watch:e}=useFormContext(),[s,a]=reactExports.useState();return reactExports.useEffect(()=>{const o=e("step_4.slug");a(o.replaceAll(" ","-"))},[e()]),jsxRuntimeExports.jsxs("div",{className:"w-full md:w-full flex gap-2 items-center bg-white p-2 my-4 rounded-md",children:[jsxRuntimeExports.jsx(FaArrowLeft,{className:"fill-zinc-600"}),jsxRuntimeExports.jsx(FaArrowRight,{className:"fill-zinc-600"}),jsxRuntimeExports.jsx(FaCircleNotch,{className:"fill-zinc-600"}),jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-full bg-zinc-600 rounded-xl p-3 flex gap-2 items-center",children:[jsxRuntimeExports.jsx(FaLock,{className:"fill-green-600"}),jsxRuntimeExports.jsxs("h2",{className:"w-[90%] md:w-full overflow-hidden whitespace-nowrap text-ellipsis text-sm xl:text-base opacity-80",children:["https://chat.wipzee.com/",s]})]})]})}function SocialProof(){const{control:e}=useFormContext(),{fields:s,remove:a,append:o}=useFieldArray({control:e,name:"step_0.social_proof"});return jsxRuntimeExports.jsxs(Root.Container,{className:"overflow-auto",children:[jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col gap-4 md:gap-0 md:flex-row justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Adicione avaliações dos seus clientes:"}),jsxRuntimeExports.jsx("span",{className:"text-sm opacity-70",children:"(Essas avaliações estarão visível na bio do chat)"})]}),jsxRuntimeExports.jsxs(Button,{type:"button",onClick:()=>o({}),children:["Adicionar ",jsxRuntimeExports.jsx(MdAdd,{})]})]}),jsxRuntimeExports.jsx(Root.Container,{className:"w-full px-4 overflow-auto my-2",children:s.map((l,r)=>jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-col gap-4 my-2 p-2 rounded-lg border border-primary-100 relative",children:[jsxRuntimeExports.jsx(MdDelete,{className:"absolute -top-3 -right-3 bg-red-800/50 fill-red-500 cursor-pointer rounded-full p-1 text-2xl",onClick:()=>a(r)}),jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-wrap md:flex-nowrap justify-start items-center gap-4",children:[jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.avatar`,sizeContainer:"50px"}),jsxRuntimeExports.jsx(Root.Input,{type:"number",title:"Nota da avaliação",name:`step_0.social_proof.${r}.rating`,widthContainer:"w-2/3",min:0,max:5}),jsxRuntimeExports.jsx(Root.Input,{title:"Nome do cliente",name:`step_0.social_proof.${r}.person_name`})]}),jsxRuntimeExports.jsx(Root.TextArea,{name:`step_0.social_proof.${r}.text`,title:"Oque o cliente achou do produto?"}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex gap-4 justify-start",children:[jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.images.0`,sizeContainer:"50px"}),jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.images.1`,sizeContainer:"50px"}),jsxRuntimeExports.jsx(Root.File,{name:`step_0.social_proof.${r}.images.2`,sizeContainer:"50px"})]})]},l.id))})]})}function ModalEditChat({project:e,setProjects:s}){var j,R,_,N,y;const{setModalContent:a,clearModal:o}=reactExports.useContext(ModalContext),{setClient:l,client:r}=reactExports.useContext(ClientContext),[c,u]=reactExports.useState(),[m,d]=useSearchParams(),x=Number(m.get(ICON_NAME_URL))||0,h=useForm({resolver:zodResolver(chatSchema),defaultValues:{step_0:{project_name:e.project_name,chat_input_message:e.chat_input_message,logo:e.logo,social_proof:e.social_proof},step_1:{prompt_id:e.prompt.id,bio:e.bio,call_to_action:e.call_to_action},step_2:{facebook_pixel:e.pixel_facebook},step_3:{chat_appearance:{chat_icon:(j=e.chat_appearance)==null?void 0:j.chat_icon,icon_text:(R=e.chat_appearance)==null?void 0:R.icon_text,primary_color:(_=e.chat_appearance)==null?void 0:_.primary_color,second_color:(N=e.chat_appearance)==null?void 0:N.second_color,background:(y=e.chat_appearance)==null?void 0:y.background}},step_4:{slug:e.slug}}});reactExports.useEffect(()=>{(async()=>{m.set(CTA_NAME_URL,(e.call_to_action.length-1).toString()),d(m);const E=await getPlanManagementById(e.plan_management_id);(E==null?void 0:E.status)===200&&u(E.data.prompt)})()},[]);const p=async E=>{var w,v,A;let C={};if(Object.keys(E).forEach(b=>{const S=E[b];Object.keys(S).forEach(M=>{C[M]=E[b][M]})}),C&&e.slug){if((w=E.step_4)!=null&&w.slug&&((v=E.step_4)==null?void 0:v.slug)!==e.slug&&!await checkSlugIsAvailable(E.step_4.slug)){a({componentName:"modal_error_slug",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_slug",message:"A slug escolhida não está disponível!",type:"WARNING"})});return}C.chat_appearance.id=(A=e.chat_appearance)==null?void 0:A.id;const b=await updateProject(C,e.slug);b&&b.status===200&&(s(S=>{const M=S.findIndex(T=>T.id===e.id),P=S.filter(T=>T.id!==e.id);return C.is_online=b.data.is_online,C.plan_management_id=b.data.plan_management_id,C.id=b.data.id,C.prompt=b.data.prompt,C.chat_appearance=b.data.chat_appearance,P.splice(M,0,C),P}),a({componentName:"modal_chat_updated",components:jsxRuntimeExports.jsx(PopOver,{message:"Chat atualizado com sucesso",componentName:"modal_chat_updated",functionAfterComplete:()=>o("modal_edit_project")})}))}};async function f(){const E=async()=>{if(e.id){const C=await deleteProject(e.id);if(C&&C.status===200){s(v=>v.filter(A=>A.id!==e.id));const w=r==null?void 0:r.plan_management.project.findIndex(v=>v.id===e.id);r&&w&&(r.plan_management.project.splice(w,1),l(r)),a({componentName:"modal_delete_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Chat excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>o(null,{clearAll:!0})})})}}};a({componentName:"modal_confirm_delete_chat",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(Confirm,{title:"Tem certeza que deseja deletar esse chat?",subTitle:"Uma vez removido, não pode ser revertido.",confirmFunction:E,cancelFuntion:()=>o("modal_confirm_delete_chat")})})})}const g=E=>{m.set(ICON_NAME_URL,E.toString()),d(m),h.unregister("step_3.chat_appearance.chat_icon"),h.register("step_3.chat_appearance.chat_icon",{value:E})};return!!(c!=null&&c.length)&&jsxRuntimeExports.jsx("div",{className:"w-screen px-4 md:px-0 md:w-[90vw] md:h-[80vh] md:min-h-[450px] md:min-w-[700px] flex overflow-hidden",children:jsxRuntimeExports.jsxs(Root.EditForm,{form:h,onDelete:f,onSubmit:p,activeSimulator:!0,children:[jsxRuntimeExports.jsxs(Root.EditStep,{index:0,titleStep:"Informações do chat",children:[jsxRuntimeExports.jsxs(Root.Container,{className:"flex justify-start items-center gap-6",children:[jsxRuntimeExports.jsx(Root.File,{name:"step_0.logo",sizeContainer:"80px"}),jsxRuntimeExports.jsx(Root.Input,{name:"step_0.project_name",title:"Escreva o nome do seu chat"})]}),jsxRuntimeExports.jsx(Root.TextArea,{name:"step_0.chat_input_message.0",title:"Digite a primeira mensagem do seu chat"}),jsxRuntimeExports.jsx(SocialProof,{})]}),jsxRuntimeExports.jsxs(Root.EditStep,{index:1,titleStep:"Configurações do chat",children:[jsxRuntimeExports.jsx(Root.Select,{name:"step_1.prompt_id",options:c.map(E=>Object({value:E.id,text:E.prompt_name})),title:"Selecione sua fonte de dados"}),jsxRuntimeExports.jsx(Root.TextArea,{name:"step_1.bio",title:"Escreva uma descrição para seu chat"}),jsxRuntimeExports.jsx(CallToActionFormChat,{prompts:c})]}),jsxRuntimeExports.jsx(Root.EditStep,{index:2,titleStep:"Aparência do chat",children:jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-col items-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-center text-xl",children:"Escolha um icone para seu chat"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2 md:gap-4 text-5xl",children:CHAT_ICONS_MODELS.map(({Icon:E,id:C},w)=>jsxRuntimeExports.jsx(E,{"data-iscurrent":x-1===w,className:"hover:bg-primary-100 data-[iscurrent=true]:bg-primary-100 cursor-pointer rounded-full p-2",onClick:()=>g(C)},C))})]}),jsxRuntimeExports.jsx(Root.Input,{name:"step_3.chat_appearance.icon_text",title:"Digite o texto que será exibido ao lado do icon"}),jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex",title:"Defina as cores do seu chat",children:[jsxRuntimeExports.jsx(Root.Color,{name:"step_3.chat_appearance.primary_color",title:"Escolha a cor primária do seu chat"}),jsxRuntimeExports.jsx(Root.Color,{name:"step_3.chat_appearance.second_color",title:"Escolha a cor secundária do seu chat"}),jsxRuntimeExports.jsx(Root.Color,{name:"step_3.chat_appearance.background",title:"Escolha a cor do background do seu chat"})]})]})}),jsxRuntimeExports.jsx(Root.EditStep,{index:3,titleStep:"Configuração avançadas",children:jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col items-center p-2",children:[jsxRuntimeExports.jsx(Root.Input,{name:"step_4.slug",title:"Altere a slug do seu chat"}),jsxRuntimeExports.jsx(SimulatorSlugUrl,{}),jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-auto flex flex-col items-center md:items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-medium uppercase",children:"Lembre-se"}),jsxRuntimeExports.jsx("span",{className:"opacity-70 text-center md:text-left",children:"Ao trocar a slug do seu chat, todos seus clientes que possuirem a URL antiga, podem perder acesso ao seu site utilizando a antiga URL."})]})]})})]})})}function CardChat({project:e,setNewProject:s,prompts:a}){const{client:o,setClient:l}=reactExports.useContext(ClientContext),{setModalContent:r}=reactExports.useContext(ModalContext),c=useNavigate(),[u,m]=useSearchParams(),d=async()=>{if(u.get("tour")==="2"&&(u.set("tour","0"),m(u),o)){const p=await updateTutorialClient(o.id,!1);l(p)}r({componentName:"modal_edit_project",components:jsxRuntimeExports.jsx(PopUp,{positionModal:"START",children:jsxRuntimeExports.jsx(ModalEditChat,{setProjects:s,project:e,prompts:a})})})},x=async(p,f)=>{if(!f)return r({componentName:"modal_failed_updated_status_chat",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat",type:"WARNING"})}),!1;const g=await updateIsOnlineProject(p,f);return(g==null?void 0:g.status)===200?(s(j=>(j.find(R=>R.id===g.data.id).is_online=g.data.is_online,j)),!0):(r({componentName:"modal_failed_updated_status_chat_02",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao atualizar o status do chat, reinicie a página e tente novamente",componentName:"modal_failed_updated_status_chat_02",type:"WARNING"})}),!1)},h=()=>{if(u.set("tour","2"),m(u),!e.slug){r({componentName:"modal_failed_display_link",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao exibir seus links",type:"ERROR",componentName:"modal_failed_display_link"})});return}r({componentName:"modal_display_share_project",components:jsxRuntimeExports.jsx(PopUp,{positionModal:"START",children:jsxRuntimeExports.jsx(ShareProject,{slug:e.slug})})})};return e&&jsxRuntimeExports.jsxs("div",{className:"w-full text-light relative flex flex-col items-center gap-2 cursor-pointer rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center gap-2 p-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-2",children:[jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos acessar seu chat",text:"Clique aqui em cima para obter seu link ou para pegar o código do widget",positionX:"RIGHT",hidden:u.get("tour")==="2"||u.get("tour")==="0",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Veja todos os seus links",children:jsxRuntimeExports.jsx(FaLink,{className:"text-xl",onClick:h})})}),jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos personalizar seu chat",text:"Agora que já viu como funciona, vamos conhecer como podemos deixar ele de acordo com a sua marca!",positionX:window.innerWidth>=768||window.innerWidth<=480?"RIGHT":"CENTER",hidden:u.get("tour")!=="2",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Edite seu chat",children:jsxRuntimeExports.jsx(FaGear,{className:"text-xl",onClick:d})})})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Ative ou desative seu chat",children:jsxRuntimeExports.jsx(ToggleComponent,{isActive:e.is_online,template:"onOff",cb:p=>x(p,e.slug)})})})]}),jsxRuntimeExports.jsx("div",{className:"w-[150px] h-[110px] rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:e.logo||"https://via.placeholder.com/100",alt:"imagem do projeto",className:"w-full h-full object-cover",onClick:()=>window.open(`https://chat.wipzee.com/${e.slug}`)})}),jsxRuntimeExports.jsxs("h2",{className:"text-center py-4 font-bold text-xl flex gap-2 items-center ",onClick:()=>c("/panel?tab=metrics"),children:[jsxRuntimeExports.jsx(FaChartColumn,{}),e.project_name]})]},e.slug)}function MyChats(){const{client:e}=reactExports.useContext(ClientContext),{setModalContent:s}=reactExports.useContext(ModalContext),[a,o]=reactExports.useState(e!=null&&e.plan_management?e.plan_management.project:[]),l=Array(MAX_CONTAINER_TO_CREATE_CHAT).fill(0),r=()=>[s({componentName:"modal_locked_chat",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_locked_chat",message:"Esse slot não está disponível, crie seu chat em um slot disponível ou contrate um plano com mais slot disponível.",type:"WARNING"})})];return e&&jsxRuntimeExports.jsx(Container,{title:"Meus chats",children:jsxRuntimeExports.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 gap-8",children:l.map((c,u)=>{var m,d,x,h;return(m=e.plan_management)!=null&&m.plan&&u<Number(e.plan_management.plan.max_projects.default)?jsxRuntimeExports.jsx("div",{className:"w-[90%] xs:w-1/2 md:w-1/3 lg:w-1/4 md:max-w-[300px] flex justify-center items-center rounded-xl cursor-pointer border border-primary-100 bg-primary-50 dark:bg-primary-300 hover:bg-primary-200 text-light dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:(d=a[u])!=null&&d.id?jsxRuntimeExports.jsx(CardChat,{project:a[u],setNewProject:o,prompts:(x=e.plan_management)==null?void 0:x.prompt},a[u].id):jsxRuntimeExports.jsx(ButtonCreateChat,{plan_management_id:(h=e==null?void 0:e.plan_management)==null?void 0:h.id,projects:a,index:u})},u):jsxRuntimeExports.jsx("div",{className:"w-[90%] xs:w-1/2 md:w-1/3 lg:w-1/4 min-h-[200px] md:max-w-[300px]  flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",onClick:r,children:jsxRuntimeExports.jsx(FaLock,{className:"py-3 text-5xl"})},u)})})})}function ModalColumnOrganization({setColumns:e,columns:s,modalName:a}){const{clearModal:o}=reactExports.useContext(ModalContext),[l,r]=reactExports.useState(s),c=m=>{const d=m.currentTarget.dataset.status=="true",x=m.currentTarget.dataset.name;r(()=>[...s.filter((h,p)=>(p>1&&h.columnName===x&&(h.status=!d),h))])},u=()=>{localStorage.setItem("metricColumnActive",JSON.stringify(s)),e(s),o(a)};return jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 bg-light dark:bg-zinc-800 text-dark dark:text-light",children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-center text-xl p-4",children:"Organize suas columns"}),jsxRuntimeExports.jsx("div",{className:"w-full flex gap-2 flex-col",children:l.map((m,d)=>jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between px-4",children:[jsxRuntimeExports.jsx("p",{children:m.columnName}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsx("div",{className:"w-[30px] h-[20px] bg-zinc-400 dark:bg-zinc-100 flex overflow-hidden rounded-full cursor-pointer",style:{justifyContent:`${m.status?"end":"start"}`},onClick:c,"data-status":m.status,"data-name":m.columnName,children:jsxRuntimeExports.jsx("div",{className:"w-2/3 h-full rounded-xl flex justify-center items-center",style:{background:`${m.status?"green":"red"}`},children:d<2&&jsxRuntimeExports.jsx(FaLock,{className:"w-[8px]"})})})})]},m.columnName))}),jsxRuntimeExports.jsxs("div",{className:"w-full flex mt-12 justify-evenly items-center",children:[jsxRuntimeExports.jsx("span",{className:"underline opacity-80 cursor-pointer",onClick:()=>o(a),children:"Fechar"}),jsxRuntimeExports.jsx(Button,{onClick:u,children:"Salvar"})]})]})}function SelectTime({}){const[e,s]=useSearchParams(),a=l=>{const r=formatDate(new Date).currentHour;var c=0;switch(l){case"today":c=r;break;case"yesterday":c=r+24;break;case"last_7_days":c=r+6*24;break;case"last_14_days":c=r+13*24;break;case"last_month":c=r+29*24;break;case"last_3_month":c=r+89*24;break;case"last_6_month":c=r+179*24;break;case"last_year":c=r+364*24;break;default:c=0;break}e.set("filter_time",c.toString()),s(e)},o=()=>{e.delete("filter_time"),s(e)};return jsxRuntimeExports.jsx(Select,{onSelected:a,onDelete:o,title:"Selecione uma data",name:"datetime",options:[{value:"today",text:"Hoje"},{value:"yesterday",text:"Ontem"},{value:"last_7_days",text:"Ultimos 7 dias"},{value:"last_14_days",text:"Ultimos 14 dias"},{value:"last_month",text:"Ultimo mês"},{value:"last_3_month",text:"Ultimos 3 meses"},{value:"last_6_month",text:"Ultimos 6 meses"},{value:"last_year",text:"Ultimo ano"}]})}function eventManager(e,s=0){function a(){var f;return((f=e.metric)==null?void 0:f.chat_event.reduce((g,j)=>{const R=j.open_chat.filter(_=>{const N=convertDateInHour(_.created_at);return s>0?N<=s:!0});return g+R.length},0))||0}function o(){var g;return(((g=e.metric)==null?void 0:g.chat_event.filter(j=>{const R=convertDateInHour(j.created_at);return s>0?R<=s:!0}))||[]).filter((j,R,_)=>R===_.findIndex(N=>N.guest_id===j.guest_id)).length}function l(){return e.message_manager.map(f=>f.messages.filter(j=>{const R=convertDateInHour(j.time);return s>0?R<=s:!0})).flat().filter(f=>f.player==="user").length}function r(){return e.message_manager.map(f=>f.messages.filter(j=>{const R=convertDateInHour(j.time);return s>0?R<=s:!0})).flat().filter(f=>f.player==="assistant").length}function c(){const p=l()+r(),f=o()>0?p/o():0;return f%1===0?f:Number(f.toFixed(1))}function u(){var _;const p=(_=e.metric)==null?void 0:_.chat_event.reduce((N,y)=>{const E=y.chat_time.filter(C=>{const w=convertDateInHour(C.created_at);return s>0?w<=s:!0});return N+E.reduce((C,w)=>{if(!w.closed_at&&!w.created_at)return 0;const v=Number(new Date(w.closed_at))-Number(new Date(w.created_at));return C+v},0)},0),f=Math.floor(p/1e3),g=Math.floor(f/60);return`${Math.floor(g/60).toString().padStart(2,"0")}:${(g%60).toString().padStart(2,"0")}:${(f%60).toString().padStart(2,"0")}`}function m(){var N;const p=(N=e.metric)==null?void 0:N.chat_event.reduce((y,E)=>{const C=E.chat_time.filter(w=>{const v=convertDateInHour(w.created_at);return s>0?v<=s:!0});return y+C.reduce((w,v)=>{if(!v.closed_at&&!v.created_at)return 0;const A=Number(new Date(v.closed_at))-Number(new Date(v.created_at));return w+A},0)},0),f=p>0?p/o():0,g=Math.floor(f/1e3),j=Math.floor(g/60),R=Math.floor(j/60),_=`${R.toString().padStart(2,"0")}:${(j%60).toString().padStart(2,"0")}:${(g%60).toString().padStart(2,"0")}`;return R!==1/0?_:"00:00:00"}function d(){var f;const p=(f=e.metric)==null?void 0:f.button_event.filter(g=>{const j=convertDateInHour(g);return s>0?j<=s:!0},0);return(p==null?void 0:p.reduce((g,j)=>g+j.clicked_button.length,0))||0}function x(){return e.message_manager.map(f=>f.lead_collected).flat().length}function h(){return formatDate(e.created_at).dateFormat_A}return{IS_ONLINE:e.is_online||!1,NAME:e.project_name,CAT:a(),CAU:o(),MESSAGE_INPUT:l(),MESSAGE_OUTPUT:r(),MESSAGES_TOTAL:l()+r(),MEDIA_MESSAGES_CHAT:c(),USAGE_TIME:u(),MEDIA_USAGE_TIME:m(),CREATED_AT:h(),LINK_CLICKS:d(),LEADS_COLLECTED:x(),SERVICE_NOTE:0,RESOLUTION_RATE:0}}async function analizyDataWithArtifialIntelligence(e){return await axios.post(`${API_URL}/analyze_metric`,{prompt:e}).catch(a=>console.warn(a))}function formatTextAI(e){const s=e.split("");let a="";return s.forEach(o=>{o.includes(`
`)&&a.length||o.includes(":")?a+=o+"<br />":a+=o}),a}async function createMetricAnalysis(e,s){const a=await axios.post(`${API_URL}/metric_analysis/create`,{plan_management_id:e,result:s});if(a.data.error)throw await createLog({level:"warning",path:"src/api/metricAnalysis.ts Ln: 21",log:"Falha ao tentar criar a analise de métrica",sector:"Plataforma"}),new Error("Unable to create the Metric Analysis.");return a}async function sendFeedbackMetricAnalysis({feedback:e,metrics_analysis_rating:s,metric_analysis_id:a}){const o=await axios.post(`${API_URL}/metric_analysis/create_feedback`,{feedback:e,metrics_analysis_rating:s,metric_analysis_id:a});if(o.data.error)throw await createLog({level:"warning",path:"src/api/metricAnalysis.ts Ln: 42",log:"Falha ao tentar enviar o feedback sobre a análise de métrica",sector:"Plataforma"}),new Error("Unable to create the Feedback Metric Analysis.");return o}async function getMetricAnalysis(e){const s=await axios.get(`${API_URL}/metric_analysis/${e}`);if(s.status===400)throw await createLog({level:"warning",path:"src/api/metricAnalysis.ts Ln: 59",log:"Falha ao tentar buscar todas as análises de métricas",sector:"Plataforma"}),new Error("Unable to create the Feedback Metric Analysis.");return s}function ModalFeedbackAnalyze({index:e,spanReview:s,metric_analysis_id:a}){const o=reactExports.useRef(null),{setModalContent:l,clearModal:r}=reactExports.useContext(ModalContext),c=async()=>{var m;const u=(m=o.current)==null?void 0:m.value;u&&a?(await sendFeedbackMetricAnalysis({feedback:u,metrics_analysis_rating:e,metric_analysis_id:a})).data.response&&l({componentName:"modal_send_success",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_send_success",message:"Feedback enviado com sucesso. Obrigado!",functionAfterComplete:()=>r(null,{clearLast:!0})})}):l({componentName:"modal_error_send_feedback",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_send_feedback",message:"Você precisa deixar um feedback antes de enviar sua avaliação ou houve um erro no envio do feedback!",type:"ERROR"})})};return jsxRuntimeExports.jsxs("div",{className:"w-[300px] flex flex-col items-center gap-2 p-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-center font-bold text-lg",children:['Sua avaliação foi "',s,'".']}),jsxRuntimeExports.jsx("p",{className:"text-center opacity-80",children:"Gostaria de deixar um feedback em algo poderia melhorar?"}),jsxRuntimeExports.jsx("textarea",{ref:o}),jsxRuntimeExports.jsx(Button,{customClass:"my-4",onClick:c,children:"Enviar"})]})}var prompt=`
 A wipzee é uma empresa que fornece um chatbot com inteligencia artificial, promovendo uma experiência completa ao usuário.
 Desda personalização do chat até o consumo de dados (Métricas), abaixo será informado as métricas do usuário, quero que você faça uma analise
 completa e sugira melhorias ou de feedbacks positivos sobre as métricas.

 exemplo 1: 
    se tiver muitos chats abertos e nenhum clique no link, significa que o cliente não está sendo influenciado a clicar no link. 
    Sugestão: "Mudar o texto do link e deixar mais atrativo ou melhorar sua fonte de dados."
 exemplo 2: 
    se tiver muitos chats abertos e nenhuma ou poucas mensagens, significa que o cliente não está sentindo avontade de conversar com a IA ou não está conseguindo conversar com ela. 
    Sugestão: Melhorar a primeira mensagem do chat ou ver se existe algum problema tecnico nas trocas de mensagens."
`;function AnalyzeMetric(){const{clearModal:e,setModalContent:s}=reactExports.useContext(ModalContext),{client:a}=reactExports.useContext(ClientContext),[o,l]=reactExports.useState(),r=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{var m;if(a){const x=(await getMetricAnalysis((m=a.plan_management)==null?void 0:m.id)).data.response,h=a.plan_management.plan.max_analyze_metric.default,p=a.plan_management.plan.max_analyze_metric.bonus,f=Number(h+p);x.length?l({status:"APRROVED",analysis:x}):f>0&&x.length<=f?c():s({componentName:"modal_limit_analysis",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_limit_analysis",message:Number(a.plan_management.plan.monthly_price)>0?"O limite de analises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.":"Não é possivel analisar métricas no plano gratuito, mude de plano ou entre em contato com o suporte.",functionAfterComplete:()=>e(null,{clearAll:!0})})})}})()},[]);const c=()=>{if(o&&a&&(o==null?void 0:o.analysis.length)>=Number(a.plan_management.plan.max_analyze_metric.default)){s({componentName:"modal_max_limit_analysis",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_max_limit_analysis",message:"O limite de análises no seu plano foi atingido. Aguarde até amanhã ou mude de plano para fazer uma nova análise.",type:"WARNING"})});return}if(l(null),!a)return;const m=a.plan_management.project,d=formatDate(new Date).currentHour;m&&m.forEach(x=>{prompt+=`
                    NOME DO CHAT: ${x.project_name}
                    
                    MÉTRICAS:

                    Chats abertos total:
                    (Essa métrica pode tanto ser tanto varios usuários abrindo um chat ou como pode ser o mesmo usuário abrindo ele varias vezes)
                    [1000]

                    Chats abertos:
                    (Essa métrica conta quantas vezes o usuário abriu o chat, caso o usuário abra o mesmo chat 2 vezes ou mais, será contabilizado apenas uma vez)
                    [1]

                    Quando o chat foi criado:  
                    (Essa métrica registra quando o chat foi criado)
                    [${eventManager(x,d).CREATED_AT}]

                    chat está ativado ou desativado:  
                    (Informa se o chat está ativado ou não: true = ativado e false = desativado)
                    [${eventManager(x,d).IS_ONLINE}]

                    Leads coletados:  
                    (Informa quantos usuários deixaram um contato salvo no sistema)
                    [${eventManager(x,d).LEADS_COLLECTED}]

                    Cliques no link:  
                    (Informa quantos cliques no link(call to action) foi dado no chat)
                    [100]

                    Média de mensagens:  
                    (Informa qual a média de mensagens por chat)
                    [${eventManager(x,d).MEDIA_MESSAGES_CHAT}]

                    Média de tempo de uso:  
                    (Informa qual a média que o usuário ficou interagindo no chat)
                    [${eventManager(x,d).MEDIA_USAGE_TIME}]

                    Total de Mensagens:  
                    (Informa qual o total de mensagens que esse chat tem)
                    [${eventManager(x,d).MESSAGES_TOTAL}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${eventManager(x,d).MESSAGE_INPUT}]

                    Entrada de Mensagens:  
                    (Informa quantas mensagens os usuários já mandaram para esse chat)
                    [${eventManager(x,d).MESSAGE_OUTPUT}]

                    Saída de Mensagens:  
                    (Informa quantas mensagens nossa inteligencia artificial já mandou para esse chat)
                    [${eventManager(x,d).MESSAGE_OUTPUT}]

                    tempo de uso:  
                    (Informa quanto tempo esse chat já ficou aberto)
                    [${eventManager(x,d).USAGE_TIME}]`}),(async()=>{const x=await analizyDataWithArtifialIntelligence(prompt);if((x==null?void 0:x.status)===200&&x.data){const{text:h}=x.data.choices[0],p=await createMetricAnalysis(a==null?void 0:a.plan_management.id,h);l({status:"APRROVED",analysis:p.data.response})}else s({componentName:"modal_error_analyze_metric",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_analyze_metric",message:"Não foi possível analisar suas métricas, por favor tente mais tarde.",type:"ERROR"})})})()},u=m=>{var d,x;if(o!=null&&o.analysis[0].feedback)s({componentName:"modal_error_analysis_metric",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_analysis_metric",message:"Essa análise já foi avaliada!",type:"WARNING"})});else{const h=m.currentTarget.tabIndex,p=((d=m.currentTarget.querySelector("span"))==null?void 0:d.textContent)||"Regular",f=(x=r.current)==null?void 0:x.querySelectorAll("div > svg");f==null||f.forEach(g=>g.classList.remove("fill-primary-100")),f==null||f.forEach((g,j)=>j+1<=h&&g.classList.add("fill-primary-100")),s({componentName:"modal_show_feedback_analyze",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(ModalFeedbackAnalyze,{index:h,spanReview:p,metric_analysis_id:o==null?void 0:o.analysis[0].id})})})}};return o?jsxRuntimeExports.jsxs("div",{className:"w-full md:max-w-[600px] min-w-[400px] flex flex-col items-center gap-4 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Relatório da análise"}),jsxRuntimeExports.jsxs("span",{className:"opacity-70",children:[o.analysis.length,"/",Number(a==null?void 0:a.plan_management.plan.max_analyze_metric.default)," Análises restantes de hoje"]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-[300px] overflow-auto border border-primary-100 p-2",children:jsxRuntimeExports.jsx("p",{dangerouslySetInnerHTML:{__html:formatTextAI(o.analysis[0].result)},className:"text-center"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full items-center my-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Avalie essa análise:"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",ref:r,children:Array.from({length:5}).map((m,d)=>jsxRuntimeExports.jsxs("div",{tabIndex:d+1,onClick:u,className:"group flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx(MdStar,{"data-isselected":d+1<=o.analysis[0].metrics_analysis_rating,className:"cursor-pointer text-3xl hover:fill-primary-100 data-[isselected=true]:fill-primary-100"}),jsxRuntimeExports.jsx("span",{className:"group-hover:opacity-100 opacity-0",children:d===0?"horrível":d===1?"ruim":d===2?"regular":d===3?"boa":"excelente"})]},d))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-8 justify-center items-center",children:[jsxRuntimeExports.jsx("span",{onClick:()=>e(null,{clearLast:!0}),className:"underline opacity-80 my-4 cursor-pointer",children:"Fechar análise"}),jsxRuntimeExports.jsx(Button,{onClick:c,children:"Nova análise"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4 p-4","data-loading":!0,children:[jsxRuntimeExports.jsx("h2",{children:"Analisando métricas"}),jsxRuntimeExports.jsx("span",{children:"Carregando..."})]})}function OptionsTable({client:e,handleRequestDataProject:s,setColumns:a,columns:o}){const{setModalContent:l}=reactExports.useContext(ModalContext),r=async({currentTarget:m})=>{if(e!=null&&e.plan_management){const d=m.querySelector("svg");d.classList.add("rotate-[-360deg]","transition-transform","duration-1000"),s(e==null?void 0:e.id);const x=setTimeout(()=>{d.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(x)},1e3)}},c=()=>{l({componentName:"modal_organization_column",components:jsxRuntimeExports.jsx(ModalColumnOrganization,{modalName:"modal_organization_column",setColumns:a,columns:o})})},u=()=>{l({componentName:"modal_show_analyze_metric",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(AnalyzeMetric,{})})})};return jsxRuntimeExports.jsxs("div",{className:"w-full md:w-[70vw] px-4 flex flex-row-reverse md:flex-row flex-wrap lg:flex-nowrap gap-4 lg:gap-8 justify-center lg:justify-end items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-1/5 md:w-auto p-2 flex justify-center bg-light dark:bg-dark border border-primary-100 rounded-md cursor-pointer",onClick:r,children:jsxRuntimeExports.jsx(FaArrowRotateLeft,{className:"text-xl fill-primary-100 dark:fill-light"})}),jsxRuntimeExports.jsx("div",{className:"w-[74%] md:w-auto h-[40px]",children:jsxRuntimeExports.jsx(SelectTime,{})}),jsxRuntimeExports.jsxs(Button,{onClick:c,customClass:"w-full md:w-auto bg-light dark:bg-dark text-primary-100 dark:text-light border border-primary-100 px-4",children:[" ",jsxRuntimeExports.jsx(FaBorderAll,{className:"text-xl fill-primary-100 dark:fill-light"})," Colunas"]}),jsxRuntimeExports.jsxs(Button,{customClass:"w-full md:w-auto px-2 bg-primary-100 border border-primary-100",onClick:u,children:[" ",jsxRuntimeExports.jsx(BsStars,{className:"text-xl"})," Análise de métrica com IA"]})]})}const defaultColumns=[{key:"IS_ONLINE",columnName:"Status",status:!0,dataType:"boolean",size:80},{key:"NAME",columnName:"Nome do chat",status:!0,dataType:"string",size:170},{key:"CAT",columnName:"Chats abertos (total)",status:!0,dataType:"number",size:200},{key:"CAU",columnName:"Chats abertos (unico)",status:!1,dataType:"number",size:200},{key:"MESSAGE_INPUT",columnName:"Mensagens de entrada",status:!1,dataType:"number",size:180},{key:"MESSAGE_OUTPUT",columnName:"Mensagens de saída",status:!1,dataType:"number",size:170},{key:"MESSAGES_TOTAL",columnName:"Mensagens total",status:!0,dataType:"number",size:170},{key:"MEDIA_MESSAGES_CHAT",columnName:"Mensagens por chat",status:!1,dataType:"number",size:220},{key:"USAGE_TIME",columnName:"Tempo de uso",status:!1,dataType:"string",size:170},{key:"MEDIA_USAGE_TIME",columnName:"Tempo de uso por chat",status:!0,dataType:"string",size:230},{key:"LINK_CLICKS",columnName:"Cliques no link",status:!0,dataType:"number",size:150},{key:"LEADS_COLLECTED",columnName:"Leads coletados",status:!0,dataType:"number",size:170},{key:"CREATED_AT",columnName:"Criado em",status:!0,dataType:"string",size:150}];function HeaderTableMetric({setColumns:e,columns:s}){return reactExports.useEffect(()=>{const a=JSON.parse(localStorage.getItem("metricColumnActive")||"[]");a.length>0?(a.length!==defaultColumns.length&&localStorage.setItem("metricColumnActive",JSON.stringify(defaultColumns)),a.status?e(a):localStorage.setItem("metricColumnActive",JSON.stringify(defaultColumns))):localStorage.setItem("metricColumnActive",JSON.stringify(defaultColumns))},[]),s&&jsxRuntimeExports.jsx("div",{className:"w-1/2 flex",children:s.map(a=>a.status&&jsxRuntimeExports.jsx("span",{style:{width:`${a.size}px`},className:"flex-none p-3 overflow-hidden whitespace-nowrap text-ellipsis text-sm font-bold uppercase text-center bg-primary-100 dark:bg-primary-300 text-light dark:text-primary-100 border-r border-r-light dark:border-r-primary-100",children:a.columnName},a.columnName))})}function TableMetric({columns:e,setColumns:s,planManagement:a}){const[o]=useSearchParams(),l=o.get("filter_time_metric");return jsxRuntimeExports.jsxs("div",{className:"w-[95%] md:w-[70vw] md:h-[40vh] self-center rounded-xl overflow-x-auto",children:[jsxRuntimeExports.jsx(HeaderTableMetric,{setColumns:s,columns:e}),jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:a!=null&&a.project.length?a.project.map(r=>jsxRuntimeExports.jsx("div",{className:"flex-none flex",children:e.map((c,u)=>c.status&&jsxRuntimeExports.jsx("span",{style:{width:`${c.size}px`},className:"flex-none text-ellipsis overflow-hidden whitespace-nowrap text-center border border-primary-100/30 p-2",children:u===0?jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-center items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`w-[8px] h-[8px] ${r.is_online?"bg-green-700":"bg-red-700"} rounded-full`}),jsxRuntimeExports.jsx("span",{children:r.is_online?"Ativo":"Desativado"})]}):u===1?r.project_name:eventManager(r,l)[c.key]},c.columnName))},r.id)):jsxRuntimeExports.jsx("h2",{className:"text-center p-4 text-xs",children:'Você não tem nenhuma chat criado, clique em "Meus chats" , depois criar "Novo chat".'})}),jsxRuntimeExports.jsx("div",{"data-hasproject":!!(a!=null&&a.project.length),className:"flex-none flex data-[hasproject]:hidden",children:e.map((r,c)=>r.status&&jsxRuntimeExports.jsx("div",{style:{width:`${r.size}px`},className:"flex-none p-2 flex justify-center items-center gap-2",children:c===1?jsxRuntimeExports.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:"TOTAL"}):r.dataType==="number"?jsxRuntimeExports.jsx("span",{className:"w-full font-bold text-primary-100 text-xl text-center",children:a==null?void 0:a.project.reduce((u,m)=>u+Number(eventManager(m,l)[r.key]),0)}):jsxRuntimeExports.jsx("span",{className:"w-full text-primary-100 text-xl text-center",children:"-"})},r.key))})]})}function Metric(){const e=JSON.parse(localStorage.getItem("metricColumnActive")||"[]"),{setModalContent:s}=reactExports.useContext(ModalContext),{client:a}=reactExports.useContext(ClientContext),[o,l]=reactExports.useState(e),[r,c]=reactExports.useState(a==null?void 0:a.plan_management);reactExports.useEffect(()=>{a!=null&&a.plan_management&&u(a==null?void 0:a.id)},[]);const u=async m=>{const d=await getClientById(m);(d==null?void 0:d.status)===200?c(d.data.plan_management):s({componentName:"modal_failed_load_metric",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao recarregar as métricas, tente reiniciar a página.",type:"ERROR",componentName:"modal_failed_load_metric"})})};return jsxRuntimeExports.jsxs(Container,{title:"Métricas",className:"flex-col items-center gap-2 md:gap-8",children:[jsxRuntimeExports.jsx(OptionsTable,{client:a,columns:o,handleRequestDataProject:u,setColumns:l}),jsxRuntimeExports.jsx(TableMetric,{columns:o,planManagement:r,setColumns:l})]})}function ButtonCreateNewDatabase({plan_management_id:e,index:s}){const{client:a}=reactExports.useContext(ClientContext),{setModalContent:o}=reactExports.useContext(ModalContext),l=useNavigate(),r=()=>{if(a!=null&&a.plan_management){const c=Number(a.plan_management.plan.max_databases.default),u=a.plan_management.prompt.length;a.plan_management.status!=="DISABLED"?c>u?l(`/create-database/${e}`):o({componentName:"modal_max_database",components:jsxRuntimeExports.jsx(PopOver,{message:"Você atingiu o número maximo de base de dados no seu plano.",componentName:"modal_max_database"})}):o({componentName:"modal_desactive_account",components:jsxRuntimeExports.jsx(PopOver,{message:"O plano da sua conta está desabilitado.",componentName:"modal_desactive_account"})})}else o({componentName:"modal_without_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Nenhum plano foi vinculado a sua conta",componentName:"modal_without_plan"})})};return jsxRuntimeExports.jsx("div",{className:"w-full rounded-xl border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-white dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20 flex justify-center",onClick:r,children:jsxRuntimeExports.jsx(TutoralContainer,{title:"Vamos criar sua primeira fonte de dados",text:"Clique em <span class='font-medium text-2xl mx-1'>+</span> para criar sua primeira fonte de dados.",positionX:window.innerWidth>680?"RIGHT":"CENTER",hidden:s!==0,children:jsxRuntimeExports.jsx(TipContainer,{tip:"Criar fonte de dados",children:jsxRuntimeExports.jsx(FaPlus,{className:"text-5xl py-3 fill-light dark:fill-primary-100"})})})})}async function updateDatabase(e,s){return await axios.put(`${API_URL}/update/database/${s}`,e).catch(o=>console.warn(o))}async function updateDatabaseName(e,s){return await axios.put(`${API_URL}/update/database_name/${s}`,{prompt_name:e}).catch(o=>console.warn(o))}async function daleteDatabase(e){return await axios.delete(`${API_URL}/delete/database/${e}`).catch(a=>{if(a.response.status===500)return{status:500,data:null};console.error(a)})}function transformSchemaInText(e){return`
Você é uma assistente virtual e você deve se apresentar como 
${e.step_4.ia_name?e.step_4.ia_name+", esse será seu nome durante toda a conversa com o usuário.":"uma assistente virtual."}
      Sempre que possível use emojis para a conversar ficar mais amigável com o usuário.
Com base nas informações abaixo, responda as perguntas do "user":

1. **Informações do Produto:**
   - Produtos: 
   ${e.step_0.products.map((s,a)=>{var o,l;return`
         ------------------PRODUTO ${a+1}------------------
         Nome do produto: ${s.name}
         Quanto custa (valor) o ${s.name}: ${s.value}
         Um pouco sobre o ${s.name} e como ele funciona : ${s.description}
         Variáveis do ${s.name}: ${(o=s.optional_variable)==null?void 0:o.map(r=>`
            ${r.title}: ${r.answer},`)}
         Perguntas Comuns sobre o ${s.name}:  ${(l=s.questions)==null?void 0:l.map((r,c)=>`
            - ${c+1}. Pergunta: ${r.ask},
            - ${c+1}. Resposta: ${r.answer}`)}`})}
   - Observação: ${e.step_0.observation}
   
2. **MÉTODOS DE PAGAMENTO E CONDIÇÕES:**
   - Métodos de pagamento aceitos: ${e.step_1.payment_methods}
   - Quantas vezes o cliente pode parcelar: ${e.step_1.credit_card_installments?e.step_1.credit_card_installments:"Nenhuma"}
   - Como o produto vai ser entregue e as politicas de frete: ${e.step_1.order_tracking}
   - link para rastreamento: ${e.step_1.tracking_link}
    
3. **POLITICAS E CONDIÇÕES:**
   - Dias de garantia: ${e.step_2.warranty_time.time} ${e.step_2.warranty_time.type}(s)
   - Como funciona a garantia: ${e.step_2.how_guarantee_work}
   - Trocas e devoluções: ${e.step_2.how_exchanges_work_and_returns}
    
4. **SOBRE A EMPRESA:**
   - Nome da empresa: ${e.step_3.company_name}
   - Endereço: ${e.step_3.address}
   - Email de contato: ${e.step_3.contact_email}
   - Número de telefone de contato: ${e.step_3.contact_phone_number}
   - Horário de suporte: ${e.step_3.support_hours.map(s=>`
${s.day} das ${s.start} até ${s.end}`)}

6. ** PERSONALIDADE DA IA:**
   - Nome da inteligência artificial que está conversando com o usuário: (Você): ${e.step_4.ia_name}
   - Palavras que vocẽ não pode utilizar quando estiver conversando com o cliente: ${e.step_4.restrictions}
   - Descrição de como é o cliente que está conversando com você: ${e.step_4.client_describe}
`}const options=[{text:"COR",value:"COR"},{text:"TAMANHO",value:"TAMANHO"},{text:"MARCA",value:"MARCA"},{text:"PESO",value:"PESO"},{text:"MODELO",value:"MODELO"},{text:"MATERIAL",value:"MATERIAL"},{text:"INGREDIENTES",value:"INGREDIENTES"},{text:"QUANTIDADE EM ESTOQUE",value:"QUANTIDADE EM ESTOQUE"},{text:"DIMENSÕES DE ENVIO",value:"DIMENSÕES DE ENVIO"}];function AddVariables(){const{setModalContent:e}=reactExports.useContext(ModalContext),{control:s,watch:a}=useFormContext(),{fields:o,append:l,remove:r,update:c}=useFieldArray({name:"optional_variable",control:s});reactExports.useEffect(()=>{!o.length&&l({title:"",answer:""})},[]);const u=()=>{const m=a(`optional_variable.${o.length-1}`);m.title&&m.answer?l({title:"",answer:""}):e({componentName:"modal_error_add_product",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_add_product",message:"Preencha todos os dados antes de adicionar uma nova variável",type:"WARNING"})})};return jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col gap-4",children:jsxRuntimeExports.jsx(Root.MultipleInput,{name:"optional_variable",update:c,remove:r,children:o.map((m,d)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-3",children:[jsxRuntimeExports.jsx(Root.Select,{title:"Característica",name:`optional_variable.${d}.title`,options}),jsxRuntimeExports.jsx(Root.Input,{name:`optional_variable.${d}.answer`,title:"Digite a variável: (ex: ROSA ou ROSA, AZUL, PRETO)"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center items-center",children:[d===o.length-1&&jsxRuntimeExports.jsx(TipContainer,{tip:"Adicionar nova varável",positionX:"LEFT",children:jsxRuntimeExports.jsx(MdAdd,{onClick:u,className:"text-3xl bg-primary-100 fill-primary-300 rounded-full cursor-pointer"})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Remove varável",positionX:"LEFT",children:jsxRuntimeExports.jsx(MdDelete,{className:"text-3xl bg-red-200 fill-red-700 rounded-full cursor-pointer",onClick:()=>o.length>1&&r(d)})})]})]},m.id))})})}function ComomQuestions(){const{setModalContent:e}=reactExports.useContext(ModalContext),{control:s,watch:a}=useFormContext(),{fields:o,append:l,remove:r,update:c}=useFieldArray({control:s,name:"questions"});reactExports.useEffect(()=>{!o.length&&l({ask:"",answer:""})},[]);const u=()=>{const m=a(`questions.${o.length-1}`);m.ask&&m.answer?l({ask:"",answer:""}):e({componentName:"modal_error_add_product",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_add_product",message:"Preencha todos os dados antes de adicionar uma nova pergunta",type:"WARNING"})})};return jsxRuntimeExports.jsx(Root.MultipleInput,{name:"questions",update:c,remove:r,children:o.map((m,d)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center rounded-md p-4 items-start gap-4",children:[jsxRuntimeExports.jsx(Root.Input,{name:`questions.${d}.ask`,title:"Digite uma pergunta"}),jsxRuntimeExports.jsx(Root.TextArea,{name:`questions.${d}.answer`,title:"Digite a resposta"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-end items-center",children:[jsxRuntimeExports.jsx(MdAdd,{onClick:u,className:"fill-primary-200 bg-primary-100 text-3xl p-1 cursor-pointer rounded-full"}),jsxRuntimeExports.jsx(MdDelete,{onClick:()=>o.length>1&&r(d),className:"fill-red-700 bg-red-200 text-3xl p-1 cursor-pointer rounded-full"})]})]},m.id))})}function ModalCreateProduct({useFieldArray:e,useFormReturn:s,index:a}){var g;const{setModalContent:o,clearModal:l}=reactExports.useContext(ModalContext),r=reactExports.useRef(null),{append:c,update:u,remove:m}=e,d=s.watch("step_0.products"),x=useForm({defaultValues:d[a]});reactExports.useEffect(()=>{d[a]||c({name:"",value:"",description:"",image:{url:"",description:""}})},[]);const h=j=>{if(j!=null&&j.name&&(j!=null&&j.value)&&(j!=null&&j.description))u(a,j),l("modal_add_product");else{const R=j!=null&&j.name?j!=null&&j.value?"descrição do produto":"valor do produto":"nome do produto";o({componentName:"modal_error_save_product",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_save_product",message:`O campo ${R} não pode estar vazio`,type:"ERROR"})})}},p=()=>{var j,R;(!((j=d[a])!=null&&j.name)||!((R=d[a])!=null&&R.value))&&m(a),l("modal_add_product")},f=()=>{o({componentName:"modal_delete_product",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(Confirm,{title:"Deseja realmente excluir esse produto?",cancelFuntion:()=>l("modal_delete_product"),confirmFunction:()=>{m(a),l("modal_add_product"),l("modal_delete_product")}})})})};return jsxRuntimeExports.jsxs("div",{ref:r,className:"w-full h-screen flex flex-col justify-start md:justify-center items-center gap-6 py-4 overflow-hidden overflow-y-auto fixed top-0 left-0 z-[999] bg-primary-50 dark:bg-primary-200 rounded-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Cadastre seus produtos"}),jsxRuntimeExports.jsx("div",{className:"w-full p-2 flex gap-4 justify-end items-center rounded-md absolute top-0 right-2",children:jsxRuntimeExports.jsx(TipContainer,{tip:"Sair",positionY:"BOTTOM",positionX:"LEFT",children:jsxRuntimeExports.jsx(MdClose,{onClick:p,className:"bg-zinc-500/40 text-3xl p-1 cursor-pointer rounded-full"})})}),jsxRuntimeExports.jsx(FormProvider,{...x,children:jsxRuntimeExports.jsxs("form",{onSubmit:x.handleSubmit(h),className:"w-full max-w-[1200px] py-8 flex flex-col justify-start items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"w-[90%] flex justify-center items-end",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-center",children:"Faça o upload da imagem do produto"}),jsxRuntimeExports.jsx(Root.File,{name:"image.url",sizeContainer:"100px",formContext:x})]}),jsxRuntimeExports.jsx(TextArea,{name:"image.description",title:"Faça um descrição detalhada da imagem",minText:50,help:"Essa descrição é muito importante para que a inteligencia artificial posso entender em qual contexto da conversa utilizar.",register:x.register})]}),jsxRuntimeExports.jsxs("div",{className:"w-[90%] flex flex-col md:flex-row gap-6 justify-center items-center relative ",children:[jsxRuntimeExports.jsx(Input,{name:"name",title:"De um nome a esse produto:",register:x.register}),jsxRuntimeExports.jsx(Input,{name:"value",onChange:({target:j})=>{const _=(parseFloat(j.value.replace(/[^\d]/g,""))/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});j.value=_},title:"Qual o valor do produto?",register:x.register})]}),jsxRuntimeExports.jsx("div",{className:"w-[90%] flex justify-center items-center",children:jsxRuntimeExports.jsx(TextArea,{name:"description",title:"Conte um pouco sobre seu produto e como ele funciona",minText:50,register:x.register})}),jsxRuntimeExports.jsx("div",{className:"w-[90%] flex justify-center items-center",children:jsxRuntimeExports.jsx(Root.Optional,{name:"optional_variable",text:"Esse produto possui alguma caracteristica?",children:jsxRuntimeExports.jsx(AddVariables,{})})}),jsxRuntimeExports.jsx("div",{className:"w-[90%] flex justify-center items-center",children:jsxRuntimeExports.jsx(Root.Optional,{name:"questions",text:"Esse produto possui perguntas frequentes?",children:jsxRuntimeExports.jsx(ComomQuestions,{})})}),jsxRuntimeExports.jsxs(Button,{type:"submit",customClass:"min-w-[200px] my-8",children:["Salvar ",jsxRuntimeExports.jsx(MdSave,{})]}),jsxRuntimeExports.jsxs(Button,{"data-productbeingedited":!!((g=d[a])!=null&&g.name),type:"button",customClass:"bg-red-900 min-w-[200px] data-[productbeingedited=false]:hidden",onClick:f,children:["Excluir Produto ",jsxRuntimeExports.jsx(MdDelete,{})]})]})})]})}function AddProduct(){const{setModalContent:e}=reactExports.useContext(ModalContext),s=useFormContext(),a=useFieldArray({name:"step_0.products",control:s.control});reactExports.useEffect(()=>o(),[a.fields]);const o=()=>{localStorage.setItem(DATABASE_NAME_TO_SAVE_LOCALSTORAGE,JSON.stringify({products:a.fields}))},l=r=>{e({componentName:"modal_add_product",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(ModalCreateProduct,{useFieldArray:a,useFormReturn:s,index:r})})})};return jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col justify-start gap-4 px-2 md:px-4 overflow-hidden text-primary-100 dark:text-light",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex items-center justify-between my-4",children:jsxRuntimeExports.jsx("h2",{className:"w-full font-medium text-center text-lg md:text-xl",children:"Cadastre seus produtos/serviços disponíveis"})}),jsxRuntimeExports.jsxs("div",{className:"w-full min-h-40 flex flex-nowrap md:flex-wrap overflow-auto justify-start md:justify-center gap-4 ",children:[jsxRuntimeExports.jsx("div",{onClick:()=>l(a.fields.length),className:"w-36 min-w-[100px] h-24 flex flex-col items-center justify-center text-primary-100 border border-primary-100 rounded-md bg-primary-200 cursor-pointer hover:scale-105 transition-transform",children:jsxRuntimeExports.jsx(MdAdd,{className:"size-10"})}),a.fields.map((r,c)=>{var u;return jsxRuntimeExports.jsx("div",{onClick:()=>l(c),className:"w-36 min-w-[100px] h-24  flex flex-col items-center justify-center overflow-hidden text-primary-100 border border-primary-100 bg-primary-200 rounded-md cursor-pointer hover:scale-105 transition-transform",children:jsxRuntimeExports.jsxs("div",{className:"w-full h-full relative",children:[jsxRuntimeExports.jsx("div",{className:"bg-black/50 absolute top-0 left-0 w-full h-full"}),jsxRuntimeExports.jsx("h3",{className:"w-full overflow-hidden whitespace-nowrap text-ellipsis px-1 text-center absolute bottom-0 bg-dark font-bold",children:r.name}),jsxRuntimeExports.jsx("img",{src:((u=r==null?void 0:r.image)==null?void 0:u.url)||PREVIEW_IMAGE,alt:`Imagem do produto: ${r.name}`,className:"w-full h-fullobject-cover"})]})},r.id)}).reverse()]})]})}function StepPaymentMethodAndConditions(){const{watch:e}=useFormContext(),s=e("step_1.payment_methods"),a=e("step_1.credit_card_installments"),o=e("step_1.order_tracking"),l=e("step_1.tracking_link"),r=typeof s=="object"&&(s==null?void 0:s.find(c=>c==="Cartão de crédito"));return reactExports.useEffect(()=>{const c=JSON.parse(localStorage.getItem(DATABASE_NAME_TO_SAVE_LOCALSTORAGE)||"{}");localStorage.setItem(DATABASE_NAME_TO_SAVE_LOCALSTORAGE,JSON.stringify({...c,payment_methods:s,credit_card_installments:a,order_tracking:o,tracking_link:l}))},[s,a,o]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Root.Container,{className:"flex w-full",title:"Quais são os métodos de pagamentos aceitos?",children:jsxRuntimeExports.jsx(Root.Select,{title:"Escolha seus métodos de pagamentos",multipleSelect:!0,name:"step_1.payment_methods",options:[{value:"Pix",text:"Pix"},{value:"Boleto",text:"Boleto"},{value:"Cartão de débito",text:"Cartão de débito"},{value:"Cartão de crédito",text:"Cartão de crédito"},{value:"Pagamentos em aplicativo",text:"Pagamentos em aplicativo"}]})}),jsxRuntimeExports.jsx(Root.Container,{title:"Quantas vezes o cliente pode parcelar?",hiddenContainer:!r,className:"max-w-[200px]",children:jsxRuntimeExports.jsx(Root.Select,{title:"Quantas parcelas?",name:"step_1.credit_card_installments",options:[{value:"1x",text:"1x"},{value:"2x",text:"2x"},{value:"3x",text:"3x"},{value:"4x",text:"4x"},{value:"5x",text:"5x"},{value:"6x",text:"6x"},{value:"7x",text:"7x"},{value:"8x",text:"8x"},{value:"9x",text:"9x"},{value:"10x",text:"10x"},{value:"11x",text:"11x"},{value:"12x",text:"12x"},{value:"18x",text:"18x"},{value:"24x",text:"24x"}]})}),jsxRuntimeExports.jsxs(Root.Optional,{name:"step_1.order_tracking",text:"Você está entregando um produto físico?",className:"w-full flex flex-col gap-6 ",children:[jsxRuntimeExports.jsx(Root.TextArea,{name:"step_1.order_tracking",title:"Descreva como seu produto vai ser entregue e as politicas de frete?"}),jsxRuntimeExports.jsx(Root.Optional,{name:"step_1.tracking_link",text:"Você possui link para rastrear pedido?",children:jsxRuntimeExports.jsx(Root.Input,{title:"Digite a url do site:",name:"step_1.tracking_link",onChange:({target:c})=>{c.value.toLowerCase().includes("http")||(c.value=`https://${c.value.replace("http","")}`)}})})]})]})}function ModalEditDatabase({prompt:e,setPrompts:s}){const{setModalContent:a,clearModal:o}=reactExports.useContext(ModalContext),{client:l,setClient:r}=reactExports.useContext(ClientContext),c=JSON.parse(e.prompt_query||"{}"),u=!!Object.keys(c).length,m=useForm({resolver:zodResolver(databaseSchema),defaultValues:u?{step_0:{products:c.step_0.products||"",observation:c.step_0.observation},step_1:{payment_methods:c.step_1.payment_methods||[],credit_card_installments:c.step_1.credit_card_installments||"",order_tracking:c.step_1.order_tracking||"",tracking_link:c.step_1.tracking_link||""},step_2:{warranty_time:c.step_2.warranty_time||{time:0,type:""},how_exchanges_work_and_returns:c.step_2.how_exchanges_work_and_returns||"",how_guarantee_work:c.step_2.how_guarantee_work||""},step_3:{address:c.step_3.address||"",company_name:c.step_3.company_name||"",contact_email:c.step_3.contact_email||"",contact_phone_number:c.step_3.contact_phone_number||"",support_hours:c.step_3.support_hours||""},step_4:{client_describe:c.step_4.client_describe||"",ia_name:c.step_4.ia_name||"",restrictions:c.step_4.restrictions}}:void 0}),d=async h=>{const p=JSON.stringify(h),f=transformSchemaInText(h),g={prompt_name:e.prompt_name,prompt:f,prompt_query:p,client_describe:h.step_4.client_describe};if(g){const j=await updateDatabase(g,e.id);j&&l&&j.status===200&&(h.step_0.products.forEach(async R=>{await saveImage({client_id:l.id,prompt_id:e.id,url:R.image.url,description:R.image.description})}),s(R=>[...R.filter(_=>_.id!==j.data.id),j.data]),a({componentName:"modal_updated_database",components:jsxRuntimeExports.jsx(PopOver,{message:"Database atualizado com sucesso",componentName:"modal_updated_database",functionAfterComplete:()=>o(null,{clearAll:!0})})}))}};async function x(){if(e.id){const h=await daleteDatabase(e.id);if((h==null?void 0:h.status)===200){s(f=>f.filter(g=>g.id!==h.data.id));const p=l==null?void 0:l.plan_management.prompt.findIndex(f=>f.id===e.id);l&&typeof p=="number"&&(l.plan_management.prompt.splice(p,1),r(l)),a({componentName:"modal_delete_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Fonte de dados excluido com sucesso!",componentName:"modal_delete_success",functionAfterComplete:()=>o(null,{clearAll:!0})})})}else(h==null?void 0:h.status)===500?a({componentName:"modal_failed_delete_database",components:jsxRuntimeExports.jsx(PopOver,{message:"Você não pode excluir uma fonte de dados que possui um chat vinculado a ela, tente excluir todos os chats primeiro, antes de excluir essa fonte de dados.",type:"ERROR",componentName:"modal_failed_delete_database"})}):a({componentName:"modal_failed_delete",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao tentar excluir essa fonte de dados. Tente reiniciar a página e tentar de novo.",type:"ERROR",componentName:"modal_failed_delete"})})}}return jsxRuntimeExports.jsx("div",{className:"w-screen h-screen px-4 md:px-0 md:w-[90vw] md:h-[80vh] md:min-h-[450px] md:min-w-[700px] flex items-start overflow-hidden",children:jsxRuntimeExports.jsxs(Root.EditForm,{form:m,onDelete:x,onSubmit:d,children:[jsxRuntimeExports.jsxs(Root.EditStep,{index:0,titleStep:"Informações do produto",icon:jsxRuntimeExports.jsx(FaCircleInfo,{}),children:[jsxRuntimeExports.jsx(AddProduct,{}),jsxRuntimeExports.jsx(Root.Optional,{text:"Deseja adicionar alguma observação sobre seus produtos?",name:"step_0.observation",children:jsxRuntimeExports.jsx(Root.TextArea,{name:"step_0.observation",title:"Deixe uma observação sobre seus produtos"})})]}),jsxRuntimeExports.jsx(Root.EditStep,{index:1,titleStep:"Métodos de pagamento",icon:jsxRuntimeExports.jsx(FaInfo,{}),children:jsxRuntimeExports.jsx(StepPaymentMethodAndConditions,{})}),jsxRuntimeExports.jsxs(Root.EditStep,{index:2,titleStep:"Politicas e condições",icon:jsxRuntimeExports.jsx(FaBook,{}),children:[jsxRuntimeExports.jsxs(Root.Container,{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Root.Select,{name:"step_2.warranty_time.type",title:"Tipo de data",options:[{text:"Dia(s)",value:"dia"},{text:"Mês(s)",value:"mes"},{text:"Ano(s)",value:"ano"}]}),jsxRuntimeExports.jsx(Root.Input,{type:"number",name:"step_2.warranty_time.time",title:"Tempo de garantia?"})]}),jsxRuntimeExports.jsx(Root.TextArea,{name:"step_2.how_guarantee_work",title:"Como funciona a garantia?"}),jsxRuntimeExports.jsx(Root.Optional,{name:"step_2.how_exchanges_work_and_returns",text:"Esse produto/serviço possui trocas e devoluções?",children:jsxRuntimeExports.jsx(Root.TextArea,{name:"step_2.how_exchanges_work_and_returns",title:"Como funciona as trocas e devoluções?"})})]}),jsxRuntimeExports.jsxs(Root.EditStep,{index:3,titleStep:"Sobre a empresa",icon:jsxRuntimeExports.jsx(FaSuitcase,{}),children:[jsxRuntimeExports.jsx(Root.Container,{className:"flex gap-4",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_3.company_name",title:"Qual o nome da empresa?"})}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsx(Root.Input,{name:"step_3.contact_email",title:"Digite um e-mail para contato"}),jsxRuntimeExports.jsx(Root.Input,{title:"Digite um telefone para contato",name:"step_3.contact_phone_number",onChange:({target:h})=>{const p=h.value.replace(/[^\d]/g,"");if(p.length<11){let f;p.length===11?f=p.replace(/^(\d{2})(\d{1})(\d{4})(\d{4})$/,"($1) $2 $3-$4"):f=p.replace(/^(\d{2})(\d{4})(\d{4})$/,"($1) $2-$3"),h.value=f}else h.value=h.value.substring(0,15)}})]}),jsxRuntimeExports.jsx(OpeningHours,{}),jsxRuntimeExports.jsx(Root.Optional,{name:"step_3.address",text:"Sua empresa possui um endereço físico?",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_3.address",title:"Qual o endereço da sua empresa?"})})]}),jsxRuntimeExports.jsxs(Root.EditStep,{index:4,titleStep:"Personalidade da IA ",icon:jsxRuntimeExports.jsx(FaFaceGrinBeam,{}),children:[jsxRuntimeExports.jsx(Root.Optional,{name:"step_4.ia_name",text:"Deseja dar um nome a sua inteligência artificial?",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_4.ia_name",title:"Qual o nome da sua inteligência artificial?"})}),jsxRuntimeExports.jsx(Root.Optional,{text:"Deseja adicionar restrições de palavras ou frase?",name:"step_4.restrictions",children:jsxRuntimeExports.jsx(Root.Input,{name:"step_4.restrictions",title:"Faça uma lista de restrições para que a IA evite utiliza-la em uma conversa"})}),jsxRuntimeExports.jsx(Root.TextArea,{title:"Faça uma breve descrição de quem é seu público (cliente)",name:"step_4.client_describe"})]})]})})}function MyDatabases(){var m;const{client:e}=reactExports.useContext(ClientContext),{setModalContent:s,clearModal:a}=reactExports.useContext(ModalContext),o=Array(MAX_CONTAINER_TO_CREATE_DATABASE).fill(0),[l,r]=reactExports.useState(((m=e==null?void 0:e.plan_management)==null?void 0:m.prompt)||[]),c=d=>{l!=null&&l.length&&s({componentName:"modal_create_database",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(ModalEditDatabase,{prompt:l[d],setPrompts:r})})})},u=d=>{async function x(h){h.preventDefault();const p=h.target.querySelector("input").value,f=l[d].id;if(p){const g=await updateDatabaseName(p,f);(g==null?void 0:g.status)===200&&(r([...l,l[d].prompt_name=p]),s({componentName:"modal_saved",components:jsxRuntimeExports.jsx(PopOver,{message:"Nome da sua base de dados foi atualizado com sucesso!",componentName:"modal_saved",functionAfterComplete:()=>a(null,{clearAll:!0})})}))}}s({componentName:"modal_edit_name",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center gap-4 p-4",children:[jsxRuntimeExports.jsx("h2",{children:"Digite o novo nome da sua fonte de dados:"}),jsxRuntimeExports.jsxs("form",{onSubmit:x,className:"flex flex-col justify-center items-center gap-4",children:[jsxRuntimeExports.jsx("input",{placeholder:"Ex: Minha nova base de dados",name:"database_name",defaultValue:l[d].prompt_name}),jsxRuntimeExports.jsx(Button,{children:"Salvar"})]})]})})})};return e&&jsxRuntimeExports.jsx(Container,{title:"Fonte de dados",children:jsxRuntimeExports.jsx("div",{className:"w-full flex-wrap flex justify-center p-4 my-12 gap-8",children:o.map((d,x)=>{var h,p,f,g,j;return(h=e.plan_management)!=null&&h.plan&&x<Number(e.plan_management.plan.max_databases.default)?jsxRuntimeExports.jsx("div",{"data-prompt":!!((p=l[x])!=null&&p.prompt_name),className:"w-full max-w-[300px] flex justify-center items-center  cursor-pointer",children:(f=l[x])!=null&&f.prompt_name?jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-2 items-center justify-center rounded-xl border border-primary-100 bg-primary-100 dark:bg-primary-300 hover:bg-primary-200 text-white dark:text-primary-100 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:[jsxRuntimeExports.jsxs("h2",{className:"w-[200px] text-center py-4 flex justify-center items-center gap-2",onClick:()=>c(x),children:[jsxRuntimeExports.jsx(FaDatabase,{}),jsxRuntimeExports.jsx("span",{className:"w-full whitespace-nowrap text-ellipsis overflow-x-hidden",children:(g=l[x])==null?void 0:g.prompt_name})]}),jsxRuntimeExports.jsx(MdEdit,{className:"cursor-text ",onClick:()=>u(x)})]}):jsxRuntimeExports.jsx(ButtonCreateNewDatabase,{plan_management_id:e.plan_management.id,index:x})},x):jsxRuntimeExports.jsx("div",{"data-prompt":!!((j=l[x])!=null&&j.prompt_name),className:"w-full max-w-[300px] flex opacity-30 cursor-not-allowed justify-center items-center rounded-xl border border-primary-100 bg-primary-300 hover:bg-primary-200 text-xl data-[prompt=false]:text-2xl data-[prompt=false]:bg-primary-200/20",children:jsxRuntimeExports.jsx(FaLock,{className:"py-3 text-5xl"})},x)})})})}function ListChats({chats:e,selectedChatById:s}){const[a,o]=useSearchParams(),l=a.get("mobile_modal_select_chat")==="open",r=c=>{a.delete("mobile_modal_select_chat"),o(a),s(c)};return!!e.length&&jsxRuntimeExports.jsx("div",{"data-isopen":window.innerWidth<768?!!l:!0,className:"w-full md:w-[400px] md:max-h-[400px] fixed md:static top-0 md:bg-transparent left-0 h-full overflow-auto flex flex-col border-r border-light/40 data-[isopen=false]:hidden",children:e.map((c,u)=>c.messages.length>1&&jsxRuntimeExports.jsxs("div",{className:"w-full cursor-pointer hover:bg-primary-200 transition-colors p-4 border border-primary-100/20",onClick:()=>r(c.id),children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap text-ellipsis overflow-hidden py-1 text-xl font-bold",children:c.messages.length>1?c.messages[1].message.replace("<br/>",""):`Chat ${u.toString().padStart(2,"0")}`},c.messages.join()),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"italic text-xs",children:[c.messages.length," messagens"]}),jsxRuntimeExports.jsx("span",{className:"italic text-xs",children:formatDate(c.messages[c.messages.length-1].time).dateFormat_A})]})]},c.id))})}function ContentChats({chats:e,selectedChatById:s}){const{client:a}=reactExports.useContext(ClientContext),[o,l]=useSearchParams(),{historic_messages:r,messages:c,project_id:u,lead_collected:m}=e.find(p=>p.id===s)||e[0],d=[...r,...c],x=a==null?void 0:a.plan_management.project.find(p=>p.id===u),h=()=>{const p=x==null?void 0:x.project_name.replaceAll(" ","_");p&&o.set(FILTER_BY_PROJECT_NAME_URL,p),o.set(TAB_NAME_URL,"leads"),l(o)};return jsxRuntimeExports.jsx("div",{className:"w-full h-full md:max-h-[400px] overflow-hidden flex flex-col mb-8 md:mb-0",children:jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full h-[60px] flex justify-between items-center px-4 bg-primary-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-[50px] h-[50px] overflow-hidden rounded-full",children:jsxRuntimeExports.jsx("img",{src:x==null?void 0:x.logo,alt:"logo do cliente",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx("p",{className:"px-4 text-xl text-light",children:x==null?void 0:x.project_name})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 items-center cursor-pointer",onClick:h,children:m.find(p=>p.email||p.cell_phone)?jsxRuntimeExports.jsx(TipContainer,{tip:"informações foram coletadas nesse chat",positionX:"LEFT",positionY:"BOTTOM",children:jsxRuntimeExports.jsx(FaCheckCircle,{className:"fill-green-200"})}):jsxRuntimeExports.jsx(TipContainer,{tip:"Nenhuma informação foi coletada",positionX:"LEFT",positionY:"BOTTOM",children:jsxRuntimeExports.jsx(FaCircleQuestion,{className:"fill-red-200"})})})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-full max-h-[320px] p-4 flex flex-col gap-4 overflow-auto",children:(d==null?void 0:d.map((p,f)=>jsxRuntimeExports.jsx("div",{"data-player":p.player,className:"w-full flex data-[player='user']:justify-end justify-start",children:jsxRuntimeExports.jsxs("div",{"data-player":p.player,className:"max-w-[80%] bg-primary-100/50 dark:bg-light text-black/80 data-[player='user']:bg-primary-100 dark:data-[player='user']:bg-primary-200 data-[player='user']:text-light p-2 rounded-xl",children:[jsxRuntimeExports.jsx("h2",{dangerouslySetInnerHTML:{__html:p.message}}),jsxRuntimeExports.jsx("span",{className:"w-full flex justify-end text-xs italic",children:formatDate(p.time).shortHour})]})},f)))||jsxRuntimeExports.jsx("h2",{className:"w-full h-[200px] flex justify-center items-center",children:"Ainda não existe nenhuma conversa para esse chat"})})]})})}function ConversationHistoric(){var f;const{client:e}=reactExports.useContext(ClientContext),[s,a]=useSearchParams(),[o,l]=reactExports.useState(),[r,c]=reactExports.useState([]),u=s.get(FILTER_BY_PROJECT_NAME_URL),m=(f=e==null?void 0:e.plan_management)==null?void 0:f.project.map(g=>({id:g.project_name.replace(" ","_"),value:g.project_name,text:g.project_name}));reactExports.useEffect(()=>{const g=s.get(FILTER_BY_TIME_NAME_URL);if(e&&m!=null&&m.length){let j;u?j=e.plan_management.project.filter(_=>_.project_name.replaceAll(" ","_")===u&&_):j=e.plan_management.project;const R=j.map(_=>_.message_manager.filter(y=>Number(g)?convertDateInHour(y.created_at)<=Number(g):!0)).flat();c(R)}},[s]);const d=g=>{s.set("project",g.replaceAll(" ","_")),a(s)},x=async({currentTarget:g})=>{if(e!=null&&e.plan_management){const j=g.querySelector("svg");j.classList.add("rotate-[-360deg]","transition-transform","duration-1000");const R=setTimeout(()=>{j.classList.remove("rotate-[-360deg]","transition-transform","duration-1000"),clearTimeout(R)},1e3)}},h=()=>{s.append("mobile_modal_select_chat","open"),a(s)},p=()=>{s.delete("project"),a(s)};return jsxRuntimeExports.jsxs(Container,{title:"Conversas",className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-[90%] flex flex-col-reverse md:flex-row md:justify-end gap-2 md:gap-8 md:h-[40px] px-4 md:px-0",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione um chat",children:jsxRuntimeExports.jsx(Select,{name:"select_chat",title:"Selecione um chat",options:m||[],optionsDefault:u?Array.of(u):null,onSelected:d,onDelete:p})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-8 justify-between",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione uma data  como filtro",children:jsxRuntimeExports.jsx(SelectTime,{})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Atualize seus chats",positionX:"LEFT",children:jsxRuntimeExports.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",onClick:x,children:jsxRuntimeExports.jsx(FaArrowRotateLeft,{className:"text-nxl"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-[90%] h-3/4 flex gap-4 flex-col md:flex-row md:bg-light md:dark:bg-gray my-4 border border-primary-200 rounded-md",children:[jsxRuntimeExports.jsx(Button,{customClass:"bg-primary-100 dark:bg-primary-200 md:hidden",onClick:h,children:"Selecione um chat "}),jsxRuntimeExports.jsx(ListChats,{chats:r,selectedChatById:l}),r.length?jsxRuntimeExports.jsx(ContentChats,{chats:r,selectedChatById:o}):jsxRuntimeExports.jsx("h2",{className:"p-4 text-center w-full",children:"Você ainda não teve acessos no seu chat"})]})]})}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,s=0){return byteToHex[e[s+0]]+byteToHex[e[s+1]]+byteToHex[e[s+2]]+byteToHex[e[s+3]]+"-"+byteToHex[e[s+4]]+byteToHex[e[s+5]]+"-"+byteToHex[e[s+6]]+byteToHex[e[s+7]]+"-"+byteToHex[e[s+8]]+byteToHex[e[s+9]]+"-"+byteToHex[e[s+10]]+byteToHex[e[s+11]]+byteToHex[e[s+12]]+byteToHex[e[s+13]]+byteToHex[e[s+14]]+byteToHex[e[s+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,s,a){if(native.randomUUID&&!s&&!e)return native.randomUUID();e=e||{};const o=e.random||(e.rng||rng)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=o[l];return s}return unsafeStringify(o)}function Table({titleColumn:e,rows:s,maxPerPage:a=10}){const[o,l]=reactExports.useState(0),[r,c]=reactExports.useState([]);reactExports.useEffect(()=>{if(!s)return;const m=Math.floor(s.length/a),d=s.length%a,x=[];if(Array.from({length:m}).forEach((h,p)=>{const f=s.slice(a*p,a*(p+1));x.push(f)}),d){const h=s.slice(s.length-d,s.length);x.push(h)}c(x)},[s]);const u=m=>{const d=m.currentTarget.dataset.tab;l(d==="previous"?x=>x>0?x-1:r.length-1:x=>x<r.length-1?x+1:0)};return jsxRuntimeExports.jsx("div",{className:"w-full mx-auto flex flex-col items-center",children:r[o]?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-full overflow-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full table-auto",children:[jsxRuntimeExports.jsx("thead",{className:"w-full bg-primary-100/30 border-2 border-primary-100/60",children:jsxRuntimeExports.jsx("tr",{className:"w-full",children:e.map(m=>jsxRuntimeExports.jsx("th",{className:"min-w-20 whitespace-nowrap overflow-hidden text-ellipsis uppercase p-2 px-3 border-r border-primary-100/40",children:m},v4()))})}),jsxRuntimeExports.jsx("tbody",{className:"w-full divide-y divide-gray_light",children:r[o].map((m,d)=>jsxRuntimeExports.jsx("tr",{"data-color":d%2===0,className:"data-[color=true]:bg-primary-50/10 h-[30px]",children:m.map(x=>jsxRuntimeExports.jsx("td",{className:"text-center lowercase",children:x},v4()))},v4()))})]})}),jsxRuntimeExports.jsxs("div",{"data-pagination":r.length>1,className:"w-full flex gap-4 items-center justify-center p-4 data-[pagination=false]:hidden",children:[jsxRuntimeExports.jsx(FaArrowCircleLeft,{className:"cursor-pointer","data-tab":"previous",onClick:u}),jsxRuntimeExports.jsxs("span",{children:[o+1," - ",r.length]}),jsxRuntimeExports.jsx(FaArrowCircleRight,{className:"cursor-pointer","data-tab":"next",onClick:u})]})]}):jsxRuntimeExports.jsx("h2",{children:"Você ainda não recebeu nenhum dado para ser exibido na tabela"})})}function TransactionHistoric({plan_management:e}){const[s,a]=reactExports.useState();return reactExports.useEffect(()=>{const o=e==null?void 0:e.trasaction.map(l=>[e.plan.plan_name,formatDate(l.updated_at).dateFormat_A,`${l.amount_paid} reais`,l.payment_method,l.status==="APPROVED"?"Aprovado":"Pendente"]);a(o)},[]),s&&jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl p-2",children:"Historico de transações"}),jsxRuntimeExports.jsx("div",{className:"w-[95%]",children:jsxRuntimeExports.jsx(Table,{titleColumn:["Plano","Data e hora","Valor do plano","Método de pagamento","Status"],rows:s,maxPerPage:5})})]})}function PlanName({plan_management:e}){return e&&e.status!=="DISABLED"?jsxRuntimeExports.jsx("span",{className:"font-bold text-yellow-600 uppercase",children:e.plan.plan_name}):jsxRuntimeExports.jsx("span",{className:"text-zinc-400/60",children:"Sem plano"})}function calculatesRemainingFreeTrialDays(e){const l=(new Date(e)-new Date)/(1e3*60*60*24);return Number(l.toFixed(0))}function PlanInformation({plan_management:e}){const s=()=>e?calculatesRemainingFreeTrialDays(e.free_trial):0;return e&&e.status!=="DISABLED"&&jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col items-center",children:[jsxRuntimeExports.jsxs("span",{children:["Status:",jsxRuntimeExports.jsx("span",{"data-status":e.status,className:"px-1 rounded-md mx-2 bg-red-200 text-red-700 data-[status='ACTIVE']:bg-green-200 data-[status='ACTIVE']:text-green-700",children:e.status==="ACTIVE"?"Ativo":"Desativado"})]}),jsxRuntimeExports.jsxs("span",{children:["Chats: ",e.project.length," / ",Number(e.plan.max_projects.default)]}),jsxRuntimeExports.jsxs("span",{children:["Fonte de dados: ",e.prompt.length," / ",Number(e.plan.max_databases.default)]}),jsxRuntimeExports.jsxs("span",{children:["Análise de métrica diária:  ",Number(e.plan.max_analyze_metric.default)," "]}),jsxRuntimeExports.jsxs("span",{children:["Limite de messages: ",messagesEventManager(e).totalMessages," / ",Number(e.plan.max_messages.default)," "]}),jsxRuntimeExports.jsxs("span",{"data-free":Number(e.plan.monthly_price)<=0,className:"data-[free=true]:hidden",children:["Reembolso garantido: ",s()>0?s()+" dias restantes":"expirado"]})]})}function ButtonChangeAndAddPlan({client:e}){const s=useNavigate(),a=()=>{s("/plans")};return(e!=null&&e.refund_requested.length&&e.refund_requested[0].status!=="PENDING",!0)&&jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col my-4 justify-center items-center",children:jsxRuntimeExports.jsx(Button,{onClick:a,children:((e==null?void 0:e.plan_management)&&e.plan_management.status)!=="DISABLED"?Number(e==null?void 0:e.plan_management.plan.monthly_price)>0?"Mudar de plano":"Contratar plano":"Adicionar plano"})})}async function refundRequested(e){return await axios.post(`${API_URL}/refund_requested`,e).catch(a=>console.warn(a))}async function reactivatePlan(e){return await axios.post(`${API_URL}/refund_requested/reactive`,{client_id:e}).catch(a=>console.warn(a))}function ButtonRequestRefund({client:e}){const{setModalContent:s}=reactExports.useContext(ModalContext),a=()=>e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0?calculatesRemainingFreeTrialDays(e==null?void 0:e.plan_management.free_trial):0,o=async()=>{const u=d=>{var p,f;d.preventDefault();const x=(p=d.currentTarget.querySelector("textarea"))==null?void 0:p.value,h=(f=d.currentTarget.querySelector("div > span[data-active='true']"))==null?void 0:f.textContent;if(!x||!h){s({componentName:"modal_error_refund",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_refund",message:"Informe o motivo da solicitação do seu reembolso e de uma nota para sua expêriencia na Wipzee.",type:"WARNING"})});return}(async()=>{if(e){const g={client_id:e.id,reason:x||"",product_review:Number(h||0)};await refundRequested(g)?(s({componentName:"modal_request_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Solicitação de reembolso foi enviada com sucesso!",componentName:"modal_request_success"})}),setTimeout(()=>window.location.reload(),1e3)):s({componentName:"modal_error_request",components:jsxRuntimeExports.jsx(PopOver,{message:"Ocorreu um erro ao enviar sua solicitação de reembolso, por favor entre em contato com nosso suporte.",componentName:"modal_error_request"})})}else s({componentName:"modal_error_client",components:jsxRuntimeExports.jsx(PopOver,{message:"Erro ao processar o cliente, por favor recarregue a página.",componentName:"modal_error_client"})})})()},m=({currentTarget:d})=>{const x=d.closest("div[data-review='review']");x==null||x.querySelectorAll("span").forEach(h=>h.dataset.active="false"),d.dataset.active="true"};s({componentName:"modal_reason_client",components:jsxRuntimeExports.jsxs(PopUp,{children:[jsxRuntimeExports.jsx("h2",{className:"p-4 text-xl font-medium text-center",children:"Solicitação de reembolso"}),jsxRuntimeExports.jsxs("form",{className:"w-auto md:w-[500px] p-4 space-y-3",onSubmit:u,children:[jsxRuntimeExports.jsx(TextArea,{name:"reason",title:"Por qual motivo você deseja pedir seu reembolso?"}),jsxRuntimeExports.jsx("h2",{className:"text-center p-4",children:"De uma nota para a sua experiência com a Wipzee. "}),jsxRuntimeExports.jsx("div",{"data-review":"review",className:"w-4/5 flex mx-auto justify-between mt-12",children:Array.from({length:6}).map((d,x)=>jsxRuntimeExports.jsx("span",{className:"w-12 h-12 text-light bg-primary-100/30 hover:bg-primary-100 data-[active=true]:bg-primary-100 transition-colors p-3 rounded-full flex items-center justify-center font-bold cursor-pointer",onClick:m,children:x},x))}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mt-8",children:jsxRuntimeExports.jsx(Button,{children:"Enviar"})})]})]})})},l=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0)return e!=null&&e.refund_requested.length&&e.plan_management.status==="ACTIVE"&&a()>0?e.refund_requested[0].status!=="PENDING":a()>0&&e.plan_management.status!=="DISABLED"},r=()=>{e?window.open(`https://dash.ticto.com.br/subscription-verification?code=${e==null?void 0:e.ticto_order_code}&email=${e==null?void 0:e.purchase_email}`):s({componentName:"modal_failed_cancel",components:jsxRuntimeExports.jsx(PopOver,{message:"Falha ao preencher os dados de cancelamento, por favor entre em contato com o suporte.",componentName:"modal_failed_cancel"})})},c=()=>{if(e!=null&&e.plan_management&&Number(e.plan_management.plan.monthly_price)>0&&e.plan_management.status==="ACTIVE"&&a()<=0)return!!(e.refund_requested.length&&e.refund_requested[0].status!=="PENDING")};return l()?jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center",children:jsxRuntimeExports.jsx("a",{onClick:o,className:"text-center underline cursor-pointer",children:"Pedir reembolso"})}):c()&&jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center",children:jsxRuntimeExports.jsx("a",{onClick:r,className:"text-center underline cursor-pointer",children:"Gerenciar assinatura"})})}function CardPlan({client:e}){return jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-1/2 min-w-[150px] max-w-[400px] min-h-[200px] flex flex-col justify-between border border-zinc-600 p-2 rounded-md z-0",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-center gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-center",children:"Plano atual:"}),jsxRuntimeExports.jsx(PlanName,{plan_management:e==null?void 0:e.plan_management})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center my-4",children:jsxRuntimeExports.jsx(PlanInformation,{plan_management:e==null?void 0:e.plan_management})}),jsxRuntimeExports.jsx(ButtonChangeAndAddPlan,{client:e}),jsxRuntimeExports.jsx(ButtonRequestRefund,{client:e})]})}function CardRefund({client:e}){const{setModalContent:s}=reactExports.useContext(ModalContext),a=async()=>{e&&await reactivatePlan(e.id)&&(s({componentName:"modal_reactive_plan",components:jsxRuntimeExports.jsx(PopOver,{message:"Plano reativado com  sucesso!",componentName:"modal_reactive_plan"})}),setTimeout(()=>window.location.reload(),1500))};return!!(e!=null&&e.refund_requested.length)&&e.refund_requested[0].status!=="CANCEL"&&jsxRuntimeExports.jsxs("div",{className:"w-4/5 md:w-1/2 min-w-[150px] max-w-[400px] min-h-[200px] border border-zinc-600 p-2 rounded-md",children:[jsxRuntimeExports.jsx("h2",{className:"w-full text-center pb-4 text-xl",children:"Reembolso solicitado:"}),jsxRuntimeExports.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Reembolso solicidado em:",jsxRuntimeExports.jsx("p",{children:e.refund_requested[0].created_at.substring(0,10)})]}),jsxRuntimeExports.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Plano:",jsxRuntimeExports.jsx("p",{children:e.plan_management.plan.plan_name})]}),jsxRuntimeExports.jsxs("span",{className:"flex gap-2 text-zinc-400",children:["Status:",e.refund_requested[0].status==="PENDING"?jsxRuntimeExports.jsx("p",{className:"text-red-600",children:"Pendente"}):e.refund_requested[0].status==="APPROVED"?jsxRuntimeExports.jsx("p",{className:"text-green-600",children:"Dinheiro devolvido"}):jsxRuntimeExports.jsx("p",{className:"text-zinc-200",children:"Reembolso cancelado"})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mt-6",children:e.refund_requested[0].status==="PENDING"&&jsxRuntimeExports.jsx(Button,{onClick:a,children:"Cancelar reembolso"})})]})}function Payments(){const{client:e}=reactExports.useContext(ClientContext);return jsxRuntimeExports.jsxs(Container,{title:"Assinatura",className:"flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-[95%] flex flex-col md:flex-row gap-2 justify-center items-center",children:[jsxRuntimeExports.jsx(CardPlan,{client:e}),jsxRuntimeExports.jsx(CardRefund,{client:e})]}),jsxRuntimeExports.jsx(TransactionHistoric,{plan_management:e==null?void 0:e.plan_management})]})}function ChangePassword(){const{setValue:e}=useFormContext(),s=useForm(),{handleSubmit:a}=s,{client:o}=reactExports.useContext(ClientContext),{setModalContent:l,clearModal:r}=reactExports.useContext(ModalContext),c=async u=>{if(!o)return;if(u.new_password.length<8||u.current_password.length<8){const x=!u.new_password.length||!u.current_password.length?"Preencha todos os dados":"Informe uma senha com mais de 8 caracteres";l({componentName:"modal_error_fill_data",components:jsxRuntimeExports.jsx(PopOver,{message:x,componentName:"modal_error_fill_data",type:"WARNING"})});return}if(u.new_password!==u.confirm_password){l({componentName:"modal_error_new_password",components:jsxRuntimeExports.jsx(PopOver,{message:"Sua confirmação de senha não é idêntica a sua nova senha!",componentName:"modal_error_new_password",type:"ERROR"})});return}u.client_id=o.id;const m=await changePasswordClient(u);m||l({componentName:"modal_error_password",components:jsxRuntimeExports.jsx(PopOver,{message:"A sua atual senha está incorreta!",componentName:"modal_error_password",type:"ERROR"})}),(m==null?void 0:m.status)===200&&(e("password",u.new_password),l({componentName:"modal_change_password_success",components:jsxRuntimeExports.jsx(PopOver,{message:"Senha atualizada com sucesso!",componentName:"modal_change_password_success",functionAfterComplete:()=>r(null,{clearLast:!0})})}))};return jsxRuntimeExports.jsx(FormProvider,{...s,children:jsxRuntimeExports.jsxs("form",{className:"flex min-w-[200px] flex-col gap-8 p-4",onSubmit:a(c),children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Sua senha atual:"}),jsxRuntimeExports.jsx(InputPassword,{name:"current_password"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Nova senha:"}),jsxRuntimeExports.jsx(InputPassword,{name:"new_password"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-4 justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"whitespace-nowrap font-medium ",children:"Confirme sua senha:"}),jsxRuntimeExports.jsx(InputPassword,{name:"confirm_password"})]}),jsxRuntimeExports.jsxs(Button,{customClass:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FaSave,{})," Salvar"]})]})})}const clientSchema=z.object({fullname:z.string().min(1,"Digite seu nome completo!").refine(e=>{const s=e.split(" ");return!!(s.length>=2&&s[1])},"Vocẽ precisa informar seu nome completo"),user:z.string().min(1,"Digite um nome de usuário!").max(25,"Nome de usuário muito longe, informe um menor."),email:z.string().email(),password:z.string().min(8,"Sua senha precisa ter no minimo 8 caracteres!")});function ConfigProfile(){const{setModalContent:e}=reactExports.useContext(ModalContext),{client:s,setClient:a}=reactExports.useContext(ClientContext),o=useForm({resolver:t(clientSchema),defaultValues:{fullname:s==null?void 0:s.fullname,user:s==null?void 0:s.user,email:s==null?void 0:s.email,password:"senha-qualquer"}}),{handleSubmit:l,formState:{errors:r}}=o;reactExports.useEffect(()=>{const x=c(r);x&&e({componentName:"modal_error_message",components:jsxRuntimeExports.jsx(PopOver,{message:x,type:"WARNING",componentName:"modal_error_message"})})},[r]);const c=x=>{if(typeof x=="object"&&objectType!==null)for(let h in x){if(h==="message")return x[h];{const p=c(x[h]);if(p!==void 0)return p}}},u=async x=>{if((s==null?void 0:s.user)===x.user||await checkUserIsAvailable(x.user)){x.client_id=s==null?void 0:s.id;const h=await updateClient(x);(h==null?void 0:h.status)===200&&(a(h.data),e({componentName:"modal_user_success",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_user_success",message:"Perfil atualizado com sucesso"})}))}else e({componentName:"modal_error_user",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_error_user",message:"Usuário informado não está disponível!",type:"WARNING"})})},m=()=>{e({componentName:"modal_show_password",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsx(FormProvider,{...o,children:jsxRuntimeExports.jsx(ChangePassword,{})})})})},d=()=>{e({componentName:"modal_show_email",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_show_email",message:"Ainda não é possível atualizar o e-mail, para mais informações entre em contato com o suporte.",type:"WARNING"})})};return jsxRuntimeExports.jsx(Container,{title:"Configurações",children:jsxRuntimeExports.jsx(FormProvider,{...o,children:jsxRuntimeExports.jsxs("form",{onSubmit:l(u),className:"w-full md:w-2/3 mx-auto p-4 px-8 flex flex-col gap-6",children:[jsxRuntimeExports.jsxs(Root.Container,{className:"w-full flex flex-col md:flex-row items-center gap-4",children:[jsxRuntimeExports.jsx(Root.Input,{name:"fullname",title:"Nome completo"}),jsxRuntimeExports.jsx(Root.Input,{name:"user",title:"Usuário"})]}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(Root.Container,{children:jsxRuntimeExports.jsx(Root.Input,{type:"email",name:"email",title:"Informe seu e-mail",disabled:!0})}),jsxRuntimeExports.jsxs(Button,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:d,children:["Alterar e-mail",jsxRuntimeExports.jsx(FaLock,{})]})]}),jsxRuntimeExports.jsxs(Root.Container,{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(Root.Container,{children:jsxRuntimeExports.jsx(Root.Input,{type:"password",name:"password",title:"Sua senha",disabled:!0})}),jsxRuntimeExports.jsxs(Button,{type:"button",customClass:"min-w-[200px] flex justify-center items-center gap-2",onClick:m,children:["Alterar senha",jsxRuntimeExports.jsx(FaLock,{})]})]}),jsxRuntimeExports.jsxs(Button,{customClass:"flex gap-2 mt-8",children:["Salvar ",jsxRuntimeExports.jsx(FaSave,{})]})]})})})}function Leads({}){var x;const{client:e}=reactExports.useContext(ClientContext),[s,a]=useSearchParams(),o=["nome","e-mail","Telefone"],[l,r]=reactExports.useState([[]]),c=s.get(FILTER_BY_PROJECT_NAME_URL),u=(x=e==null?void 0:e.plan_management.project)==null?void 0:x.map(h=>({id:h.project_name.replaceAll(" ","_"),value:h.project_name,text:h.project_name}));reactExports.useEffect(()=>{const h=s.get("filter_time");var p=(e==null?void 0:e.plan_management.project)||[];c&&(p=p.filter(j=>j.project_name.replaceAll(" ","_")===c&&j));const g=p.flatMap(j=>j.message_manager.map(R=>{var C,w,v,A;let _=(C=R.lead_collected[R.lead_collected.length-1])==null?void 0:C.time,N=(w=R.lead_collected.sort((b,S)=>formatDate(S.time).dateTransformNumber-formatDate(b.time).dateTransformNumber).find(b=>!!b.name))==null?void 0:w.name,y=(v=R.lead_collected.sort((b,S)=>formatDate(S.time).dateTransformNumber-formatDate(b.time).dateTransformNumber).find(b=>!!b.email))==null?void 0:v.email,E=(A=R.lead_collected.sort((b,S)=>formatDate(S.time).dateTransformNumber-formatDate(b.time).dateTransformNumber).find(b=>!!b.cell_phone))==null?void 0:A.cell_phone;return y||E?!h||convertDateInHour(_)<=Number(h)?[N||"-",y||"-",E||"-"]:[]:[]})).filter(j=>j.length>0);r(g)},[s]);const m=h=>{s.set("project",h.replaceAll(" ","_")),a(s)},d=()=>{s.delete("project"),a(s)};return jsxRuntimeExports.jsxs(Container,{title:"Leads coletados",className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-[90%] flex flex-col-reverse md:flex-row md:justify-end gap-2 md:gap-8 md:h-[40px] px-4 md:px-0",children:[jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione um chat",children:jsxRuntimeExports.jsx(Select,{name:"select_chat",title:"Selecione um chat",options:u||[],optionsDefault:c?Array.of(c):null,onSelected:m,onDelete:d})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Selecione uma data  como filtro",children:jsxRuntimeExports.jsx(SelectTime,{})}),jsxRuntimeExports.jsx(TipContainer,{tip:"Atualize seus chats",positionX:"LEFT",children:jsxRuntimeExports.jsx("div",{className:"p-2 bg-light dark:bg-gray border border-primary-100 rounded-md cursor-pointer",children:jsxRuntimeExports.jsx(FaArrowRotateLeft,{className:"text-nxl"})})})]}),jsxRuntimeExports.jsx("div",{className:"w-[90%]",children:jsxRuntimeExports.jsx(Table,{titleColumn:o,rows:l})})]})}function SubTitle({children:e,className:s}){return jsxRuntimeExports.jsx("h2",{className:twMerge("text-lg text-center md:text-xl opacity-70 text-dark dark:text-light ",s),children:e})}function Title({children:e,className:s}){return jsxRuntimeExports.jsx("h2",{className:twMerge("text-xl md:text-2xl text-center opacity-90 text-dark dark:text-light ",s),children:e})}function CardNoCategory({handleCreateCategory:e}){return jsxRuntimeExports.jsxs("div",{className:"w-3/4 flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsx(Title,{children:"Cadastre seus produtos aqui"}),jsxRuntimeExports.jsx(SubTitle,{children:"É muito simples e fácil, basta criar um categoria e logo em seguida adicionar seus produtos"}),jsxRuntimeExports.jsxs(Button,{effectNeon:!0,onClick:e,children:[jsxRuntimeExports.jsx(FaPlus,{})," Adicionar categoria"]})]})}function CardCategories({category:e,setCategories:s}){var u;const{setModalContent:a,clearModal:o}=reactExports.useContext(ModalContext),{register:l,handleSubmit:r}=useForm(),c=()=>{function m(d){s(x=>x?x.map(h=>h.category_name===e.category_name?{...h,products:h.products?[...h.products,d]:[d]}:h):[]),a({componentName:"modal_success_category",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_success_category",message:"Produto criado com sucesso!",functionAfterComplete:()=>o("modal_create_category")})})}a({componentName:"modal_create_category",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsxs("form",{onSubmit:r(m),className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("p",{children:"Nome do produto"}),jsxRuntimeExports.jsx("input",{type:"text",...l("product_name")}),jsxRuntimeExports.jsx("p",{children:"Valor do produto"}),jsxRuntimeExports.jsx("input",{type:"number",...l("value")}),jsxRuntimeExports.jsx(Button,{children:"Cadastrar produto"})]})})})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center bg-primary-100 px-4",children:[jsxRuntimeExports.jsx(Title,{className:"font-bold",children:e.category_name}),jsxRuntimeExports.jsxs(Button,{onClick:c,children:[jsxRuntimeExports.jsx(FaPlus,{})," Adicionar produto"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full flex gap-4 justify-start flex-wrap items-center bg-primary-50 p-4",children:(u=e.products)==null?void 0:u.map(m=>jsxRuntimeExports.jsxs("div",{className:"w-20 h-20 flex items-center gap-4 relative hover:scale-105 cursor-pointer transition-transform",children:[jsxRuntimeExports.jsx("img",{src:"https://via.placeholder.com/100",className:"w-full h-full object-cover"}),jsxRuntimeExports.jsx(SubTitle,{className:"absolute bottom-0 w-full bg-dark/40",children:m.product_name})]},m.product_name))})]})}function MyProducts({}){const[e,s]=reactExports.useState([]),{setModalContent:a,clearModal:o}=reactExports.useContext(ModalContext),{handleSubmit:l,register:r}=useForm(),c=()=>{function u(m){s(d=>[...d,m]),a({componentName:"modal_success_category",components:jsxRuntimeExports.jsx(PopOver,{componentName:"modal_success_category",message:"Categoria adicionada com sucesso!",functionAfterComplete:()=>o("modal_create_category")})})}a({componentName:"modal_create_category",components:jsxRuntimeExports.jsx(PopUp,{children:jsxRuntimeExports.jsxs("form",{onSubmit:l(u),className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("input",{type:"text",...r("category_name")}),jsxRuntimeExports.jsx(Button,{children:"Cadastrar categoria"})]})})})};return jsxRuntimeExports.jsx(Container,{title:"Produtos",children:jsxRuntimeExports.jsx("div",{className:"p-4 w-full flex flex-col justify-center items-center gap-4",children:e.length?jsxRuntimeExports.jsxs("div",{className:"w-full space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex justify-end",children:jsxRuntimeExports.jsx(Button,{onClick:c,children:"Criar categoria"})}),jsxRuntimeExports.jsx("div",{className:"w-full",children:e.map(u=>jsxRuntimeExports.jsx(CardCategories,{setCategories:s,category:u}))})]}):jsxRuntimeExports.jsx(CardNoCategory,{handleCreateCategory:c})})})}const containers=[{tab:"my_chats",element:jsxRuntimeExports.jsx(MyChats,{})},{tab:"metrics",element:jsxRuntimeExports.jsx(Metric,{})},{tab:"database",element:jsxRuntimeExports.jsx(MyDatabases,{})},{tab:"products",element:jsxRuntimeExports.jsx(MyProducts,{})},{tab:"records",element:jsxRuntimeExports.jsx(ConversationHistoric,{})},{tab:"conversations",element:jsxRuntimeExports.jsx(ConversationHistoric,{})},{tab:"leads",element:jsxRuntimeExports.jsx(Leads,{})},{tab:"payment",element:jsxRuntimeExports.jsx(Payments,{})},{tab:"config",element:jsxRuntimeExports.jsx(ConfigProfile,{})}];function ControlComponentsSelectedMenu(){const[e]=useSearchParams(),s=e.get("tab")||"my_chats",a=()=>{const o=containers.find(l=>l.tab===s);return o==null?void 0:o.element};return jsxRuntimeExports.jsx("div",{className:"w-full px-2 md:px-8",children:a()})}function MainPanelClient(){return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen md:w-[90%] flex-grow flex flex-col items-center bg-gradient-to-br from-primary-100 from-[10%] to-light to-[20%] dark:to-dark",children:[jsxRuntimeExports.jsx(PanelHeader,{}),jsxRuntimeExports.jsx(ControlComponentsSelectedMenu,{})]})}export{MainPanelClient as default};
